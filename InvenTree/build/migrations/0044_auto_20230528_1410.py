# Generated by Django 3.2.19 on 2023-05-28 14:10

from django.db import migrations


def add_lines_to_builds(apps, schema_editor):
    """Create BuildOrderLine objects for existing build orders"""

    # Get database models
    Build = apps.get_model("build", "Build")
    BuildItem = apps.get_model("build", "BuildItem")
    BuildLine = apps.get_model("build", "BuildLine")

    Part = apps.get_model("part", "Part")
    BomItem = apps.get_model("part", "BomItem")

    for build in Build.objects.all():
        # Create a BuildOrderLine for each BuildItem

        print(build.pk, build.title)


class Migration(migrations.Migration):

    dependencies = [
        ('build', '0043_buildline'),
    ]

    operations = [
        migrations.RunPython(
            add_lines_to_builds,
            reverse_code=migrations.RunPython.noop
        ),
    ]
