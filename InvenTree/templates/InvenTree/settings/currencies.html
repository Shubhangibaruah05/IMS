{% extends "panel.html" %}
{% load i18n %}
{% load inventree_extras %}

{% block label %}currencies{% endblock %}

{% block heading %}
{% trans "Currency Settings" %}
{% endblock %}

{% block actions %}
<form action='{% url "settings-currencies-refresh" %}' method='post'>
    <div id='refresh-rates-form'>
        {% csrf_token %}
        <button type='submit' id='update-rates' class='btn btn-primary float-right'>{% trans "Update Now" %}</button>
    </div>
</form>
{% endblock %}

{% block content %}
{% if rates_updated %}
<div class='alert alert-block alert-info'>
    {% trans "Last Update" %} - {{ rates_updated }}
</div>
{% else %}
<div class='alert alert-block alert-warning'>
    {% trans "Last Update" %} - {% trans "Never" %}
</div>
{% endif %}

<table class='table table-striped table-condensed'>
    <tbody>
        {% include "InvenTree/settings/setting.html" with key="INVENTREE_DEFAULT_CURRENCY" icon="fa-globe" %}

        <tr>
            <td></td>
            <th>{% trans "Base Currency" %}</th>
            <th>{{ base_currency }}</th>
        </tr>
        <tr>
            <td></td>
            <th>{% trans "Exchange Rates" %}</th>
            <th>{% trans "Currency" %}</th>
            <th>{% trans "Rate" %}</th>
        </tr>
        {% for rate in rates %}
        <tr>
            <td></td>
            <td></td>
            <td>{{ rate.currency }}</td>
            <td>{{ rate.value }}</td>
            <td></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
