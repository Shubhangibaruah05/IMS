{% load inventree_extras %}
{% load i18n %}

{% if connection_key %}
{% setting_object key connection_key=connection_key connection=connection_ref plugin=plugin ref='true' as set_obj %}
{% elif plugin %}
{% setting_object key plugin=plugin ref='true' as set_obj %}
{% elif user_setting %}
{% setting_object key user=request.user ref='true' as set_obj %}
{% elif notification_setting %}
{% setting_object key method=method user=request.user ref='true' as set_obj %}
{% else %}
{% setting_object key ref='true' as set_obj %}
{% endif %}

{% with setting=set_obj.setting reference=set_obj.reference %}
<tr>
    <td>
        {% if icon %}
        <span class='fas {{ icon }}'></span>
        {% endif %}
    </td>
    <td><strong>{{ setting.name }}</strong></td>
    <td>
        {{ setting.description }}
    </td>
    <td>
        {% if setting.is_bool %}
        <div class='form-check form-switch'>
            <input class='form-check-input boolean-setting' fieldname='{{ setting.key.upper }}' pk='{{ setting.pk }}' setting='{{ setting.key.upper }}' id='setting-value-{{ setting.pk }}-{{ setting.typ }}' type='checkbox' {% if setting.as_bool %}checked=''{% endif %}{{reference}}>
        </div>
        {% else %}
        <div id='setting-{{ setting.pk }}'>
            <span id='setting-value-{{ setting.pk }}-{{ setting.typ }}' fieldname='{{ setting.key.upper }}'>
                {% if setting.value %}
                {% if setting.is_choice %}
                <strong>{{ setting.as_choice }}</strong>
                {% else %}
                <strong>{{ setting.value }}</strong>
                {% endif %}
                {% else %}
                <em style='color: #855;'>{% trans "No value set" %}</em>
                {% endif %}
            </span>
            {{ setting.units }}
            <div class='btn-group float-right'>
                <button class='btn btn-outline-secondary btn-small btn-edit-setting' pk='{{ setting.pk }}' setting='{{ setting.key.upper }}' title='{% trans "Edit setting" %}'{{reference}}>
                    <span class='fas fa-edit icon-green'></span>
                </button>
            </div>
        </div>
        {% endif %}
    </td>
</tr>
{% endwith %}
