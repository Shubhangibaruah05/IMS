{% extends "page_base.html" %}

{% load inventree_extras %}
{% load static %}
{% load i18n %}

{% block page_title %}
{% inventree_title %} | {% trans "Supplier API" %}
{% endblock page_title %}

{% block heading %}
{% trans "Supplier API" %}
{% endblock heading %}

{% block actions %}
{% if roles.part.add %}
<button type='button' class="btn btn-success" id='import-supplier-part'>
    <span class='fas fa-tools'></span> {% trans "Import Supplier Part" %}
</button>
{% endif %}
{% endblock actions %}

{% block page_info %}

<div class='panel-content'>
    <p>Multiple supplier APIs are available</p>
</div>

{% endblock page_info %}

{% block js_ready %}
{{ block.super }}

$("#import-supplier-part").click(function() {
    importSupplierPart();
});

/*
 * Import a part from a plugin supplier via an API form
 */
function importSupplierPart(options={}) {
    /* Launch modal form to import part from plugin supplier.
     */

    var fields = {
        connection: {},
        reference: {},
        category: {},
    }

    constructForm(`{% url "api-plugin-import" %}`, {
        fields: fields,
        data: options.data,
        follow: true,
        method: 'POST',
        title: '{% trans "Import Supplier Part" %}',
        onSuccess: options.onSuccess,
    });
}

{% endblock js_ready %}
