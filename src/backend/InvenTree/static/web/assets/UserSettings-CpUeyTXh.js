import{r as _,b7 as N,j as e,S as T,T as O,bd as v,c3 as H,i as o,L as b,cY as h,eP as G,G as A,b9 as M,m as L,b_ as U,e2 as z,q as f,ba as i,b5 as J,eQ as Z,l as V,eR as B,eS as $,eT as K,eU as ee,cm as se,bS as ne,eV as ie,aw as te,eW as re,eX as ae,b$ as le,eY as oe,eZ as de,bK as ce}from"./vendor-B0vSnHFf.js";import{T as n}from"./BaseContext-DSwOqL9e.js";import{P as je}from"./PanelGroup-DRVQKYn0.js";import{U as p,S as xe}from"./SettingList-CP9YLWgd.js";import{a as W,A as u,d as R,e as C,q as Ee,I as _e,y as w,u as P,S as y}from"./index-CDdQlqFV.js";import{Y as he}from"./YesNoButton-1B57tnbm.js";import{P as ue}from"./Placeholder-B-jcCRRL.js";import{E as Se}from"./EditButton-CoIrf_EI.js";import{u as Te}from"./use-form-CVpPkiYA.js";import{C as me,L as Ae}from"./LanguageSelect-D9NdyCAr.js";import"./Instance-Co8OMzcE.js";import"./Boundary-CysPC9mI.js";import"./StylishText-CrpvZzAV.js";import"./DesktopAppView-CofLSp00.js";import"./UseForm-BimrM1zK.js";function Re(){const[s,c]=_.useState(!1),[j,x]=_.useState(!1),{isLoading:E,data:t}=N({queryKey:["sso-providers"],queryFn:()=>R.get(C(u.sso_providers)).then(d=>d.data)});return _.useEffect(()=>{t!==void 0&&(c(t.sso_enabled||!1),x(t.mfa_required||!1))},[t]),e.jsxs(T,{children:[e.jsx(O,{order:5,children:e.jsx(n,{id:"O3oNi5"})}),e.jsx(Ce,{}),e.jsx(O,{order:5,children:e.jsx(n,{id:"sGV/QR"})}),s?e.jsx(fe,{dataProvider:t}):e.jsx(v,{icon:e.jsx(H,{size:"1rem"}),title:o._({id:"GYQmzM"}),color:"yellow",children:e.jsx(n,{id:"Sm3zWc"})}),e.jsx(O,{order:5,children:e.jsx(n,{id:"gzRIYb"})}),E?e.jsx(b,{}):e.jsx(e.Fragment,{children:j?e.jsx(Ie,{}):e.jsx(v,{icon:e.jsx(H,{size:"1rem"}),title:o._({id:"GYQmzM"}),color:"yellow",children:e.jsx(n,{id:"3JPMTK"})})}),e.jsx(O,{order:5,children:e.jsx(n,{id:"TP9/K5"})}),e.jsx(Oe,{})]})}function Ce(){const[s,c]=_.useState(""),[j,x]=_.useState(""),[E]=W(l=>[l.user]),{isLoading:t,data:d,refetch:m}=N({queryKey:["emails"],queryFn:()=>R.get(C(u.user_emails)).then(l=>l.data)});function S(l){R.post(C(l,void 0,{id:s}),{}).then(()=>{m()}).catch(I=>console.log(I.data))}function r(){R.post(C(u.user_emails),{email:j,user:E==null?void 0:E.pk}).then(()=>{m()}).catch(l=>console.log(l.data))}return t?e.jsx(b,{}):e.jsxs(h,{children:[e.jsx(h.Col,{span:6,children:e.jsx(G.Group,{value:s,onChange:c,name:"email_accounts",label:o._({id:"Xfy/DT"}),children:e.jsx(T,{mt:"xs",children:d.map(l=>e.jsx(G,{value:String(l.id),label:e.jsxs(A,{justify:"space-between",children:[l.email,l.primary&&e.jsx(M,{color:"blue",children:e.jsx(n,{id:"T/R+Qz"})}),l.verified?e.jsx(M,{color:"green",children:e.jsx(n,{id:"QDEWii"})}):e.jsx(M,{color:"yellow",children:e.jsx(n,{id:"VBTGXl"})})]})},l.id))})})}),e.jsx(h.Col,{span:6,children:e.jsxs(T,{children:[e.jsx(L,{children:e.jsx(n,{id:"oLztc+"})}),e.jsx(U,{label:o._({id:"Y/cuRF"}),placeholder:o._({id:"JqLqpm"}),leftSection:e.jsx(z,{}),value:j,onChange:l=>x(l.currentTarget.value)})]})}),e.jsx(h.Col,{span:6,children:e.jsxs(A,{children:[e.jsx(f,{onClick:()=>S(u.user_email_primary),children:e.jsx(n,{id:"g/Kbij"})}),e.jsx(f,{onClick:()=>S(u.user_email_verify),children:e.jsx(n,{id:"+GoJJW"})}),e.jsx(f,{onClick:()=>S(u.user_email_remove),children:e.jsx(n,{id:"t/YqKh"})})]})}),e.jsx(h.Col,{span:6,children:e.jsx(f,{onClick:r,children:e.jsx(n,{id:"0+CYPj"})})})]})}function fe({dataProvider:s}){const[c,j]=_.useState(""),[x,E]=_.useState(),{isLoading:t,data:d}=N({queryKey:["sso-list"],queryFn:()=>R.get(C(u.user_sso)).then(r=>r.data)});_.useEffect(()=>{if(s===void 0||d===void 0)return;const r=d.map(g=>g.provider);function l(g){return!r.includes(g.id)}let I=s.providers;I=I.filter(l),E(I)},[s,d]);function m(){R.post(C(u.user_sso_remove,void 0,{id:c})).then(()=>{Ee.removeQueries({queryKey:["sso-list"]})}).catch(r=>console.log(r.data))}if(t)return e.jsx(b,{});function S({provider:r}){const l=e.jsx(f,{component:"a",href:r.connect,variant:"outline",disabled:!r.configured,children:e.jsxs(A,{justify:"space-between",children:[r.display_name,r.configured==!1&&e.jsx(H,{})]})},r.id);return r.configured?l:e.jsx(J,{label:o._({id:"vwfjas"}),children:l})}return e.jsxs(h,{children:[e.jsx(h.Col,{span:6,children:d.length==0?e.jsx(v,{icon:e.jsx(H,{size:"1rem"}),title:o._({id:"SDND4q"}),color:"yellow",children:e.jsx(n,{id:"fkCzQP"})}):e.jsxs(T,{children:[e.jsx(G.Group,{value:c,onChange:j,name:"sso_accounts",label:o._({id:"B1uCAI"}),children:e.jsx(T,{mt:"xs",children:d.map(r=>e.jsx(G,{value:String(r.id),label:r.provider},r.id))})}),e.jsx(f,{onClick:m,children:e.jsx(n,{id:"t/YqKh"})})]})}),e.jsx(h.Col,{span:6,children:e.jsxs(T,{children:[e.jsx(L,{children:"Add SSO Account"}),e.jsx(L,{children:x===void 0?e.jsx(n,{id:"yQE2r9"}):e.jsx(T,{gap:"xs",children:x.map(r=>e.jsx(S,{provider:r},r.id))})})]})})]})}function Ie(){return e.jsxs(e.Fragment,{children:["MFA Details",e.jsx(ue,{})]})}function Oe(){const{isLoading:s,data:c,refetch:j}=N({queryKey:["token-list"],queryFn:()=>R.get(C(u.user_tokens)).then(t=>t.data)});function x(t){R.delete(C(u.user_tokens,t)).then(()=>{j()}).catch(d=>console.log(d.data))}const E=_.useMemo(()=>s||c===void 0?null:c.map(t=>e.jsxs(i.Tr,{children:[e.jsx(i.Td,{children:e.jsx(he,{value:t.active})}),e.jsx(i.Td,{children:t.expiry}),e.jsx(i.Td,{children:t.last_seen}),e.jsx(i.Td,{children:t.token}),e.jsx(i.Td,{children:t.name}),e.jsx(i.Td,{children:t.in_use?e.jsx(n,{id:"Wcm4Tk"}):e.jsx(f,{onClick:()=>x(t.id),color:"red",disabled:!t.active,children:e.jsx(n,{id:"GXsAby"})})})]},t.id)),[c,s]);return s?e.jsx(b,{}):c.length==0?e.jsx(v,{icon:e.jsx(H,{size:"1rem"}),color:"green",children:e.jsx(n,{id:"V9/zZt"})}):e.jsxs(i,{stickyHeader:!0,striped:!0,highlightOnHover:!0,withTableBorder:!0,children:[e.jsx(i.Thead,{children:e.jsxs(i.Tr,{children:[e.jsx(i.Th,{children:e.jsx(n,{id:"F6pfE9"})}),e.jsx(i.Th,{children:e.jsx(n,{id:"agO/T/"})}),e.jsx(i.Th,{children:e.jsx(n,{id:"bLZksC"})}),e.jsx(i.Th,{children:e.jsx(n,{id:"TP9/K5"})}),e.jsx(i.Th,{children:e.jsx(n,{id:"6YtxFj"})}),e.jsx(i.Th,{children:e.jsx(n,{id:"7L01XJ"})})]})}),e.jsx(i.Tbody,{children:E})]})}function Pe(){const[s,c]=W(d=>[d.user,d.fetchUserState]),j=Te({initialValues:s}),[x,E]=Z([!1,!0]);function t(d){const m={...d};m.is_active=!0,R.put(C(u.user_me),m).then(S=>{S.status===200&&(E(),c())}).catch(()=>{console.error("ERR: Error saving user data")})}return e.jsxs("form",{onSubmit:j.onSubmit(d=>t(d)),children:[e.jsxs(A,{children:[e.jsx(O,{order:3,children:e.jsx(n,{id:"AQoSYJ"})}),e.jsx(Se,{setEditing:E,editing:x})]}),e.jsx(A,{children:x?e.jsxs(T,{gap:"xs",children:[e.jsx(U,{label:"first name",placeholder:o._({id:"V1EGGU"}),...j.getInputProps("first_name")}),e.jsx(U,{label:"Last name",placeholder:o._({id:"1ZaQUH"}),...j.getInputProps("last_name")}),e.jsx(A,{justify:"right",mt:"md",children:e.jsx(f,{type:"submit",children:e.jsx(n,{id:"hQRttt"})})})]}):e.jsxs(T,{gap:"0",children:[e.jsxs(L,{children:[e.jsx(n,{id:"7eE++L"}),j.values.first_name]}),e.jsxs(L,{children:[e.jsx(n,{id:"FSN9CU"}),j.values.last_name]})]})})]})}function ge({height:s}){return e.jsxs(V,{w:"100%",mih:s,p:0,children:[e.jsx(O,{order:3,children:e.jsx(n,{id:"DdjH42"})}),e.jsx(i,{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(n,{id:"FpsvqB"})}),e.jsx("td",{children:e.jsx(A,{children:e.jsx(me,{})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(n,{id:"vXIe7J"})}),e.jsxs("td",{children:[" ",e.jsxs(A,{children:[e.jsx(Ae,{width:200}),_e]})]})]})]})})]})}function pe(s){return{[B.colors[s][6]]:s}}const Y=Object.assign({},...Object.keys(B.colors).map(s=>pe(s)));function He({height:s}){function c(a){P.setState({primaryColor:Y[a]})}const[j,x]=_.useState(w.white);function E(a){P.setState({whiteColor:a}),x(a)}const[t,d]=_.useState(w.black);function m(a){P.setState({blackColor:a}),d(a)}function S(a){const D=y.find(X=>X.value===a);return D||y[0]}function r(){const a=y.find(D=>D.label===P.getState().radius);return a?a.value:50}const[l,I]=_.useState(r());function g(a){I(a),P.setState({radius:S(a).label})}const F=[{value:"bars",label:o._({id:"M46ISI"})},{value:"oval",label:o._({id:"Ai6veK"})},{value:"dots",label:o._({id:"8zGXnJ"})}],[k,q]=P(a=>[a.loader,a.setLoader]);function Q(a){a!==null&&q(a)}return e.jsxs(V,{w:"100%",mih:s,p:0,children:[e.jsx(O,{order:3,children:e.jsx(n,{id:"FEr96N"})}),e.jsx(i,{children:e.jsxs(i.Tbody,{children:[e.jsxs(i.Tr,{children:[e.jsx(i.Td,{children:e.jsx(n,{id:"QFd2P1"})}),e.jsx(i.Td,{children:e.jsx($,{format:"hex",onChange:c,withPicker:!1,swatches:Object.keys(Y)})})]}),e.jsxs(i.Tr,{children:[e.jsx(i.Td,{children:e.jsx(n,{id:"160vo+"})}),e.jsx(i.Td,{children:e.jsx(K,{value:j,onChange:E})})]}),e.jsxs(i.Tr,{children:[e.jsx(i.Td,{children:e.jsx(n,{id:"u01284"})}),e.jsx(i.Td,{children:e.jsx(K,{value:t,onChange:m})})]}),e.jsxs(i.Tr,{children:[e.jsx(i.Td,{children:e.jsx(n,{id:"bjp1xg"})}),e.jsx(i.Td,{children:e.jsx(ee,{label:a=>S(a).label,defaultValue:50,step:25,marks:y,value:l,onChange:g,mb:18})})]}),e.jsxs(i.Tr,{children:[e.jsx(i.Td,{children:e.jsx(n,{id:"EBeoY+"})}),e.jsx(i.Td,{children:e.jsxs(A,{align:"center",children:[e.jsx(se,{data:F,value:k,onChange:Q}),e.jsx(b,{type:k,mah:18})]})})]})]})})]})}function Le(){return e.jsx("div",{children:e.jsxs(ne,{cols:2,spacing:"md",children:[e.jsx(V,{w:"100%",children:e.jsx(Pe,{})}),e.jsxs(h,{gutter:"md",children:[e.jsx(h.Col,{children:e.jsx(He,{height:142})}),e.jsx(h.Col,{children:e.jsx(ge,{height:142})})]})]})})}function Fe(){const[s,c]=W(x=>[x.user,x.isLoggedIn]),j=_.useMemo(()=>[{name:"account",label:o._({id:"AeXO77"}),icon:e.jsx(ie,{}),content:e.jsx(Le,{})},{name:"security",label:o._({id:"a3LDKx"}),icon:e.jsx(te,{}),content:e.jsx(Re,{})},{name:"dashboard",label:o._({id:"7p5kLi"}),icon:e.jsx(re,{}),content:e.jsx(p,{keys:["HOMEPAGE_HIDE_INACTIVE","HOMEPAGE_PART_STARRED","HOMEPAGE_CATEGORY_STARRED","HOMEPAGE_PART_LATEST","HOMEPAGE_BOM_REQUIRES_VALIDATION","HOMEPAGE_STOCK_RECENT","HOMEPAGE_STOCK_LOW","HOMEPAGE_SHOW_STOCK_DEPLETED","HOMEPAGE_BUILD_STOCK_NEEDED","HOMEPAGE_STOCK_EXPIRED","HOMEPAGE_STOCK_STALE","HOMEPAGE_BUILD_PENDING","HOMEPAGE_BUILD_OVERDUE","HOMEPAGE_PO_OUTSTANDING","HOMEPAGE_PO_OVERDUE","HOMEPAGE_SO_OUTSTANDING","HOMEPAGE_SO_OVERDUE","HOMEPAGE_SO_SHIPMENTS_PENDING","HOMEPAGE_NEWS"]})},{name:"display",label:o._({id:"+4YDgS"}),icon:e.jsx(ae,{}),content:e.jsx(p,{keys:["STICKY_HEADER","DATE_DISPLAY_FORMAT","FORMS_CLOSE_USING_ESCAPE","PART_SHOW_QUANTITY_IN_FORMS","DISPLAY_SCHEDULE_TAB","DISPLAY_STOCKTAKE_TAB","TABLE_STRING_MAX_LENGTH"]})},{name:"search",label:o._({id:"A1taO8"}),icon:e.jsx(le,{}),content:e.jsx(p,{keys:["SEARCH_WHOLE","SEARCH_REGEX","SEARCH_PREVIEW_RESULTS","SEARCH_PREVIEW_SHOW_PARTS","SEARCH_HIDE_INACTIVE_PARTS","SEARCH_PREVIEW_SHOW_SUPPLIER_PARTS","SEARCH_PREVIEW_SHOW_MANUFACTURER_PARTS","SEARCH_PREVIEW_SHOW_CATEGORIES","SEARCH_PREVIEW_SHOW_STOCK","SEARCH_PREVIEW_HIDE_UNAVAILABLE_STOCK","SEARCH_PREVIEW_SHOW_LOCATIONS","SEARCH_PREVIEW_SHOW_COMPANIES","SEARCH_PREVIEW_SHOW_BUILD_ORDERS","SEARCH_PREVIEW_SHOW_PURCHASE_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_PURCHASE_ORDERS","SEARCH_PREVIEW_SHOW_SALES_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_SALES_ORDERS","SEARCH_PREVIEW_SHOW_RETURN_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_RETURN_ORDERS"]})},{name:"notifications",label:o._({id:"iDNBZe"}),icon:e.jsx(oe,{}),content:e.jsx(p,{keys:["NOTIFICATION_ERROR_REPORT"]})},{name:"reporting",label:o._({id:"ApEshE"}),icon:e.jsx(de,{}),content:e.jsx(p,{keys:["REPORT_INLINE","LABEL_INLINE","LABEL_DEFAULT_PRINTER"]})}],[]);return c()?e.jsxs(T,{gap:"xs",children:[e.jsx(xe,{title:o._({id:"Puv7+X"}),subtitle:s!=null&&s.first_name&&(s!=null&&s.last_name)?`${s==null?void 0:s.first_name} ${s==null?void 0:s.last_name}`:null,shorthand:(s==null?void 0:s.username)||"",switch_link:"/settings/system",switch_text:e.jsx(n,{id:"4ejweu"}),switch_condition:(s==null?void 0:s.is_staff)||!1}),e.jsx(je,{pageKey:"user-settings",panels:j})]}):e.jsx(ce,{})}export{Fe as default};
