import{r as t,i as s,j as o}from"./vendor-B0vSnHFf.js";import{A as F}from"./AddItemButton-CD0U_4gd.js";import{d as I,I as x}from"./ImporterForms-Bk-qT70E.js";import{A as k}from"./AttachmentLink-CL1ofkZf.js";import{S as w,j,P as v}from"./ColumnRenderers-CwItNORh.js";import{h as T}from"./Instance-Co8OMzcE.js";import{A as a,M as u,e as _}from"./index-CDdQlqFV.js";import{c as y,b as C}from"./UseFilter-Blar5lCV.js";import{b as P,a as M}from"./UseForm-BimrM1zK.js";import{u as D,S as O,a as U,I as q}from"./InvenTreeTable-D26a1r6-.js";import"./ActionButton-Br0cBRLA.js";import"./UseInstance-Bcp_oSAZ.js";import"./UseStatusCodes-FmkSIrlp.js";import"./StylishText-CrpvZzAV.js";import"./YesNoButton-1B57tnbm.js";import"./BaseContext-DSwOqL9e.js";import"./Boundary-CysPC9mI.js";import"./DesktopAppView-CofLSp00.js";function ee(){const r=D("importsession"),[b,l]=t.useState(!1),[n,i]=t.useState(void 0),m=P({url:a.import_session_list,pk:n,title:s._({id:"HkPAKw"}),table:r}),c=M({url:a.import_session_list,title:s._({id:"PlWSqy"}),fields:I(),onFormSuccess:e=>{i(e.pk),l(!0),r.refreshTable()}}),f=t.useMemo(()=>[{accessor:"model_type",sortable:!0},w({model:u.importsession}),{accessor:"data_file",render:e=>o.jsx(k,{attachment:e.data_file}),sortable:!1},j({accessor:"timestamp",title:s._({id:"3wG7HI"})}),{accessor:"user",sortable:!1,render:e=>T({instance:e.user_detail})},{sortable:!1,accessor:"row_count",title:s._({id:"drGZDS"}),render:e=>o.jsx(v,{progressLabel:!0,value:e.completed_row_count,maximum:e.row_count})}],[]),p=y(),d=C({url:_(a.import_session_list),method:"OPTIONS",accessor:"data.actions.POST.model_type.choices",transform:e=>({value:e.value,label:e.display_name})}),S=t.useMemo(()=>[{name:"model_type",label:s._({id:"pLosEx"}),description:s._({id:"qrooIv"}),choices:d.choices},{name:"status",label:s._({id:"uAQUqI"}),description:s._({id:"iv0viw"}),choiceFunction:O(u.importsession)},{name:"user",label:s._({id:"7PzzBU"}),description:s._({id:"FVjW63"}),choices:p.choices}],[d.choices,p.choices]),h=t.useMemo(()=>[o.jsx(F,{tooltip:s._({id:"PlWSqy"}),onClick:()=>c.open()})],[]),A=t.useCallback(e=>[U({onClick:()=>{i(e.pk),m.open()}})],[]);return o.jsxs(o.Fragment,{children:[c.modal,m.modal,o.jsx(q,{url:_(a.import_session_list),tableState:r,columns:f,props:{rowActions:A,tableActions:h,tableFilters:S,enableBulkDelete:!0,enableSelection:!0,onRowClick:e=>{i(e.pk),l(!0)}}}),o.jsx(x,{sessionId:n??-1,opened:n!==void 0&&b,onClose:()=>{i(void 0),l(!1),r.refreshTable()}})]})}export{ee as default};
