import{r as f,n as o,i as t,j as e,C as u,l as g,S as m,T as x,fk as _,q as j}from"./vendor-B0vSnHFf.js";import{L as k,T as l}from"./BaseContext-DSwOqL9e.js";import{g as T,u as C}from"./DesktopAppView-CofLSp00.js";import{d as E,e as F,A as P}from"./index-CDdQlqFV.js";import{u as S}from"./use-form-CVpPkiYA.js";function L(){const i=S({initialValues:{password:""}}),[n]=T(),r=C(),a=n.get("token"),d=n.get("uid");function w(){o.show({title:t._({id:"eV2FZ+"}),message:t._({id:"uAHzZQ"}),color:"red"}),r("/login")}function p(s){o.show({title:t._({id:"WhimMi"}),message:(s==null?void 0:s.new_password2)||(s==null?void 0:s.new_password1)||(s==null?void 0:s.token),color:"red"})}f.useEffect(()=>{(!a||!d)&&(o.show({title:t._({id:"+5xxir"}),message:t._({id:"KuLTFa"}),color:"red"}),r("/login"))},[a]);function h(){E.post(F(P.user_reset_set),{uid:d,token:a,new_password1:i.values.password,new_password2:i.values.password},{headers:{Authorization:""}}).then(s=>{s.status===200?(o.show({title:t._({id:"Hw2MHB"}),message:t._({id:"+p8fKY"}),color:"green",autoClose:!1}),r("/login")):p(s.data)}).catch(s=>{var c;s.response.status===400&&((c=s.response.data)==null?void 0:c.token)=="Invalid value"?w():p(s.response.data)})}return e.jsx(k,{children:e.jsx(u,{mih:"100vh",children:e.jsx(g,{w:"md",miw:425,children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(l,{id:"V/e7nf"})}),e.jsx(m,{children:e.jsx(_,{required:!0,label:t._({id:"8ZsakT"}),description:t._({id:"Wr5sDQ"}),...i.getInputProps("password")})}),e.jsx(j,{type:"submit",onClick:h,children:e.jsx(l,{id:"F+gz9Z"})})]})})})})}export{L as default};
