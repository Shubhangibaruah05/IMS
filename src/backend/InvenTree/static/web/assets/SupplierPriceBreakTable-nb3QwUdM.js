import{r as p,i as s,j as a,G as x,m as c,A}from"./vendor-B0vSnHFf.js";import{A as j}from"./AddItemButton-CD0U_4gd.js";import{T as w,g as S}from"./Instance-Co8OMzcE.js";import{d as f}from"./ColumnRenderers-CwItNORh.js";import{a as T,e as n,A as u,U as o,M as P}from"./index-CDdQlqFV.js";import{a as B,u as U,b as C}from"./UseForm-BimrM1zK.js";import{u as M,R,a as q,I as E}from"./InvenTreeTable-D26a1r6-.js";function D(e){var r;let t=((r=e==null?void 0:e.part_detail)==null?void 0:r.pack_quantity_native)??1;return e.price/t}function F(){return[{accessor:"supplier",title:s._({id:"PYTEl0"}),sortable:!0,switchable:!0,render:e=>{var t,i,r,l;return a.jsxs(x,{gap:"xs",wrap:"nowrap",children:[a.jsx(w,{src:((t=e==null?void 0:e.supplier_detail)==null?void 0:t.thumbnail)??((i=e==null?void 0:e.supplier_detail)==null?void 0:i.image),alt:(r=e==null?void 0:e.supplier_detail)==null?void 0:r.name,size:24}),a.jsx(c,{children:(l=e.supplier_detail)==null?void 0:l.name})]})}},{accessor:"part_detail.SKU",title:s._({id:"y90mqQ"}),ordering:"SKU",sortable:!0,switchable:!1,render:e=>a.jsx(A,{href:S(P.supplierpart,e.part_detail.pk,!0),children:e.part_detail.SKU})},{accessor:"quantity",title:s._({id:"VbWX2u"}),sortable:!0,switchable:!1},{accessor:"price",title:s._({id:"kk1/TT"}),render:e=>f(e.price,{currency:e.price_currency}),sortable:!0,switchable:!1},{accessor:"unit_price",ordering:"price",title:s._({id:"vWelsN"}),sortable:!0,switchable:!0,render:e=>{var r;let t=(r=e.part_detail)==null?void 0:r.pack_quantity,i=f(D(e),{currency:e.price_currency});return a.jsxs(x,{justify:"space-between",gap:"xs",grow:!0,children:[a.jsx(c,{children:i}),t&&a.jsxs(c,{size:"xs",children:["[",t,"]"]})]})}}]}function L({supplierPartId:e}){const t=M("supplierpricebreaks"),i=T(),r=p.useMemo(()=>F(),[]),l=p.useMemo(()=>({part:{hidden:!1,disabled:!0},quantity:{},price:{},price_currency:{}}),[]),[_,d]=p.useState(0),m=B({url:n(u.supplier_part_pricing_list),title:s._({id:"SXdWxL"}),fields:l,initialData:{part:e},table:t}),h=U({url:n(u.supplier_part_pricing_list),pk:_,title:s._({id:"l3gpbq"}),fields:l,table:t}),b=C({url:n(u.supplier_part_pricing_list),pk:_,title:s._({id:"ynVh1t"}),table:t}),g=p.useMemo(()=>[a.jsx(j,{tooltip:s._({id:"SXdWxL"}),onClick:()=>{m.open()},hidden:!i.hasAddRole(o.part)})],[i]),y=p.useCallback(k=>[R({hidden:!i.hasChangeRole(o.purchase_order),onClick:()=>{d(k.pk),h.open()}}),q({hidden:!i.hasDeleteRole(o.purchase_order),onClick:()=>{d(k.pk),b.open()}})],[i]);return a.jsxs(a.Fragment,{children:[m.modal,h.modal,b.modal,a.jsx(E,{url:n(u.supplier_part_pricing_list),columns:r,tableState:t,props:{params:{part:e,part_detail:!0,supplier_detail:!0},tableActions:g,rowActions:y}})]})}export{L as S,F as a,D as c};
