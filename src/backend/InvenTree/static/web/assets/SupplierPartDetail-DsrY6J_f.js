import{r as o,j as a,bK as d,i as t,cY as _,z as B,H as P,P as Y,as as q,ad as Q,aL as G,S as X}from"./vendor-B0vSnHFf.js";import{A as z}from"./AdminButton-Cl1ixKQi.js";import{I as J,D as m,a as O}from"./InstanceDetail-Cejekc8J.js";import{D as W}from"./DetailsBadge-oD3BwL5r.js";import{D as $,N as L}from"./NotesEditor-DCyldUZp.js";import{B as V,A as Z,d as H,E as ee,D as ae}from"./InvenTreeTable-D26a1r6-.js";import{P as te}from"./PageDetail-B4PsctWo.js";import{P as ie}from"./PanelGroup-DRVQKYn0.js";import{a as re,A as l,M as r,U as n,e as se}from"./index-CDdQlqFV.js";import{a as ne}from"./CompanyForms-Dy3Tzhcs.js";import{g as oe}from"./Instance-Co8OMzcE.js";import{u as le,b as pe,a as de}from"./UseForm-BimrM1zK.js";import{u as me}from"./UseInstance-Bcp_oSAZ.js";import{P as ce}from"./PurchaseOrderTable-Dc7Vs_m9.js";import{S as ue}from"./SupplierPriceBreakTable-nb3QwUdM.js";import{S as _e}from"./StockItemTable-Cop_NVCl.js";import{d as he,u as ke}from"./DesktopAppView-CofLSp00.js";import"./ActionButton-Br0cBRLA.js";import"./BaseContext-DSwOqL9e.js";import"./YesNoButton-1B57tnbm.js";import"./ColumnRenderers-CwItNORh.js";import"./StylishText-CrpvZzAV.js";import"./GenericErrorPage-BifXQa91.js";import"./NotFound-DXIcBWRy.js";import"./PermissionDenied-Cl_T9Vqt.js";import"./Boundary-CysPC9mI.js";import"./AddItemButton-CD0U_4gd.js";import"./PurchaseOrderForms-VnPQAsDv.js";import"./UseGenerator-C7bjPlPb.js";import"./UseFilter-Blar5lCV.js";import"./StockForms-DLBgZVBa.js";function We(){var x,b;const{id:A}=he(),s=re(),E=ke(),{instance:e,instanceQuery:c,refreshInstance:C,requestStatus:M}=me({endpoint:l.supplier_part_list,pk:A,hasPrimaryKey:!0,params:{part_detail:!0,supplier_detail:!0}}),F=o.useMemo(()=>{var g,y,j,D,I,S;if(c.isFetching)return a.jsx(d,{});let i=e??{};i.manufacturer=(g=i.manufacturer_detail)==null?void 0:g.pk,i.MPN=(y=i.manufacturer_part_detail)==null?void 0:y.MPN,i.manufacturer_part=(j=i.manufacturer_part_detail)==null?void 0:j.pk;let p=[{type:"link",name:"part",label:t._({id:"GNd5ad"}),model:r.part,hidden:!e.part},{type:"string",name:"description",label:t._({id:"Nu4oKW"}),copy:!0},{type:"link",external:!0,name:"link",label:t._({id:"0R4wMK"}),copy:!0,hidden:!e.link},{type:"string",name:"note",label:t._({id:"KiJn9B"}),copy:!0,hidden:!e.note}],v=[{type:"link",name:"supplier",label:t._({id:"PYTEl0"}),model:r.company,icon:"suppliers",hidden:!e.supplier},{type:"string",name:"SKU",label:t._({id:"y90mqQ"}),copy:!0,icon:"reference"},{type:"link",name:"manufacturer",label:t._({id:"+m9/3S"}),model:r.company,icon:"manufacturers",hidden:!i.manufacturer},{type:"link",name:"manufacturer_part",model_field:"MPN",label:t._({id:"ZCCuT2"}),model:r.manufacturerpart,copy:!0,icon:"reference",hidden:!i.manufacturer_part}],w=[{type:"string",name:"packaging",label:t._({id:"pD/Ew0"}),copy:!0,hidden:!i.packaging},{type:"string",name:"pack_quantity",label:t._({id:"J9LTXQ"}),copy:!0,hidden:!i.pack_quantity,icon:"packages"}],K=[{type:"string",name:"available",label:t._({id:"WrzEdW"}),copy:!0,icon:"packages"},{type:"string",name:"availability_updated",label:t._({id:"Qeo1xd"}),copy:!0,hidden:!i.availability_updated,icon:"calendar"}];return a.jsxs(J,{children:[a.jsxs(_,{children:[a.jsx(_.Col,{span:4,children:a.jsx($,{appRole:n.part,src:(D=e==null?void 0:e.part_detail)==null?void 0:D.image,apiPath:se(l.part_list,(I=e==null?void 0:e.part_detail)==null?void 0:I.pk),pk:(S=e==null?void 0:e.part_detail)==null?void 0:S.pk})}),a.jsx(_.Col,{span:8,children:a.jsx(m,{title:t._({id:"nne72x"}),fields:p,item:i})})]}),a.jsx(m,{title:t._({id:"PYTEl0"}),fields:v,item:i}),a.jsx(m,{title:t._({id:"pD/Ew0"}),fields:w,item:i}),a.jsx(m,{title:t._({id:"lXkUEV"}),fields:K,item:i})]})},[e,c.isFetching]),T=o.useMemo(()=>[{name:"details",label:t._({id:"F+J5VC"}),icon:a.jsx(B,{}),content:F},{name:"stock",label:t._({id:"b447qM"}),icon:a.jsx(P,{}),content:e!=null&&e.pk?a.jsx(_e,{tableName:"supplier-stock",allowAdd:!1,params:{supplier_part:e.pk}}):a.jsx(d,{})},{name:"purchaseorders",label:t._({id:"85Yvr2"}),icon:a.jsx(Y,{}),content:e!=null&&e.pk?a.jsx(ce,{supplierPartId:e.pk}):a.jsx(d,{})},{name:"pricing",label:t._({id:"OQkyYP"}),icon:a.jsx(q,{}),content:e!=null&&e.pk?a.jsx(ue,{supplierPartId:e.pk}):a.jsx(d,{})},{name:"notes",label:t._({id:"1DBGsz"}),icon:a.jsx(Q,{}),content:a.jsx(L,{modelType:r.supplierpart,modelId:e.pk,editable:s.hasChangeRole(n.purchase_order)})}],[e]),N=o.useMemo(()=>[a.jsx(z,{model:r.supplierpart,pk:e.pk}),a.jsx(V,{model:r.supplierpart,pk:e.pk,hash:e.barcode_hash,perm:s.hasChangeRole(n.purchase_order)}),a.jsx(Z,{tooltip:t._({id:"XIY/fv"}),icon:a.jsx(G,{}),actions:[H({hidden:!s.hasAddRole(n.purchase_order),onClick:()=>f.open()}),ee({hidden:!s.hasChangeRole(n.purchase_order),onClick:()=>u.open()}),ae({hidden:!s.hasDeleteRole(n.purchase_order),onClick:()=>k.open()})]})],[s,e]),h=ne(),u=le({url:l.supplier_part_list,pk:e==null?void 0:e.pk,title:t._({id:"qZstuw"}),fields:h,onFormSuccess:C}),k=pe({url:l.supplier_part_list,pk:e==null?void 0:e.pk,title:t._({id:"9Qoago"}),onFormSuccess:()=>{E(oe(r.part,e.part))}}),f=de({url:l.supplier_part_list,title:t._({id:"EREF+D"}),fields:h,initialData:{...e},follow:!0,modelType:r.supplierpart}),R=o.useMemo(()=>{var i,p;return[{name:t._({id:"UOTpFa"}),url:"/purchasing/"},{name:((i=e==null?void 0:e.supplier_detail)==null?void 0:i.name)??t._({id:"PYTEl0"}),url:`/purchasing/supplier/${((p=e==null?void 0:e.supplier_detail)==null?void 0:p.pk)??""}`}]},[e]),U=o.useMemo(()=>[a.jsx(W,{label:t._({id:"NoNwIX"}),color:"red",visible:e.active==!1})],[e]);return a.jsxs(a.Fragment,{children:[k.modal,f.modal,u.modal,a.jsx(O,{status:M,loading:c.isFetching,children:a.jsxs(X,{gap:"xs",children:[a.jsx(te,{title:t._({id:"nne72x"}),subtitle:`${e.SKU} - ${(x=e==null?void 0:e.part_detail)==null?void 0:x.name}`,breadcrumbs:R,badges:U,actions:N,imageUrl:(b=e==null?void 0:e.part_detail)==null?void 0:b.thumbnail,editAction:u.open,editEnabled:s.hasChangePermission(r.supplierpart)}),a.jsx(ie,{pageKey:"supplierpart",panels:T})]})})]})}export{We as default};
