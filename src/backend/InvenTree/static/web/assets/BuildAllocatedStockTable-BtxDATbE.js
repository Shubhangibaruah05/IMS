import{r as s,i as t,j as u}from"./vendor-B0vSnHFf.js";import{a as D,M as k,A as n,U as o,e as M}from"./index-CDdQlqFV.js";import{u as T,b as y}from"./UseForm-BimrM1zK.js";import{u as F,R as U,a as j,I as E}from"./InvenTreeTable-D26a1r6-.js";import{R as g,S as v,a as I,i as q}from"./ColumnRenderers-CwItNORh.js";function W({buildId:h,stockId:f,partId:C,showBuildInfo:i,showPartInfo:r,allowEdit:c,modelTarget:R,modelField:A}){const a=D(),d=F("buildallocatedstock"),x=s.useMemo(()=>[{name:"tracked",label:t._({id:"ML+087"}),description:t._({id:"mVVw+/"})}],[]),S=s.useMemo(()=>[g({accessor:"build_detail.reference",title:t._({id:"YxwWvi"}),switchable:!1,hidden:i!=!0}),{accessor:"build_detail.title",title:t._({id:"Nu4oKW"}),hidden:i!=!0},v({accessor:"build_detail.status",model:k.build,title:t._({id:"acIJ41"}),hidden:i!=!0}),{accessor:"part",hidden:!r,title:t._({id:"vgP+9p"}),sortable:!0,switchable:!1,render:e=>I(e.part_detail)},{hidden:!r,accessor:"bom_reference",title:t._({id:"N2C89m"}),sortable:!0,switchable:!0},{accessor:"quantity",title:t._({id:"Tk6w1l"}),sortable:!0,switchable:!1},{accessor:"serial",title:t._({id:"AXeJt4"}),sortable:!1,switchable:!0,render:e=>{var l;return(l=e==null?void 0:e.stock_item_detail)==null?void 0:l.serial}},{accessor:"batch",title:t._({id:"Vea6Aj"}),sortable:!1,switchable:!0,render:e=>{var l;return(l=e==null?void 0:e.stock_item_detail)==null?void 0:l.batch}},{accessor:"available",title:t._({id:"I8CEek"}),render:e=>{var l;return(l=e==null?void 0:e.stock_item_detail)==null?void 0:l.quantity}},q({accessor:"location_detail",switchable:!0,sortable:!0}),{accessor:"install_into",title:t._({id:"gILim+"}),sortable:!0},{accessor:"sku",title:t._({id:"nne72x"}),render:e=>{var l;return(l=e==null?void 0:e.supplier_part_detail)==null?void 0:l.SKU},sortable:!0}],[]),[b,m]=s.useState(0),_=T({pk:b,url:n.build_item_list,title:t._({id:"yFx3XU"}),fields:{quantity:{}},table:d}),p=y({pk:b,url:n.build_item_list,title:t._({id:"0tK2en"}),table:d}),w=s.useCallback(e=>[U({hidden:!a.hasChangeRole(o.build),onClick:()=>{m(e.pk),_.open()}}),j({hidden:!a.hasDeleteRole(o.build),onClick:()=>{m(e.pk),p.open()}})],[a]);return u.jsxs(u.Fragment,{children:[_.modal,p.modal,u.jsx(E,{tableState:d,url:M(n.build_item_list),columns:S,props:{params:{build:h,part:C,stock_item:f,build_detail:i??!1,part_detail:r??!1,location_detail:!0,stock_detail:!0,supplier_detail:!0},enableBulkDelete:c&&a.hasDeleteRole(o.build),enableDownload:!0,enableSelection:c&&a.hasDeleteRole(o.build),rowActions:w,tableFilters:x,modelField:A??"stock_item",modelType:R??k.stockitem}})]})}export{W as B};
