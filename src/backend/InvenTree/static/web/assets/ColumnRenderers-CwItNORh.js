import{r as h,j as t,S as x,m,e5 as j,i,bT as d,G as f,z as C,b8 as D,b5 as _,d as w,aw as y,bK as S,A as I}from"./vendor-B0vSnHFf.js";import{Y as N}from"./YesNoButton-1B57tnbm.js";import{T,c as P,d as k,e as M}from"./Instance-Co8OMzcE.js";import{d as E}from"./UseForm-BimrM1zK.js";import{s as F,i as R,r as u}from"./index-CDdQlqFV.js";import{I as A}from"./BaseContext-DSwOqL9e.js";function L(e){const r=h.useMemo(()=>{let n=e.maximum??100,s=Math.max(e.value,0);return Math.min(100,s/n*100)},[e]);return t.jsxs(x,{gap:2,style:{flexGrow:1,minWidth:"100px"},children:[e.progressLabel&&t.jsxs(m,{ta:"center",size:"xs",children:[e.value," / ",e.maximum]}),t.jsx(j,{value:r,color:r<100?"orange":r>100?"blue":"green",size:e.size??"md",radius:"sm"})]})}function J(e,r={}){let n=r.locale||navigator.language||"en-US";return e==null?e:new Intl.NumberFormat(n,{style:"decimal",maximumFractionDigits:r.digits??6,minimumFractionDigits:r.minDigits??0}).format(e)}function a(e,r={}){if(e==null||e==null||(e=parseFloat(e.toString()),isNaN(e)||!isFinite(e)))return null;e*=r.multiplier??1;const n=F.getState().lookup;let s=r.digits||n.PRICING_DECIMAL_PLACES||6;s=Number(s);let l=r.minDigits||n.PRICING_DECIMAL_PLACES_MIN||0;l=Number(l);let o=r.currency||n.INVENTREE_DEFAULT_CURRENCY||"USD",c=r.locale||navigator.language||"en-US";return new Intl.NumberFormat(c,{style:"currency",currency:o,maximumFractionDigits:Math.max(l,s),minimumFractionDigits:Math.min(l,s)}).format(e)}function O(e,r,n={}){return e==null&&r==null?"-":e==null?a(r,n):r==null||e==r?a(e,n):`${a(e,n)} - ${a(r,n)}`}function Q(e){const r=["B","KB","MB","GB"];let n=0;for(;e>1024&&n<r.length;)e/=1024,n++;return`${e.toFixed(2)} ${r[n]}`}function v(e,r={}){if(!e)return"-";let s=R.getState().lookup.DATE_DISPLAY_FORMAT||"YYYY-MM-DD";r.showTime&&(s+=" HH:mm",r.showSeconds&&(s+=":ss"));const l=E(e);return l.isValid()?l.format(s):e}function B({value:e,extra:r,title:n,icon:s,iconColor:l}){const o=h.useMemo(()=>Array.isArray(r)?r.length==0?null:t.jsx(x,{gap:"xs",children:r.map((c,b)=>t.jsx("div",{children:c},i._({id:"o3Zq/u",values:{idx:b}})))}):r,[r]);return o?t.jsxs(d,{withinPortal:!0,closeDelay:20,openDelay:250,children:[t.jsx(d.Target,{children:t.jsxs(f,{gap:"xs",justify:"space-between",wrap:"nowrap",children:[e,t.jsx(A,{icon:s??"info",iconProps:{size:16,color:l??"blue"}})]})}),t.jsx(d.Dropdown,{children:t.jsxs(x,{gap:"xs",children:[t.jsxs(f,{gap:"xs",justify:"left",children:[t.jsx(C,{size:"16",color:"blue"}),t.jsx(m,{fw:"bold",children:n})]}),t.jsx(D,{}),o]})})]}):e}function G({projectCode:e}){return e?t.jsx(B,{value:e==null?void 0:e.code,title:i._({id:"Sdfr6G"}),extra:e&&t.jsx(m,{children:e==null?void 0:e.description},"project-code")}):"-"}function W(e,r){return e?t.jsxs(f,{justify:"space-between",wrap:"nowrap",children:[t.jsx(T,{src:(e==null?void 0:e.thumbnail)??(e==null?void 0:e.image),text:r?e==null?void 0:e.full_name:e==null?void 0:e.name}),t.jsxs(f,{justify:"flex-end",wrap:"nowrap",gap:"xs",children:[(e==null?void 0:e.active)==!1&&t.jsx(_,{label:i._({id:"TgUP31"}),children:t.jsx(w,{color:"red",size:16})}),(e==null?void 0:e.locked)&&t.jsx(_,{label:i._({id:"Fe2KEj"}),children:t.jsx(y,{size:16})})]})]}):t.jsx(S,{})}function q(e){return{accessor:"location",title:i._({id:"wJijgU"}),sortable:!0,ordering:"location",render:r=>{let n=u(r,e.accessor??"");return n?t.jsx(m,{children:n.name}):t.jsx(m,{style:{fontStyle:"italic"},children:i._({id:"47h3Cb"})})},...e}}function X(e){return{sortable:!0,switchable:!0,render:r=>t.jsx(N,{value:u(r,e.accessor??"")}),...e}}function V(e){return{accessor:"description",title:i._({id:"Nu4oKW"}),sortable:!1,switchable:!0,...e}}function p(e){return{accessor:"link",sortable:!1,render:r=>{let n=u(r,e.accessor??"link");return n?t.jsx(I,{href:n,target:"_blank",rel:"noreferrer noopener",onClick:s=>{P(s),window.open(n,"_blank","noopener,noreferrer")},children:n}):"-"},...e}}function ee(e){return{accessor:"reference",title:i._({id:"N2C89m"}),sortable:!0,switchable:!0,...e}}function re(e){return{accessor:"note",sortable:!1,title:i._({id:"KiJn9B"}),render:r=>r.note??r.notes,...e}}function ne(){return{accessor:"line_items",sortable:!0,render:e=>t.jsx(L,{progressLabel:!0,value:e.completed_lines,maximum:e.line_items})}}function te(e){return{accessor:"project_code",sortable:!0,render:r=>t.jsx(G,{projectCode:r.project_code_detail}),...e}}function se({model:e,sortable:r,accessor:n,title:s,hidden:l}){return{accessor:n??"status",sortable:r??!0,title:s,hidden:l,render:k(e,n??"status_custom_key")}}function ie(e){return{accessor:"responsible",sortable:!0,switchable:!0,render:r=>r.responsible&&M({instance:r.responsible_detail}),...e}}function g(e){return{accessor:"date",sortable:!0,title:i._({id:"mYGY3B"}),switchable:!0,render:r=>v(u(r,e.accessor??"date")),...e}}function le(e){return g({accessor:"target_date",title:i._({id:"ZmykKo"}),...e})}function oe(e){return g({accessor:"creation_date",title:i._({id:"FNcMGM"}),...e})}function ae(e){return g({accessor:"shipment_date",title:i._({id:"MFQxyA"}),...e})}function Y({accessor:e,title:r,currency:n,currency_accessor:s,sortable:l}){return{accessor:e,title:r??i._({id:"Q2lUR2"}),sortable:l??!0,render:o=>{let c=s??`${e}_currency`;return a(u(o,e),{currency:n??u(o,c)})}}}function ue(){return Y({accessor:"total_price",title:i._({id:"KyZVKD"})})}export{X as B,oe as C,V as D,p as L,re as N,L as P,ee as R,se as S,le as T,W as a,ne as b,te as c,a as d,ie as e,Q as f,B as g,ae as h,q as i,g as j,O as k,J as l,v as m,Y as n,ue as o};
