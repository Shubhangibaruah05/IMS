import{bo as lt,bp as ct,bq as dt,br as ut,bs as O,bt as P,j as e,bu as ht,bv as ae,B as ee,r as m,bm as Te,bw as pt,bx as xt,by as gt,bz as mt,w as ft,bA as jt,bB as St,bC as yt,x as Oe,bD as bt,bE as _t,i as d,bF as kt,aD as Q,bG as vt,b6 as I,A as te,l as le,G as w,aZ as wt,bH as Ct,bI as Pe,bJ as k,m as L,bK as ye,bL as Et,bM as At,bN as He,bO as It,bP as Rt,bQ as Nt,bR as Lt,bS as Me,bT as me,bU as Dt,b8 as ke,q as zt,bV as ve,u as Vt,bW as Fe,T as K,bb as M,b7 as we,b5 as fe,bX as Ne,bY as Tt,S as se,bd as be,C as Ue,L as We,bZ as Ot,b_ as Pt,b$ as re,c0 as Ht,c1 as Mt,c2 as Le,c3 as Ft,c4 as Ut,ag as Wt,c5 as je,c6 as Qt,c7 as qt,be as Se}from"./vendor-B0vSnHFf.js";import{u as Ce,a as F,v as H,h as Bt,c as Zt,d as G,e as $,A as Y,i as Kt,M as N,U as C}from"./index-CDdQlqFV.js";import{d as Gt,a as $t,s as Yt,l as Xt,f as Jt,n as es,b as ts,c as De}from"./links-CGjHD3g5.js";import{T as x,o as ss}from"./BaseContext-DSwOqL9e.js";import{l as ns,a as os,b as rs,c as is,s as as,h as ls,n as cs,d as Qe,S as ds,e as us,f as hs,t as ps,g as xs,i as gs}from"./StylishText-CrpvZzAV.js";import{B as qe}from"./Boundary-CysPC9mI.js";import{N as ms,u as oe,L as X,a as fs,b as Be,O as js,c as Ss}from"./DesktopAppView-CofLSp00.js";import{M as Ze,R as ys,n as Ke}from"./Instance-Co8OMzcE.js";import{D as Ge}from"./DocTooltip-Dj0GZMgK.js";import{P as bs}from"./Placeholder-B-jcCRRL.js";const _s=()=>ct({opened:!1,empty:!1,selected:-1,listId:"",query:"",registeredActions:new Set}),ks=t=>lt(t);function q(t,s){const n=s.getState();s.setState({...n,...t(s.getState())})}function $e(t){q(()=>({opened:!0,selected:-1}),t)}function Ye(t){q(()=>({opened:!1}),t)}function Xe(t){q(s=>({opened:!s.opened}),t)}function Je(t,s){s.updateState(n=>({...n,selected:t}))}function vs(t,s){s.updateState(n=>({...n,listId:t}))}function ie(t,s=document){const n=s.querySelector(t);if(n)return n;const o=s instanceof ShadowRoot?s.host.children:s.children;for(let i=0;i<o.length;i+=1){const a=o[i];if(a.shadowRoot){const l=ie(t,a.shadowRoot);if(l)return l}const u=ie(t,a);if(u)return u}return null}function ce(t,s){var S,r;const n=s.getState(),o=n.listId?ie(`#${n.listId}`):null,i=o==null?void 0:o.querySelector("[data-selected]"),a=(o==null?void 0:o.querySelectorAll("[data-action]"))??[],u=t===-1?a.length-1:t===a.length?0:t,l=dt(u,0,a.length-1);return i==null||i.removeAttribute("data-selected"),(S=a[l])==null||S.scrollIntoView({block:"nearest"}),(r=a[l])==null||r.setAttribute("data-selected","true"),Je(l,s),l}function ws(t){return ce(t.getState().selected+1,t)}function Cs(t){return ce(t.getState().selected-1,t)}function Es(t){const s=t.getState(),n=ie(`#${s.listId} [data-selected]`);n==null||n.click()}function As(t,s){const n=s.getState();return n.registeredActions.add(t),()=>{n.registeredActions.delete(t)}}function Is(t,s){q(()=>({query:t}),s),Promise.resolve().then(()=>{ce(0,s),q(n=>({empty:n.query.trim().length>0&&n.registeredActions.size===0||!1}),s)})}function Rs({clearQuery:t},s){s.updateState(n=>({...n,selected:-1,query:t?"":n.query,empty:t?!1:n.empty}))}const V={open:$e,close:Ye,toggle:Xe,updateState:q,setSelectedAction:Je,setListId:vs,selectAction:ce,selectNextAction:ws,selectPreviousAction:Cs,triggerSelectedAction:Es,registerAction:As,setQuery:Is,clearSpotlightState:Rs};function et(){const t=_s();return[t,{open:()=>$e(t),close:()=>Ye(t),toggle:()=>Xe(t)}]}const[tt,Ee]=et();function st(t){const s=t;return s.group!==void 0&&Array.isArray(s.actions)}function Ns(t){return Array.isArray(t)?t.map(s=>s.trim()).join(",").toLowerCase().trim():typeof t=="string"?t.toLowerCase().trim():""}function Ls(t){return t.reduce((s,n)=>"actions"in n?[...s,...n.actions.map(o=>({...o,group:n.group}))]:[...s,n],[])}function Ds(t){const s={},n=[];return t.forEach(o=>{o.group?(s[o.group]||(s[o.group]={pushed:!1,data:{group:o.group,actions:[]}}),s[o.group].data.actions.push(o),s[o.group].pushed||(s[o.group].pushed=!0,n.push(s[o.group].data))):n.push(o)}),n}const zs=(t,s)=>{const n=t.trim().toLowerCase(),o=[[],[]];return Ls(s).forEach(a=>{var u,l;(u=a.label)!=null&&u.toLowerCase().includes(n)?o[0].push(a):((l=a.description)!=null&&l.toLowerCase().includes(n)||Ns(a.keywords).includes(n))&&o[1].push(a)}),Ds(o.flat())};function nt(t,s){if(!Array.isArray(t))return[];let n=0;return t.reduce((o,i)=>{if(n>=s)return o;if(st(i)){const a=nt(i.actions,s-n);o.push({group:i.group,actions:a}),n+=a.length}else o.push(i),n+=1;return o},[])}const[Vs,B]=ut("Spotlight component was not found in tree");var Ts={root:"m_d2b315db",content:"m_3cd250e0",body:"m_d2abce9b",search:"m_f366a061",actionsList:"m_6e463822",action:"m_d49bb8ef",actionBody:"m_3d475731",actionSection:"m_832642f6",actionLabel:"m_6c2a1345",actionDescription:"m_a6d9d78d",empty:"m_82f78f74",footer:"m_ddcaf054",actionsGroup:"m_5a3e5f7b"};const T=Ts,Os={dimmedSections:!0,highlightQuery:!1},ne=O((t,s)=>{const n=P("SpotlightAction",Os,t),{className:o,style:i,classNames:a,styles:u,id:l,description:S,label:r,leftSection:c,rightSection:_,children:j,dimmedSections:b,highlightQuery:h,highlightColor:y,closeSpotlightOnTrigger:A,onClick:v,onMouseDown:D,keywords:U,vars:W,...g}=n,p=B(),f={classNames:a,styles:u},R=h&&typeof r=="string"?e.jsx(ht,{component:"span",highlight:p.query,color:y,...p.getStyles("actionLabel",f),children:r}):e.jsx("span",{...p.getStyles("actionLabel",f),children:r});return e.jsx(ae,{ref:s,"data-action":!0,...p.getStyles("action",{className:o,style:i,...f}),...g,onMouseDown:z=>{z.preventDefault(),D==null||D(z)},onClick:z=>{v==null||v(z),(A??p.closeOnActionTrigger)&&V.close(p.store)},tabIndex:-1,children:j||e.jsxs(e.Fragment,{children:[c&&e.jsx(ee,{component:"span",mod:{position:"left",dimmed:b},...p.getStyles("actionSection",f),children:c}),e.jsxs("span",{...p.getStyles("actionBody",f),children:[R,e.jsx("span",{...p.getStyles("actionDescription",f),children:S})]}),_&&e.jsx(ee,{component:"span",mod:{position:"right",dimmed:b},...p.getStyles("actionSection",f),children:_})]})})});ne.classes=T;ne.displayName="@mantine/spotlight/SpotlightAction";const Ps={},de=O((t,s)=>{const{className:n,style:o,styles:i,classNames:a,label:u,children:l,...S}=P("SpotlightActionsGroup",Ps,t),r=B();return e.jsx(ee,{...r.getStyles("actionsGroup",{className:n,style:o,classNames:a,styles:i}),ref:s,...S,__vars:{"--spotlight-label":`'${u}'`},children:l})});de.classes=T;de.displayName="@mantine/core/SpotlightActionsGroup";const Hs={},ue=O((t,s)=>{const{className:n,style:o,id:i,children:a,vars:u,classNames:l,styles:S,...r}=P("SpotlightActionsList",Hs,t),c=B(),_=`mantine-${m.useId().replace(/:/g,"")}`,j=i||_;return m.useEffect(()=>(V.setListId(j,c.store),()=>V.setListId("",c.store)),[]),e.jsx(Te.Autosize,{...c.getStyles("actionsList",{className:n,style:o,classNames:l,styles:S}),ref:s,type:"scroll",scrollbarSize:"var(--spotlight-actions-list-padding)",offsetScrollbars:"y",id:j,...r,children:a})});ue.classes=T;ue.displayName="@mantine/spotlight/SpotlightActionsList";const Ms={},he=O((t,s)=>{const{className:n,style:o,classNames:i,styles:a,...u}=P("SpotlightEmpty",Ms,t),l=B();return e.jsx(ee,{ref:s,...l.getStyles("empty",{classNames:i,styles:a,className:n,style:o}),...u})});he.classes=T;he.displayName="@mantine/spotlight/SpotlightEmpty";const Fs={},Ae=O((t,s)=>{const{className:n,style:o,classNames:i,styles:a,...u}=P("SpotlightFooter",Fs,t),l=B();return e.jsx(ee,{ref:s,...l.getStyles("footer",{className:n,classNames:i,style:o,styles:a}),...u})});Ae.classes=T;Ae.displayName="@mantine/spotlight/SpotlightFooter";function Us(t,s){if(!t)return[];const n=()=>V.open(s);return Array.isArray(t)?t.map(o=>[o,n]):[[t,n]]}const Ws={size:600,yOffset:80,zIndex:Oe("max"),overlayProps:{backgroundOpacity:.35,blur:7},transitionProps:{duration:200,transition:"pop"},store:tt,clearQueryOnClose:!0,closeOnActionTrigger:!0,shortcut:"mod + K",maxHeight:400,scrollable:!1},pe=O((t,s)=>{const n=P("SpotlightRoot",Ws,t),{classNames:o,className:i,style:a,styles:u,unstyled:l,vars:S,store:r,children:c,query:_,onQueryChange:j,transitionProps:b,clearQueryOnClose:h,shortcut:y,tagsToIgnore:A,triggerOnContentEditable:v,disabled:D,onSpotlightOpen:U,onSpotlightClose:W,forceOpened:g,closeOnActionTrigger:p,maxHeight:f,scrollable:R,...z}=n,Ie=pt(),{opened:ge,query:rt}=ks(r),it=_||rt,Re=Z=>{j==null||j(Z),V.setQuery(Z,r)},at=xt({name:"Spotlight",classes:T,props:n,className:i,style:a,classNames:o,styles:u,unstyled:l});return gt(Us(y,r),A,v),mt(()=>{ge?U==null||U():W==null||W()},[ge]),D?null:e.jsx(Vs,{value:{getStyles:at,query:it,setQuery:Re,store:r,closeOnActionTrigger:p},children:e.jsx(ft,{ref:s,...z,withCloseButton:!1,opened:ge||!!g,padding:0,onClose:()=>V.close(r),className:i,style:a,classNames:jt({theme:Ie,classNames:[T,o],props:n,stylesCtx:void 0}),styles:St({theme:Ie,styles:u,props:n,stylesCtx:void 0}),transitionProps:{...b,onExited:()=>{var Z;h&&Re(""),V.clearSpotlightState({clearQuery:h},r),(Z=b==null?void 0:b.onExited)==null||Z.call(b)}},__vars:{"--spotlight-max-height":R?yt(f):void 0},__staticSelector:"Spotlight","data-scrollable":R||void 0,children:c})})});pe.classes=T;pe.displayName="@mantine/spotlight/SpotlightRoot";const Qs={size:"lg"},xe=O((t,s)=>{const{classNames:n,styles:o,onKeyDown:i,onChange:a,vars:u,value:l,...S}=P("SpotlightSearch",Qs,t),r=B(),c=r.getStyles("search"),[_,j]=m.useState(!1),b=h=>{i==null||i(h),!_&&(h.nativeEvent.code==="ArrowDown"&&(h.preventDefault(),V.selectNextAction(r.store)),h.nativeEvent.code==="ArrowUp"&&(h.preventDefault(),V.selectPreviousAction(r.store)),(h.nativeEvent.code==="Enter"||h.nativeEvent.code==="NumpadEnter")&&(h.preventDefault(),V.triggerSelectedAction(r.store)))};return e.jsx(bt,{ref:s,classNames:[{input:c.className},n],styles:[{input:c.style},o],...S,value:l??r.query,onChange:h=>{r.setQuery(h.currentTarget.value),a==null||a(h)},onKeyDown:b,onCompositionStart:()=>j(!0),onCompositionEnd:()=>j(!1)})});xe.classes=T;xe.displayName="@mantine/spotlight/SpotlightSearch";const qs={size:600,yOffset:80,limit:1/0,zIndex:Oe("max"),overlayProps:{backgroundOpacity:.35,blur:7},transitionProps:{duration:200,transition:"pop"},store:tt,filter:zs,clearQueryOnClose:!0,closeOnActionTrigger:!0,shortcut:"mod + K",highlightQuery:!1},E=O((t,s)=>{const n=P("Spotlight",qs,t),{searchProps:o,filter:i,query:a,onQueryChange:u,actions:l,nothingFound:S,highlightQuery:r,limit:c,..._}=n,[j,b]=_t({value:a,defaultValue:"",finalValue:"",onChange:u}),h=nt(i(j,l),c).map(y=>{if(st(y)){const A=y.actions.map(({id:v,...D})=>e.jsx(ne,{highlightQuery:r,...D},v));return e.jsx(de,{label:y.group,children:A},y.group)}return e.jsx(ne,{highlightQuery:r,...y},y.id)});return e.jsxs(pe,{..._,query:j,onQueryChange:b,ref:s,children:[e.jsx(xe,{...o}),e.jsxs(ue,{children:[h,h.length===0&&S&&e.jsx(he,{children:S})]})]})});E.classes=T;E.displayName="@mantine/spotlight/Spotlight";E.Search=xe;E.ActionsList=ue;E.Action=ne;E.Empty=he;E.ActionsGroup=de;E.Footer=Ae;E.Root=pe;E.open=Ee.open;E.close=Ee.close;E.toggle=Ee.toggle;const J={home:{id:"home",text:e.jsx(x,{id:"i0qMbr"}),link:"/",highlight:!0},profile:{id:"profile",text:e.jsx(x,{id:"T3FM0r"}),link:"/settings/user",doctext:e.jsx(x,{id:"CFYxhi"})},scan:{id:"scan",text:e.jsx(x,{id:"CMQ09J"}),link:"/scan",doctext:e.jsx(x,{id:"PrR19h"}),highlight:!0},dashboard:{id:"dashboard",text:e.jsx(x,{id:"7p5kLi"}),link:"/dashboard"},parts:{id:"parts",text:e.jsx(x,{id:"pmRbKZ"}),link:"/part/"},stock:{id:"stock",text:e.jsx(x,{id:"blbbPS"}),link:"/stock"},build:{id:"build",text:e.jsx(x,{id:"iSiFYa"}),link:"/build/"},purchasing:{id:"purchasing",text:e.jsx(x,{id:"UOTpFa"}),link:"/purchasing/"},sales:{id:"sales",text:e.jsx(x,{id:"mUv9U4"}),link:"/sales/"},"settings-system":{id:"settings-system",text:e.jsx(x,{id:"zNkWa6"}),link:"/settings/system"},"settings-admin":{id:"settings-admin",text:e.jsx(x,{id:"uTLn08"}),link:"/settings/admin"}};function Bs(t){const s=Ce(i=>i.setNavigationOpen),{user:n}=F(),o=[{id:"home",label:d._({id:"i0qMbr"}),description:"Go to the home page",onClick:()=>t(J.home.link),leftSection:e.jsx(kt,{size:"1.2rem"})},{id:"dashboard",label:d._({id:"7p5kLi"}),description:d._({id:"kwda2l"}),onClick:()=>t(J.dashboard.link),leftSection:e.jsx(Q,{size:"1.2rem"})},{id:"documentation",label:d._({id:"TvY/XA"}),description:d._({id:"hqbo9J"}),onClick:()=>window.location.href=Gt.faq,leftSection:e.jsx(Q,{size:"1.2rem"})},{id:"about",label:d._({id:"iDxamh"}),description:d._({id:"gfhzPz"}),onClick:()=>$t(),leftSection:e.jsx(Q,{size:"1.2rem"})},{id:"server-info",label:d._({id:"mHGdhG"}),description:d._({id:"Q5S3DY"}),onClick:()=>Yt(),leftSection:e.jsx(Q,{size:"1.2rem"})},{id:"license-info",label:d._({id:"I/Xnkt"}),description:d._({id:"L23uA9"}),onClick:()=>Xt(),leftSection:e.jsx(Q,{size:"1.2rem"})},{id:"navigation",label:d._({id:"rmlxV1"}),description:d._({id:"xIiHCw"}),onClick:()=>s(!0),leftSection:e.jsx(vt,{size:"1.2rem"})}];return n!=null&&n.is_staff&&o.push({id:"admin-center",label:d._({id:"uTLn08"}),description:d._({id:"txYotp"}),onClick:()=>t(J["settings-admin"].link),leftSection:e.jsx(Q,{size:"1.2rem"})}),o}const Zs="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='400'%3e%3cg%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2.676'%3e%3cpath%20fill='%23ddbc91'%20d='M200%20199.906v193.196l166.305-96.016V103.139Z'/%3e%3cpath%20fill='%23d9b383'%20d='M200%20199.906v193.196L33.695%20297.086V103.139Z'/%3e%3cpath%20fill='%23ddbc91'%20d='M366.305%20103.139%20200%20199.906%2033.695%20103.14%20200%206.899z'/%3e%3cg%20fill='%23f3f4e4'%3e%3cpath%20d='M75.27%20127.109v145.46L200%20344.583l124.73-72.012V127.109L200%20199.684Z'/%3e%3cpath%20d='M324.73%20127.11%20200%20199.684%2075.27%20127.109%20200%2054.93Z'/%3e%3c/g%3e%3cpath%20fill='%23d9dbbc'%20d='M200%2054.929v144.756L75.27%20272.569V127.11z'/%3e%3cpath%20fill='%23eaeccf'%20d='M200%2054.929v144.756l124.73%2072.884V127.11z'/%3e%3cpath%20fill='%2390a8d8'%20d='M200%20199.901V296.5l83.153-48.008v-96.973zm0%200V296.5l-83.153-48.008v-96.973zm83.153-48.383L200%20199.9l-83.153-48.383L200%20103.398Z'/%3e%3c/g%3e%3cg%20fill='%2390a8d8'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%3e%3cpath%20d='M-546.667%20443.959v216.54l186.4-107.618V335.499Zm0%200v216.54l-186.4-107.618V335.499Z'/%3e%3cpath%20d='m-360.266%20335.499-186.4%20108.46-186.401-108.46%20186.4-107.87z'/%3e%3c/g%3e%3cg%20fill='%2390a8d8'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%3e%3cpath%20d='M-546.667%20227.419v216.54l186.4-107.619V118.96Zm0%200v216.54l-186.4-107.619V118.96Z'/%3e%3cpath%20d='m-360.266%20118.959-186.4%20108.46-186.401-108.46%20186.4-107.87z'/%3e%3c/g%3e%3cpath%20fill='%23ddbc91'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M-546.667%2010.879v216.54l186.4-107.619V-97.58Z'/%3e%3cpath%20fill='%23d9b383'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2.676'%20d='M-546.667%2010.879v216.54l-186.4-107.619V-97.58Z'/%3e%3cpath%20fill='%23ddbc91'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='m-360.266-97.581-186.4%20108.46-186.401-108.46%20186.4-107.87z'/%3e%3cg%20fill='%23f3f4e4'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.058'%3e%3cpath%20stroke-width='3'%20d='M-686.466-70.715V92.321l139.798%2080.714%20139.801-80.714V-70.715l-139.8%2081.346z'/%3e%3cpath%20stroke-width='2.999'%20d='m-406.866-70.715-139.8%2081.345-139.801-81.345%20139.8-80.902Z'/%3e%3c/g%3e%3cpath%20fill='%23d9dbbc'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M-546.667-151.617V10.63l-139.8%2081.692V-70.715z'/%3e%3cpath%20fill='%23eaeccf'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='3'%20d='M-546.667-151.617V10.63l139.8%2081.692V-70.715z'/%3e%3cg%20fill='%2390a8d8'%20stroke='%23000'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2.999'%3e%3cpath%20d='M-546.667%2010.873v108.27l93.2-53.81v-108.69zm0%200v108.27l-93.2-53.81v-108.69z'/%3e%3cpath%20d='m-453.466-43.357-93.2%2054.23-93.201-54.23%2093.2-53.935Z'/%3e%3c/g%3e%3cpath%20fill='none'%20d='M-787.948-253.366h482.56v946.733h-482.56z'/%3e%3c/svg%3e",Ks=m.forwardRef((t,s)=>e.jsx("div",{ref:s,...t,children:e.jsx(ms,{to:"/",children:e.jsx(I,{size:28,variant:"transparent",children:e.jsx(ot,{})})})})),ot=()=>e.jsx("img",{src:Zs,alt:d._({id:"DVAy0b"}),height:28});function Gs(){const t=Jt.map(s=>e.jsx(te,{c:"dimmed",href:s.link,onClick:n=>n.preventDefault(),size:"sm",children:s.label},s.key));return e.jsx("div",{className:ns,children:e.jsxs(le,{className:os,size:"100%",children:[e.jsx(Ks,{}),e.jsx(w,{className:rs,children:t})]})})}function $s(){return e.jsx(I,{onClick:()=>ss({modal:"qr",title:d._({id:"XDwkfO"}),innerProps:{}}),variant:"transparent",title:d._({id:"tY4bT4"}),children:e.jsx(wt,{})})}function Ys(){return e.jsx(I,{onClick:()=>pn.open(),title:d._({id:"FcOU0s"}),variant:"transparent",children:e.jsx(Ct,{})})}function Xs(){const t=oe(),[s,n]=F(a=>[a.user,a.username]),{colorScheme:o,toggleColorScheme:i}=Pe();return e.jsxs(k,{width:260,position:"bottom-end",children:[e.jsx(k.Target,{children:e.jsx(ae,{className:is,children:e.jsxs(w,{gap:7,children:[n()?e.jsx(L,{fw:500,size:"sm",style:{lineHeight:1},mr:3,children:n()}):e.jsx(ye,{height:20,width:40,radius:H.radiusDefault}),e.jsx(Et,{})]})})}),e.jsxs(k.Dropdown,{children:[e.jsx(k.Label,{children:e.jsx(x,{id:"Tz0i8g"})}),e.jsx(k.Item,{leftSection:e.jsx(At,{}),component:X,to:"/settings/user",children:e.jsx(x,{id:"T3FM0r"})}),(s==null?void 0:s.is_staff)&&e.jsx(k.Item,{leftSection:e.jsx(He,{}),component:X,to:"/settings/system",children:e.jsx(x,{id:"zNkWa6"})}),e.jsx(k.Item,{onClick:i,leftSection:o==="dark"?e.jsx(It,{}):e.jsx(Rt,{}),c:o==="dark"?H.colors.yellow[4]:H.colors.blue[6],children:e.jsx(x,{id:"4i3x9F"})}),(s==null?void 0:s.is_staff)&&e.jsx(k.Divider,{}),(s==null?void 0:s.is_staff)&&e.jsx(k.Item,{leftSection:e.jsx(Nt,{}),component:X,to:"/settings/admin",children:e.jsx(x,{id:"uTLn08"})}),e.jsx(k.Divider,{}),e.jsx(k.Item,{leftSection:e.jsx(Lt,{}),onClick:()=>{Bt(t)},children:e.jsx(x,{id:"nOhz3x"})})]})]})}function Js({item:t,children:s}){return t.doctext!==void 0?e.jsx(Ge,{text:t.doctext,detail:t==null?void 0:t.docdetail,link:t==null?void 0:t.doclink,docchildren:t==null?void 0:t.docchildren,children:s},t.id):e.jsx(e.Fragment,{children:s})}function _e({links:t,highlighted:s=!1}){const n=t.filter(o=>!s||o.highlight===!0);return e.jsx(Me,{cols:2,spacing:0,children:n.map(o=>e.jsx(Js,{item:o,children:e.jsx(ae,{className:as,component:X,to:o.link,p:0,children:e.jsx(L,{size:"sm",fw:500,children:o.text})})},o.id))})}const en=Object.values(J);function tn({openDrawer:t}){const[s,n]=Ce(l=>[l.hostKey,l.hostList]),[o]=Zt(l=>[l.server.instance]),[i,a]=m.useState(),{colorScheme:u}=Pe();return m.useEffect(()=>{var l;s&&n[s]&&a((l=n[s])==null?void 0:l.name)},[s]),e.jsxs(me,{width:600,openDelay:300,position:"bottom",shadow:"md",withinPortal:!0,children:[e.jsx(me.Target,{children:e.jsx(ae,{onClick:()=>t(),"aria-label":"Homenav",children:e.jsx(ot,{})})}),e.jsxs(me.Dropdown,{style:{overflow:"hidden"},children:[e.jsxs(w,{justify:"space-between",px:"md",children:[e.jsx(I,{onClick:t,onMouseOver:t,title:d._({id:"rmlxV1"}),variant:"default",children:e.jsx(Dt,{})}),e.jsxs(w,{gap:"xs",children:[i||e.jsx(ye,{height:20,width:40,radius:H.radiusDefault})," ","|"," ",o||e.jsx(ye,{height:20,width:40,radius:H.radiusDefault})]}),e.jsx(te,{href:"#",fz:"xs",onClick:t,children:e.jsx(x,{id:"N6Pxr9"})})]}),e.jsx(ke,{my:"sm",mx:"-md",color:u==="dark"?H.colors.dark[5]:H.colors.gray[1]}),e.jsx(_e,{links:en,highlighted:!0}),e.jsx("div",{className:ls,children:e.jsxs(w,{justify:"space-between",children:[e.jsxs("div",{children:[e.jsx(L,{fw:500,fz:"sm",children:e.jsx(x,{id:"ZDIydz"})}),e.jsx(L,{size:"xs",color:"dimmed",children:e.jsx(x,{id:"BQDL+H"})})]}),e.jsx(zt,{variant:"default",children:e.jsx(x,{id:"ZDIydz"})})]})})]})]})}function ze({links:t}){const s=({link:n})=>{const o=e.jsx(L,{size:"sm",fw:500,children:n.title}),i=({children:a})=>n.link?e.jsx(te,{href:n.link,children:a},n.id):n.action?e.jsx(te,{component:"button",type:"button",onClick:n.action,children:a}):(console.log("Neither link nor action found for link:",n),a);return e.jsx(i,{children:n.placeholder?e.jsxs(w,{children:[o,e.jsx(bs,{})]}):o})};return e.jsx(Me,{cols:2,spacing:0,children:t.map(n=>e.jsx(Ge,{text:n.description,children:e.jsx(s,{link:n})},n.id))})}const Ve=[],sn=Object.values(J);function nn({opened:t,close:s}){return e.jsx(ve,{opened:t,onClose:s,overlayProps:{opacity:.5,blur:4},withCloseButton:!1,classNames:{body:cs},children:e.jsx(on,{})})}function on(){const[t,s]=m.useState(0),n=m.useRef(null),{height:o}=Vt();return m.useEffect(()=>{n.current!=null&&s(o-n.current.clientHeight-65)}),e.jsxs(Fe,{direction:"column",mih:"100vh",p:16,children:[e.jsx(K,{order:3,children:d._({id:"UxKoFf"})}),e.jsx(le,{className:Qe,p:0,children:e.jsxs(Te,{h:t,type:"always",offsetScrollbars:!0,children:[e.jsx(K,{order:5,children:d._({id:"wRR604"})}),e.jsx(_e,{links:sn}),e.jsx(M,{h:"md"}),Ve.length>0?e.jsxs(e.Fragment,{children:[e.jsx(K,{order:5,children:d._({id:"ohUJJM"})}),e.jsx(_e,{links:Ve})]}):e.jsx(e.Fragment,{})]})}),e.jsxs("div",{ref:n,children:[e.jsx(M,{h:"md"}),e.jsx(K,{order:5,children:d._({id:"TvY/XA"})}),e.jsx(ze,{links:es}),e.jsx(M,{h:"md"}),e.jsx(K,{order:5,children:d._({id:"uyJsf6"})}),e.jsx(ze,{links:ts})]})]})}function rn({opened:t,onClose:s}){var l,S;const{isLoggedIn:n}=F(),o=oe(),i=we({enabled:t&&n(),queryKey:["notifications",t],queryFn:async()=>G.get($(Y.notifications_list),{params:{read:!1,limit:10}}).then(r=>r.data).catch(r=>r),refetchOnMount:!1}),a=m.useMemo(()=>{var r,c;return(((c=(r=i.data)==null?void 0:r.results)==null?void 0:c.length)??0)>0},[i.data]),u=m.useCallback(()=>{G.get($(Y.notifications_readall),{params:{read:!1}}).catch(r=>{}).then(r=>{i.refetch()})},[]);return e.jsx(ve,{opened:t,size:"md",position:"right",onClose:s,withCloseButton:!1,styles:{header:{width:"100%"},title:{width:"100%"}},title:e.jsxs(w,{justify:"space-between",wrap:"nowrap",children:[e.jsx(ds,{size:"lg",children:d._({id:"iDNBZe"})}),e.jsxs(w,{justify:"end",wrap:"nowrap",children:[e.jsx(fe,{label:d._({id:"onllUU"}),children:e.jsx(I,{variant:"transparent",onClick:()=>{u()},children:e.jsx(Ne,{})})}),e.jsx(fe,{label:d._({id:"/WA/tl"}),children:e.jsx(I,{onClick:()=>{s(),o("/notifications/unread")},variant:"transparent",children:e.jsx(Tt,{})})})]})]}),children:e.jsxs(se,{gap:"xs",children:[e.jsx(ke,{}),!a&&e.jsx(be,{color:"green",children:e.jsx(L,{size:"sm",children:d._({id:"t2pqHO"})})}),a&&((S=(l=i.data)==null?void 0:l.results)==null?void 0:S.map(r=>{var c,_,j,b;return e.jsxs(w,{justify:"space-between",children:[e.jsxs(se,{gap:"3",children:[(c=r==null?void 0:r.target)!=null&&c.link?e.jsx(L,{size:"sm",component:X,to:(_=r==null?void 0:r.target)==null?void 0:_.link,target:"_blank",children:((j=r.target)==null?void 0:j.name)??r.name??d._({id:"5+87Pq"})}):e.jsx(L,{size:"sm",children:((b=r.target)==null?void 0:b.name)??r.name??d._({id:"5+87Pq"})}),e.jsx(L,{size:"xs",children:r.age_human??""})]}),e.jsx(M,{}),e.jsx(I,{color:"gray",variant:"hover",onClick:()=>{let h=$(Y.notifications_list,r.pk);G.patch(h,{read:!0}).then(y=>{i.refetch()})},children:e.jsx(fe,{label:d._({id:"+s1J8k"}),children:e.jsx(Ne,{})})})]},r.pk)})),i.isFetching&&e.jsx(Ue,{children:e.jsx(We,{size:"sm"})})]})})}function an({query:t,onRemove:s,onResultClick:n}){if(t.results.count==0)return null;const o=Ze[t.model];return e.jsx(Ut,{shadow:"sm",radius:"xs",p:"md",children:e.jsxs(se,{children:[e.jsxs(w,{justify:"space-between",wrap:"nowrap",children:[e.jsxs(w,{justify:"left",gap:5,wrap:"nowrap",children:[e.jsx(L,{size:"lg",children:o.label_multiple}),e.jsxs(L,{size:"sm",style:{fontStyle:"italic"},children:[" ","- ",t.results.count," ",e.jsx(x,{id:"mO8KLE"})]})]}),e.jsx(M,{}),e.jsx(I,{size:"sm",color:"red",variant:"transparent",radius:"xs",onClick:()=>s(t.model),children:e.jsx(Wt,{})})]}),e.jsx(ke,{}),e.jsx(se,{children:t.results.results.map(i=>e.jsx(te,{onClick:a=>n(t.model,i.pk,a),children:e.jsx(ys,{instance:i,model:t.model})},i.pk))}),e.jsx(M,{})]},`stack-${t.model}`)},`paper-${t.model}`)}function ln({opened:t,onClose:s}){const[n,o]=m.useState(""),[i]=Ot(n,500),[a,u]=m.useState(!1),[l,S]=m.useState(!1),r=F(),c=Kt(),j=m.useMemo(()=>[{model:N.part,parameters:{active:c.isSet("SEARCH_HIDE_INACTIVE_PARTS")?!0:void 0},enabled:r.hasViewRole(C.part)&&c.isSet("SEARCH_PREVIEW_SHOW_PARTS")},{model:N.supplierpart,parameters:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0},enabled:r.hasViewRole(C.part)&&r.hasViewRole(C.purchase_order)&&c.isSet("SEARCH_PREVIEW_SHOW_SUPPLIER_PARTS")},{model:N.manufacturerpart,parameters:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0},enabled:r.hasViewRole(C.part)&&r.hasViewRole(C.purchase_order)&&c.isSet("SEARCH_PREVIEW_SHOW_MANUFACTURER_PARTS")},{model:N.partcategory,parameters:{},enabled:r.hasViewRole(C.part_category)&&c.isSet("SEARCH_PREVIEW_SHOW_CATEGORIES")},{model:N.stockitem,parameters:{part_detail:!0,location_detail:!0,in_stock:c.isSet("SEARCH_PREVIEW_HIDE_UNAVAILABLE_STOCK")?!0:void 0},enabled:r.hasViewRole(C.stock)&&c.isSet("SEARCH_PREVIEW_SHOW_STOCK")},{model:N.stocklocation,parameters:{},enabled:r.hasViewRole(C.stock_location)&&c.isSet("SEARCH_PREVIEW_SHOW_LOCATIONS")},{model:N.build,parameters:{part_detail:!0},enabled:r.hasViewRole(C.build)&&c.isSet("SEARCH_PREVIEW_SHOW_BUILD_ORDERS")},{model:N.company,parameters:{},enabled:(r.hasViewRole(C.sales_order)||r.hasViewRole(C.purchase_order))&&c.isSet("SEARCH_PREVIEW_SHOW_COMPANIES")},{model:N.purchaseorder,parameters:{supplier_detail:!0,outstanding:c.isSet("SEARCH_PREVIEW_EXCLUDE_INACTIVE_PURCHASE_ORDERS")?!0:void 0},enabled:r.hasViewRole(C.purchase_order)&&c.isSet("SEARCH_PREVIEW_SHOW_PURCHASE_ORDERS")},{model:N.salesorder,parameters:{customer_detail:!0,outstanding:c.isSet("SEARCH_PREVIEW_EXCLUDE_INACTIVE_SALES_ORDERS")?!0:void 0},enabled:r.hasViewRole(C.sales_order)&&c.isSet("SEARCH_PREVIEW_SHOW_SALES_ORDERS")},{model:N.returnorder,parameters:{customer_detail:!0,outstanding:c.isSet("SEARCH_PREVIEW_EXCLUDE_INACTIVE_RETURN_ORDERS")?!0:void 0},enabled:r.hasViewRole(C.return_order)&&c.isSet("SEARCH_PREVIEW_SHOW_RETURN_ORDERS")}],[r,c]).filter(g=>g.enabled);m.useEffect(()=>{h.refetch()},[i]);const h=we({queryKey:["search",i,a,l],queryFn:async()=>{if(!i)return[];let g={offset:0,limit:c.getSetting("SEARCH_PREVIEW_RESULTS","10"),search:i,search_regex:a,search_whole:l};return j.forEach(p=>{g[p.model]=p.parameters}),G.post($(Y.api_search),g).then(function(p){return p.data}).catch(function(p){return console.error(p),[]})}}),[y,A]=m.useState([]);m.useEffect(()=>{if(h.data){let g=j.filter(p=>p.model in h.data);for(let p in h.data){let f=g.find(R=>R.model==p);f&&(f.results=h.data[p])}g=g.filter(p=>p.results.count>0),A(g)}else A([])},[h.data]);function v(g){A(y.filter(p=>p.model!=g))}function D(){o(""),s()}const U=oe();function W(g,p,f){const R=Ze[g];if(R.url_detail==null)return;f!=null&&f.ctrlKey||f!=null&&f.shiftKey||D();let z=R.url_detail.replace(":pk",p.toString());Ke(z,U,f)}return e.jsx(ve,{opened:t,size:"xl",onClose:D,position:"right",withCloseButton:!1,styles:{header:{width:"100%"},title:{width:"100%"}},title:e.jsxs(w,{justify:"space-between",gap:1,wrap:"nowrap",children:[e.jsx(Pt,{placeholder:d._({id:"Dwt0g3"}),radius:"xs",value:n,onChange:g=>o(g.currentTarget.value),leftSection:e.jsx(re,{size:"0.8rem"}),rightSection:n&&e.jsx(Ht,{color:"red",onClick:()=>o("")}),styles:{root:{width:"100%"}}}),e.jsx(I,{size:"lg",variant:"outline",radius:"xs",onClick:()=>h.refetch(),children:e.jsx(Mt,{})}),e.jsxs(k,{children:[e.jsx(k.Target,{children:e.jsx(I,{size:"lg",variant:"outline",radius:"xs",children:e.jsx(He,{})})}),e.jsxs(k.Dropdown,{children:[e.jsx(k.Label,{children:d._({id:"9UYKcs"})}),e.jsx(k.Item,{children:e.jsx(Le,{label:d._({id:"qkCZlJ"}),checked:a,onChange:g=>u(g.currentTarget.checked),radius:"sm"})}),e.jsx(k.Item,{children:e.jsx(Le,{label:d._({id:"roauu/"}),checked:l,onChange:g=>S(g.currentTarget.checked),radius:"sm"})})]})]})]}),children:e.jsxs(qe,{label:"SearchDrawer",children:[h.isFetching&&e.jsx(Ue,{children:e.jsx(We,{})}),!h.isFetching&&!h.isError&&e.jsx(se,{gap:"md",children:y.map((g,p)=>e.jsx(an,{query:g,onRemove:f=>v(f),onResultClick:(f,R,z)=>W(f,R,z)},p))}),h.isError&&e.jsx(be,{color:"red",radius:"sm",variant:"light",title:d._({id:"SlfejT"}),icon:e.jsx(Ft,{size:"1rem"}),children:e.jsx(x,{id:"hJCuaV"})}),i&&!h.isFetching&&!h.isError&&y.length==0&&e.jsx(be,{color:"blue",radius:"sm",variant:"light",title:d._({id:"Ev2r9A"}),icon:e.jsx(re,{size:"1rem"}),children:e.jsx(x,{id:"dTtbrX"})})]})})}function cn(){const[t,s]=Ce(y=>[y.setNavigationOpen,y.navigationOpen]),[n,{open:o,close:i}]=je(s),[a,{open:u,close:l}]=je(!1),[S,{open:r,close:c}]=je(!1),{isLoggedIn:_}=F(),[j,b]=m.useState(0),h=we({queryKey:["notification-count"],enabled:_(),queryFn:async()=>{var y;if(!_())return null;try{const A={params:{read:!1,limit:1}};let v=await G.get($(Y.notifications_list),A).catch(()=>null);return b(((y=v==null?void 0:v.data)==null?void 0:y.count)??0),(v==null?void 0:v.data)??null}catch{return null}},refetchInterval:3e4,refetchOnMount:!0});return m.useEffect(()=>{s!==n&&t(n)},[n]),m.useEffect(()=>{s!==n&&(s?o():i())},[s]),e.jsxs("div",{className:us,children:[e.jsx(ln,{opened:a,onClose:l}),e.jsx(nn,{opened:n,close:i}),e.jsx(rn,{opened:S,onClose:()=>{h.refetch(),c()}}),e.jsx(le,{className:hs,size:"100%",children:e.jsxs(w,{justify:"space-between",children:[e.jsxs(w,{children:[e.jsx(tn,{openDrawer:o}),e.jsx(dn,{})]}),e.jsxs(w,{children:[e.jsx(I,{onClick:u,variant:"transparent",children:e.jsx(re,{})}),e.jsx(Ys,{}),e.jsx($s,{}),e.jsx(Qt,{radius:"lg",size:"18",label:j,color:"red",disabled:j<=0,inline:!0,children:e.jsx(I,{onClick:r,variant:"transparent",children:e.jsx(qt,{})})}),e.jsx(Xs,{})]})]})})]})}function dn(){const t=F(),s=oe(),n=fs(":tabName/*"),o=n==null?void 0:n.params.tabName,i=m.useMemo(()=>{let a=[];return De.forEach(u=>{u.role&&!t.hasViewRole(u.role)||a.push(e.jsx(Se.Tab,{value:u.name,onClick:l=>Ke(`/${u.name}`,s,l),children:u.text},u.name))}),a},[De,t]);return e.jsx(Se,{defaultValue:"home",classNames:{root:ps,list:xs,tab:gs},value:o,children:e.jsx(Se.List,{children:i.map(a=>a)})})}const un=({children:t})=>{const s=Be(),{isLoggedIn:n}=F();return n()?t:e.jsx(Ss,{to:"/logged-in",state:{redirectFrom:s.pathname}})},[hn,pn]=et();function vn(){const t=oe(),s=Be(),n=Bs(t),[o,i]=m.useState(n),[a,u]=m.useState(!1);return m.useEffect(()=>{a&&(i(n),u(!1))},[s]),e.jsx(un,{children:e.jsxs(Fe,{direction:"column",mih:"100vh",children:[e.jsx(cn,{}),e.jsx(le,{className:Qe,size:"100%",children:e.jsx(qe,{label:"layout",children:e.jsx(js,{})})}),e.jsx(M,{h:"xl"}),e.jsx(Gs,{}),e.jsx(E,{actions:o,store:hn,highlightQuery:!0,searchProps:{leftSection:e.jsx(re,{size:"1.2rem"}),placeholder:d._({id:"YIix5Y"})},shortcut:["mod + K","/"],nothingFound:d._({id:"cNfZ4r"})})]})})}export{un as ProtectedRoute,vn as default,pn as firstSpotlight,hn as firstStore};
