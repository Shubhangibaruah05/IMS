import{r as n,i as a,j as t,bK as g,cY as M,z as U,_ as v,cZ as G,ac as W,ad as B,aL as Y,S as q}from"./vendor-B0vSnHFf.js";import{A as $}from"./AdminButton-Cl1ixKQi.js";import{I as z,D as y,a as H}from"./InstanceDetail-Cejekc8J.js";import{D as L,N as O}from"./NotesEditor-DCyldUZp.js";import{u as Q,R as Z,a as V,I as X,A as J,d as ee,E as te,D as ae}from"./InvenTreeTable-D26a1r6-.js";import{P as re}from"./PageDetail-B4PsctWo.js";import{P as se}from"./PanelGroup-DRVQKYn0.js";import{a as F,A as s,U as o,e as R,M as i}from"./index-CDdQlqFV.js";import{b as ie,u as oe}from"./CompanyForms-Dy3Tzhcs.js";import{g as ne}from"./Instance-Co8OMzcE.js";import{a as T,u as w,b as N}from"./UseForm-BimrM1zK.js";import{u as le}from"./UseInstance-Bcp_oSAZ.js";import{A as pe}from"./AttachmentTable-Mxcn-H07.js";import{A as de}from"./AddItemButton-CD0U_4gd.js";import{S as ce}from"./SupplierPartTable-B-0txwOI.js";import{d as me,u as ue}from"./DesktopAppView-CofLSp00.js";import"./ActionButton-Br0cBRLA.js";import"./BaseContext-DSwOqL9e.js";import"./YesNoButton-1B57tnbm.js";import"./ColumnRenderers-CwItNORh.js";import"./StylishText-CrpvZzAV.js";import"./GenericErrorPage-BifXQa91.js";import"./NotFound-DXIcBWRy.js";import"./PermissionDenied-Cl_T9Vqt.js";import"./Boundary-CysPC9mI.js";import"./AttachmentLink-CL1ofkZf.js";function _e({params:_}){const r=Q("manufacturer-part-parameter"),l=F(),e=n.useMemo(()=>[{accessor:"name",title:a._({id:"6YtxFj"}),sortable:!0,switchable:!1},{accessor:"value",title:a._({id:"wMHvYH"}),sortable:!0,switchable:!1},{accessor:"units",title:a._({id:"QrhaVg"}),sortable:!1,switchable:!0}],[]),p=ie(),[h,f]=n.useState(void 0),x=T({url:s.manufacturer_part_parameter_list,title:a._({id:"WrK5aa"}),fields:p,table:r,initialData:{manufacturer_part:_.manufacturer_part}}),b=w({url:s.manufacturer_part_parameter_list,pk:h,title:a._({id:"FDjidN"}),fields:p,table:r}),d=N({url:s.manufacturer_part_parameter_list,pk:h,title:a._({id:"qSo+g1"}),table:r}),c=n.useCallback(m=>[Z({hidden:!l.hasChangeRole(o.purchase_order),onClick:()=>{f(m.pk),b.open()}}),V({hidden:!l.hasDeleteRole(o.purchase_order),onClick:()=>{f(m.pk),d.open()}})],[l]),k=n.useMemo(()=>[t.jsx(de,{tooltip:a._({id:"WrK5aa"}),onClick:()=>{x.open()},hidden:!l.hasAddRole(o.purchase_order)},"add-parameter")],[l]);return t.jsxs(t.Fragment,{children:[x.modal,b.modal,d.modal,t.jsx(X,{url:R(s.manufacturer_part_parameter_list),tableState:r,columns:e,props:{params:{..._},rowActions:c,tableActions:k}})]})}function Be(){var A,D;const{id:_}=me(),r=F(),l=ue(),{instance:e,instanceQuery:p,refreshInstance:h,requestStatus:f}=le({endpoint:s.manufacturer_part_list,pk:_,hasPrimaryKey:!0,params:{part_detail:!0,manufacturer_detail:!0}}),x=n.useMemo(()=>{var I,C,S;if(p.isFetching)return t.jsx(g,{});let u=e??{},j=[{type:"link",name:"part",label:a._({id:"GNd5ad"}),model:i.part,hidden:!e.part},{type:"string",name:"description",label:a._({id:"Nu4oKW"}),copy:!0,hidden:!e.description},{type:"link",external:!0,name:"link",label:a._({id:"0R4wMK"}),copy:!0,hidden:!e.link}],K=[{type:"link",name:"manufacturer",label:a._({id:"+m9/3S"}),icon:"manufacturers",model:i.company,hidden:!e.manufacturer},{type:"string",name:"MPN",label:a._({id:"ZCCuT2"}),copy:!0,hidden:!e.MPN,icon:"reference"}];return t.jsxs(z,{children:[t.jsxs(M,{children:[t.jsx(M.Col,{span:4,children:t.jsx(L,{appRole:o.part,src:(I=e==null?void 0:e.part_detail)==null?void 0:I.image,apiPath:R(s.part_list,(C=e==null?void 0:e.part_detail)==null?void 0:C.pk),pk:(S=e==null?void 0:e.part_detail)==null?void 0:S.pk})}),t.jsx(M.Col,{span:8,children:t.jsx(y,{title:a._({id:"bisS0I"}),fields:j,item:u})})]}),t.jsx(y,{title:a._({id:"BCSxrX"}),fields:K,item:u})]})},[e,p]),b=n.useMemo(()=>[{name:"details",label:a._({id:"uN9giG"}),icon:t.jsx(U,{}),content:x},{name:"parameters",label:a._({id:"F18WP3"}),icon:t.jsx(v,{}),content:e!=null&&e.pk?t.jsx(_e,{params:{manufacturer_part:e.pk}}):t.jsx(g,{})},{name:"suppliers",label:a._({id:"9RecCt"}),icon:t.jsx(G,{}),content:e!=null&&e.pk?t.jsx(ce,{params:{manufacturer_part:e.pk}}):t.jsx(g,{})},{name:"attachments",label:a._({id:"w/Sphq"}),icon:t.jsx(W,{}),content:t.jsx(pe,{model_type:i.manufacturerpart,model_id:e==null?void 0:e.pk})},{name:"notes",label:a._({id:"1DBGsz"}),icon:t.jsx(B,{}),content:t.jsx(O,{modelType:i.manufacturerpart,modelId:e.pk,editable:r.hasChangeRole(o.purchase_order)})}],[e]),d=oe(),c=w({url:s.manufacturer_part_list,pk:e==null?void 0:e.pk,title:a._({id:"b30yxS"}),fields:d,onFormSuccess:h}),k=T({url:s.manufacturer_part_list,title:a._({id:"uOeMYf"}),fields:d,initialData:{...e},follow:!0,modelType:i.manufacturerpart}),m=N({url:s.manufacturer_part_list,pk:e==null?void 0:e.pk,title:a._({id:"fMDrRl"}),onFormSuccess:()=>{l(ne(i.part,e.part))}}),P=n.useMemo(()=>[t.jsx($,{model:i.manufacturerpart,pk:e.pk}),t.jsx(J,{tooltip:a._({id:"D/ppgk"}),icon:t.jsx(Y,{}),actions:[ee({hidden:!r.hasAddRole(o.purchase_order),onClick:()=>k.open()}),te({hidden:!r.hasChangeRole(o.purchase_order),onClick:()=>c.open()}),ae({hidden:!r.hasDeleteRole(o.purchase_order),onClick:()=>m.open()})]})],[r,e]),E=n.useMemo(()=>{var u,j;return[{name:a._({id:"UOTpFa"}),url:"/purchasing/"},{name:((u=e==null?void 0:e.manufacturer_detail)==null?void 0:u.name)??a._({id:"+m9/3S"}),url:`/purchasing/manufacturer/${(j=e==null?void 0:e.manufacturer_detail)==null?void 0:j.pk}/`}]},[e]);return t.jsxs(t.Fragment,{children:[m.modal,k.modal,c.modal,t.jsx(H,{status:f,loading:p.isFetching,children:t.jsxs(q,{gap:"xs",children:[t.jsx(re,{title:a._({id:"WssheI"}),subtitle:`${e.MPN} - ${(A=e.part_detail)==null?void 0:A.name}`,breadcrumbs:E,actions:P,imageUrl:(D=e==null?void 0:e.part_detail)==null?void 0:D.thumbnail,editAction:c.open,editEnabled:r.hasChangePermission(i.manufacturerpart)}),t.jsx(se,{pageKey:"manufacturerpart",panels:b})]})})]})}export{Be as default};
