import{r as _,i as e,j as t,m as s,G as m}from"./vendor-B0vSnHFf.js";import{A as f}from"./AddItemButton-CD0U_4gd.js";import{a as y,D as h,g as x,k as g,L as k}from"./ColumnRenderers-CwItNORh.js";import{a as j,A as c,M as b,U as v,e as T}from"./index-CDdQlqFV.js";import{u as C}from"./PartForms-CPuh80H4.js";import{a as w}from"./UseForm-BimrM1zK.js";import{u as M,I as P}from"./InvenTreeTable-D26a1r6-.js";function A(){return[{accessor:"name",title:e._({id:"vgP+9p"}),sortable:!0,noWrap:!0,render:a=>y(a)},{accessor:"IPN",sortable:!0},{accessor:"revision",sortable:!0},{accessor:"units",sortable:!0},h({}),{accessor:"category",sortable:!0,render:a=>{var i;return(i=a.category_detail)==null?void 0:i.pathstring}},{accessor:"default_location",sortable:!0,render:a=>{var i;return(i=a.default_location_detail)==null?void 0:i.pathstring}},{accessor:"total_in_stock",sortable:!0,render:a=>{let i=[],o=(a==null?void 0:a.total_in_stock)??0,p=((a==null?void 0:a.allocated_to_build_orders)??0)+((a==null?void 0:a.allocated_to_sales_orders)??0),n=Math.max(0,o-p),r=(a==null?void 0:a.minimum_stock)??0,d=String(o),l;return r>o&&(i.push(t.jsx(s,{color:"orange",children:e._({id:"Lgnuy/"})+`: ${r}`},"min-stock")),l="orange"),a.ordering>0&&i.push(t.jsx(s,{children:e._({id:"0lg3zX"})+`: ${a.ordering}`},"on-order")),a.building&&i.push(t.jsx(s,{children:e._({id:"oZd08v"})+`: ${a.building}`},"building")),a.allocated_to_build_orders>0&&i.push(t.jsx(s,{children:e._({id:"KCpl4N"})+`: ${a.allocated_to_build_orders}`},"bo-allocations")),a.allocated_to_sales_orders>0&&i.push(t.jsx(s,{children:e._({id:"DaWMWw"})+`: ${a.allocated_to_sales_orders}`},"so-allocations")),n!=o&&i.push(t.jsxs(s,{children:[e._({id:"csDS2L"}),": ",n]},"available")),a.external_stock>0&&i.push(t.jsxs(s,{children:[e._({id:"e8fwfT"}),": ",a.external_stock]},"external")),o<=0?(l="red",d=e._({id:"AbC1Px"})):n<=0?l="orange":n<r&&(l="yellow"),t.jsx(x,{value:t.jsxs(m,{gap:"xs",justify:"left",wrap:"nowrap",children:[t.jsx(s,{c:l,children:d}),a.units&&t.jsxs(s,{size:"xs",color:l,children:["[",a.units,"]"]})]}),title:e._({id:"odasNw"}),extra:i})}},{accessor:"price_range",title:e._({id:"YA4hwj"}),sortable:!0,ordering:"pricing_max",render:a=>g(a.pricing_min,a.pricing_max)},k({})]}function D(){return[{name:"active",label:e._({id:"F6pfE9"}),description:e._({id:"PHri/6"}),type:"boolean"},{name:"locked",label:e._({id:"G2fuEb"}),description:e._({id:"j5DYyt"}),type:"boolean"},{name:"assembly",label:e._({id:"WL36Yh"}),description:e._({id:"oQzKsK"}),type:"boolean"},{name:"cascade",label:e._({id:"NgZniC"}),description:e._({id:"5JhtGd"}),type:"boolean"},{name:"component",label:e._({id:"dK3Z9j"}),description:e._({id:"oO7QIX"}),type:"boolean"},{name:"testable",label:e._({id:"bJsTOf"}),description:e._({id:"n8MVvQ"}),type:"boolean"},{name:"trackable",label:e._({id:"y6MnU0"}),description:e._({id:"MbixSq"}),type:"boolean"},{name:"has_units",label:e._({id:"YyRdJQ"}),description:e._({id:"WyFVby"}),type:"boolean"},{name:"has_ipn",label:e._({id:"c9/Fqb"}),description:e._({id:"jh/Aa+"}),type:"boolean"},{name:"has_stock",label:e._({id:"JqmfuT"}),description:e._({id:"6Kd+HK"}),type:"boolean"},{name:"low_stock",label:e._({id:"UgdO7s"}),description:e._({id:"GDYPCw"}),type:"boolean"},{name:"purchaseable",label:e._({id:"TW9g28"}),description:e._({id:"KMdl2R"}),type:"boolean"},{name:"salable",label:e._({id:"/3xNJ4"}),description:e._({id:"V5i7hf"}),type:"boolean"},{name:"virtual",label:e._({id:"ksX7Wx"}),description:e._({id:"QDTpY6"}),type:"choice",choices:[{value:"true",label:e._({id:"ksX7Wx"})},{value:"false",label:e._({id:"+SkaI8"})}]},{name:"is_template",label:e._({id:"62zyX+"}),description:e._({id:"utmCBg"}),type:"boolean"},{name:"is_revision",label:e._({id:"wV5kLq"}),description:e._({id:"bvyXYp"})},{name:"has_revisions",label:e._({id:"uN6v7B"}),description:e._({id:"mWe3zs"})},{name:"has_pricing",label:e._({id:"T43R5B"}),description:e._({id:"/t4j0O"}),type:"boolean"},{name:"unallocated_stock",label:e._({id:"oGd3rK"}),description:e._({id:"NINff3"}),type:"boolean"},{name:"starred",label:e._({id:"7VIaU3"}),description:e._({id:"PNFIYy"}),type:"boolean"},{name:"stocktake",label:e._({id:"gzYEcU"}),description:e._({id:"u1pAkC"}),type:"boolean"}]}function S({props:a,defaultPartData:i}){const o=_.useMemo(()=>A(),[]),p=_.useMemo(()=>D(),[]),n=M("part-list"),r=j(),d=_.useMemo(()=>i??a.params??{},[i,a.params]),l=w({url:c.part_list,title:e._({id:"rGfVOS"}),fields:C({create:!0}),initialData:d,follow:!0,modelType:b.part}),u=_.useMemo(()=>[t.jsx(f,{hidden:!r.hasAddRole(v.part),tooltip:e._({id:"rGfVOS"}),onClick:()=>l.open()})],[r]);return t.jsxs(t.Fragment,{children:[l.modal,t.jsx(P,{url:T(c.part_list),tableState:n,columns:o,props:{...a,enableDownload:!0,modelType:b.part,tableFilters:p,tableActions:u,params:{...a.params,category_detail:!0,location_detail:!0}}})]})}export{S as P};
