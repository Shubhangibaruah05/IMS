import{F as p,as as u,r as f,j as o,a7 as g,G as i,S as x,z as C,h as j}from"./vendor-C5fHLTDD.js";import{i as y,j as v,l as S,A as I}from"./index-DX4YmBvQ.js";import{m as B,I as b}from"./index.es-RSVDxQs2.js";import{S as k}from"./StylishText-CD9I8-X7.js";import{u as w}from"./DesktopAppView-DlNUv0Ur.js";import{z as T}from"./ApiForm-Dtyf-xF2.js";import{I as E}from"./IconChevronDown-DoPmRmuk.js";function q({opened:s,onClose:n,selectedCategory:a}){const c=w(),l=p({enabled:s,queryKey:["part_category_tree",s],queryFn:async()=>v.get(S(I.category_tree),{}).then(e=>e.data.map(t=>({id:t.pk,label:t.name,parentId:t.parent,children:t.subcategories}))).catch(e=>(console.error("Error fetching part category tree:",e),e)),refetchOnMount:!0});function d({node:e}){return o.jsx(i,{position:"apart",noWrap:!0,onClick:()=>{n(),c(`/part/category/${e.id}`)},children:o.jsx(j,{children:e.label})},e.id)}function h({node:e,open:t}){if(e.children!=0)return t?o.jsx(E,{}):o.jsx(b,{})}const r=u(),m=f.useMemo(()=>{const e=r.colorScheme==="dark"?r.colorScheme:r.primaryColor;return{dark:{text:{...r.fn.fontStyles()},nodes:{height:"2.5rem",folder:{selectedBgColor:r.colors[e][4],hoverBgColor:r.colors[e][6]},leaf:{selectedBgColor:r.colors[e][4],hoverBgColor:r.colors[e][6]},icons:{folderColor:r.colors[e][3],leafColor:r.colors[e][3]}}},light:{text:{...r.fn.fontStyles()},nodes:{height:"2.5rem",folder:{selectedBgColor:r.colors[e][4],hoverBgColor:r.colors[e][2]},leaf:{selectedBgColor:r.colors[e][4],hoverBgColor:r.colors[e][2]},icons:{folderColor:r.colors[e][8],leafColor:r.colors[e][6]}}}}},[r]);return o.jsx(g,{opened:s,size:"md",position:"left",onClose:n,withCloseButton:!0,styles:{header:{width:"100%"},title:{width:"100%"}},title:o.jsxs(i,{position:"left",p:"ms",spacing:"md",noWrap:!0,children:[o.jsx(T,{}),o.jsx(k,{size:"lg",children:y._({id:"2GkbLI"})})]}),children:o.jsxs(x,{spacing:"xs",children:[o.jsx(C,{visible:l.isFetching}),o.jsx(B,{nodes:l.data??[],RenderNode:d,RenderIcon:h,defaultSelectedNodes:a?[a]:[],showEmptyItems:!1,theme:r.colorScheme,themes:m})]})})}export{q as P};
