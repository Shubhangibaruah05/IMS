function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/MobileAppView-DQKSIdZ4.js","assets/vendor-C5fHLTDD.js","assets/BaseContext-BGXKB9QI.js","assets/links-BlATihB1.js","assets/StylishText-CD9I8-X7.js","assets/DesktopAppView-DlNUv0Ur.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as me,r as C,a as N,p as F,b as B,d as ee,e as q,j as S,Q as de,S as he,C as ge,L as ke,u as Se,i as we,f as be,R as ve}from"./vendor-C5fHLTDD.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const ye="modulepreload",pe=function(e){return"/"+e},E={},te=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){const o=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),i=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));s=Promise.all(r.map(c=>{if(c=pe(c),c in E)return;E[c]=!0;const u=c.endsWith(".css"),b=u?'[rel="stylesheet"]':"";if(!!a)for(let l=o.length-1;l>=0;l--){const _=o[l];if(_.href===c&&(!u||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${b}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":ye,u||(d.as="script",d.crossOrigin=""),d.href=c,i&&d.setAttribute("nonce",i),document.head.appendChild(d),u)return new Promise((l,_)=>{d.addEventListener("load",l),d.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}return s.then(()=>t()).catch(o=>{const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o})};var re={},ae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.errorMessages=e.ErrorType=void 0;var t;(function(r){r.MalformedUnicode="MALFORMED_UNICODE",r.MalformedHexadecimal="MALFORMED_HEXADECIMAL",r.CodePointLimit="CODE_POINT_LIMIT",r.OctalDeprecation="OCTAL_DEPRECATION",r.EndOfString="END_OF_STRING"})(t=e.ErrorType||(e.ErrorType={})),e.errorMessages=new Map([[t.MalformedUnicode,"malformed Unicode character escape sequence"],[t.MalformedHexadecimal,"malformed hexadecimal character escape sequence"],[t.CodePointLimit,"Unicode codepoint must not be greater than 0x10FFFF in escape sequence"],[t.OctalDeprecation,'"0"-prefixed octal literals and octal escape sequences are deprecated; for octal literals use the "0o" prefix instead'],[t.EndOfString,"malformed escape sequence at end of string"]])})(ae);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.unraw=e.errorMessages=e.ErrorType=void 0;const t=ae;Object.defineProperty(e,"ErrorType",{enumerable:!0,get:function(){return t.ErrorType}}),Object.defineProperty(e,"errorMessages",{enumerable:!0,get:function(){return t.errorMessages}});function r(l){return!l.match(/[^a-f0-9]/i)?parseInt(l,16):NaN}function a(l,_,h){const k=r(l);if(Number.isNaN(k)||h!==void 0&&h!==l.length)throw new SyntaxError(t.errorMessages.get(_));return k}function s(l){const _=a(l,t.ErrorType.MalformedHexadecimal,2);return String.fromCharCode(_)}function o(l,_){const h=a(l,t.ErrorType.MalformedUnicode,4);if(_!==void 0){const k=a(_,t.ErrorType.MalformedUnicode,4);return String.fromCharCode(h,k)}return String.fromCharCode(h)}function n(l){return l.charAt(0)==="{"&&l.charAt(l.length-1)==="}"}function i(l){if(!n(l))throw new SyntaxError(t.errorMessages.get(t.ErrorType.MalformedUnicode));const _=l.slice(1,-1),h=a(_,t.ErrorType.MalformedUnicode);try{return String.fromCodePoint(h)}catch(k){throw k instanceof RangeError?new SyntaxError(t.errorMessages.get(t.ErrorType.CodePointLimit)):k}}function c(l,_=!1){if(_)throw new SyntaxError(t.errorMessages.get(t.ErrorType.OctalDeprecation));const h=parseInt(l,8);return String.fromCharCode(h)}const u=new Map([["b","\b"],["f","\f"],["n",`
`],["r","\r"],["t","	"],["v","\v"],["0","\0"]]);function b(l){return u.get(l)||l}const p=/\\(?:(\\)|x([\s\S]{0,2})|u(\{[^}]*\}?)|u([\s\S]{4})\\u([^{][\s\S]{0,3})|u([\s\S]{0,4})|([0-3]?[0-7]{1,2})|([\s\S])|$)/g;function d(l,_=!1){return l.replace(p,function(h,k,P,K,Q,fe,X,V,J){if(k!==void 0)return"\\";if(P!==void 0)return s(P);if(K!==void 0)return i(K);if(Q!==void 0)return o(Q,fe);if(X!==void 0)return o(X);if(V==="0")return"\0";if(V!==void 0)return c(V,!_);if(J!==void 0)return b(J);throw new SyntaxError(t.errorMessages.get(t.ErrorType.EndOfString))})}e.unraw=d,e.default=d})(re);const L=e=>typeof e=="string",Ce=e=>typeof e=="function",Y=new Map,se="en";function z(e){return[...Array.isArray(e)?e:[e],se]}function oe(e,t,r){const a=z(e);return j(()=>T("date",a,r),()=>new Intl.DateTimeFormat(a,r)).format(L(t)?new Date(t):t)}function H(e,t,r){const a=z(e);return j(()=>T("number",a,r),()=>new Intl.NumberFormat(a,r)).format(t)}function Z(e,t,r,{offset:a=0,...s}){const o=z(e),n=t?j(()=>T("plural-ordinal",o),()=>new Intl.PluralRules(o,{type:"ordinal"})):j(()=>T("plural-cardinal",o),()=>new Intl.PluralRules(o,{type:"cardinal"}));return s[r]??s[n.select(r-a)]??s.other}function j(e,t){const r=e();let a=Y.get(r);return a||(a=t(),Y.set(r,a)),a}function T(e,t,r){const a=t.join("-");return`${e}-${a}-${JSON.stringify(r)}`}const ne=/\\u[a-fA-F0-9]{4}|\\x[a-fA-F0-9]{2}/g,ie="%__lingui_octothorpe__%",Le=(e,t,r={})=>{const a=t||e,s=n=>typeof n=="object"?n:r[n]||{style:n},o=(n,i)=>{const c=Object.keys(r).length?s("number"):void 0,u=H(a,n,c);return i.replace(new RegExp(ie,"g"),u)};return{plural:(n,i)=>{const{offset:c=0}=i,u=Z(a,!1,n,i);return o(n-c,u)},selectordinal:(n,i)=>{const{offset:c=0}=i,u=Z(a,!0,n,i);return o(n-c,u)},select:Ne,number:(n,i)=>H(a,n,s(i)),date:(n,i)=>oe(a,n,s(i))}},Ne=(e,t)=>t[e]??t.other;function Oe(e,t,r){return(a={},s)=>{const o=Le(t,r,s),n=c=>Array.isArray(c)?c.reduce((u,b)=>{if(b==="#")return u+ie;if(L(b))return u+b;const[p,d,l]=b;let _={};d==="plural"||d==="selectordinal"||d==="select"?Object.entries(l).forEach(([k,P])=>{_[k]=n(P)}):_=l;let h;if(d){const k=o[d];h=k(a[p],_)}else h=a[p];return h==null?u:u+h},""):c,i=n(e);return L(i)&&ne.test(i)?re.unraw(i.trim()):L(i)?i.trim():i?String(i):""}}var Ie=Object.defineProperty,xe=(e,t,r)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,De=(e,t,r)=>(xe(e,typeof t!="symbol"?t+"":t,r),r);class Re{constructor(){De(this,"_events",{})}on(t,r){var a;return(a=this._events)[t]??(a[t]=[]),this._events[t].push(r),()=>this.removeListener(t,r)}removeListener(t,r){const a=this._getListeners(t);if(!a)return;const s=a.indexOf(r);~s&&a.splice(s,1)}emit(t,...r){const a=this._getListeners(t);a&&a.map(s=>s.apply(this,r))}_getListeners(t){const r=this._events[t];return Array.isArray(r)?r:!1}}var Pe=Object.defineProperty,je=(e,t,r)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t,r)=>(je(e,typeof t!="symbol"?t+"":t,r),r);class Te extends Re{constructor(t){super(),O(this,"_locale",""),O(this,"_locales"),O(this,"_localeData",{}),O(this,"_messages",{}),O(this,"_missing"),O(this,"t",this._.bind(this)),t.missing!=null&&(this._missing=t.missing),t.messages!=null&&this.load(t.messages),t.localeData!=null&&this.loadLocaleData(t.localeData),(typeof t.locale=="string"||t.locales)&&this.activate(t.locale??se,t.locales)}get locale(){return this._locale}get locales(){return this._locales}get messages(){return this._messages[this._locale]??{}}get localeData(){return this._localeData[this._locale]??{}}_loadLocaleData(t,r){const a=this._localeData[t];a?Object.assign(a,r):this._localeData[t]=r}loadLocaleData(t,r){r!=null?this._loadLocaleData(t,r):Object.keys(t).forEach(a=>this._loadLocaleData(a,t[a])),this.emit("change")}_load(t,r){const a=this._messages[t];a?Object.assign(a,r):this._messages[t]=r}load(t,r){typeof t=="string"&&typeof r=="object"?this._load(t,r):Object.entries(t).forEach(([a,s])=>this._load(a,s)),this.emit("change")}loadAndActivate({locale:t,locales:r,messages:a}){this._locale=t,this._locales=r||void 0,this._messages[this._locale]=a,this.emit("change")}activate(t,r){this._locale=t,this._locales=r,this.emit("change")}_(t,r,a){let s=a==null?void 0:a.message;L(t)||(r=t.values||r,s=t.message,t=t.id);const o=this.messages[t],n=o===void 0,i=this._missing;if(i&&n)return Ce(i)?i(this._locale,t):i;n&&this.emit("missing",{id:t,locale:this._locale});let c=o||s||t;return L(c)&&ne.test(c)?JSON.parse(`"${c}"`):L(c)?c:Oe(c,this._locale,this._locales)(r,a==null?void 0:a.formats)}date(t,r){return oe(this._locales||this._locale,t,r)}number(t,r){return H(this._locales||this._locale,t,r)}}function Fe(e={}){return new Te(e)}const y=Fe(),[lt,R]=me("mantine-notifications"),Ue=R("show"),$e=R("hide"),Me=R("clean"),Ve=R("cleanQueue"),He=R("update"),x={show:Ue,hide:$e,clean:Me,cleanQueue:Ve,update:He};/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Be={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(e,t,r,a)=>{const s=C.forwardRef(({color:o="currentColor",size:n=24,stroke:i=2,className:c,children:u,...b},p)=>C.createElement("svg",{ref:p,...Be[e],width:n,height:n,className:["tabler-icon",`tabler-icon-${t}`,c].join(" "),...e==="filled"?{fill:o}:{strokeWidth:i,stroke:o},...b},[...a.map(([d,l])=>C.createElement(d,l)),...Array.isArray(u)?u:[u]]));return s.displayName=`${r}`,s};/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var le=qe("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),m=(e=>(e.api_server_info="",e.user_list="user/",e.user_me="user/me/",e.user_roles="user/roles/",e.user_token="user/token/",e.user_simple_login="email/generate/",e.user_reset="auth/password/reset/",e.user_reset_set="auth/password/reset/confirm/",e.user_sso="auth/social/",e.user_sso_remove="auth/social/:id/disconnect/",e.user_emails="auth/emails/",e.user_email_remove="auth/emails/:id/remove/",e.user_email_verify="auth/emails/:id/verify/",e.user_email_primary="auth/emails/:id/primary/",e.user_logout="auth/logout/",e.user_register="auth/registration/",e.currency_list="currency/exchange/",e.currency_refresh="currency/refresh/",e.task_overview="background-task/",e.task_pending_list="background-task/pending/",e.task_scheduled_list="background-task/scheduled/",e.task_failed_list="background-task/failed/",e.api_search="search/",e.settings_global_list="settings/global/",e.settings_user_list="settings/user/",e.barcode="barcode/",e.news="news/",e.global_status="generic/status/",e.version="version/",e.sso_providers="auth/providers/",e.group_list="user/group/",e.owner_list="user/owner/",e.import_session_list="importer/session/",e.import_session_accept_fields="importer/session/:id/accept_fields/",e.import_session_column_mapping_list="importer/column-mapping/",e.import_session_row_list="importer/row/",e.notifications_list="notifications/",e.notifications_readall="notifications/readall/",e.build_order_list="build/",e.build_order_attachment_list="build/attachment/",e.build_line_list="build/line/",e.bom_list="bom/",e.part_list="part/",e.part_parameter_list="part/parameter/",e.part_parameter_template_list="part/parameter/template/",e.part_thumbs_list="part/thumbs/",e.part_pricing_get="part/:id/pricing/",e.part_stocktake_list="part/stocktake/",e.category_list="part/category/",e.category_tree="part/category/tree/",e.category_parameter_list="part/category/parameters/",e.related_part_list="part/related/",e.part_attachment_list="part/attachment/",e.part_test_template_list="part/test-template/",e.company_list="company/",e.contact_list="company/contact/",e.address_list="company/address/",e.company_attachment_list="company/attachment/",e.supplier_part_list="company/part/",e.manufacturer_part_list="company/part/manufacturer/",e.manufacturer_part_attachment_list="company/part/manufacturer/attachment/",e.manufacturer_part_parameter_list="company/part/manufacturer/parameter/",e.stock_item_list="stock/",e.stock_tracking_list="stock/track/",e.stock_location_list="stock/location/",e.stock_location_tree="stock/location/tree/",e.stock_attachment_list="stock/attachment/",e.stock_test_result_list="stock/test/",e.stock_transfer="stock/transfer/",e.stock_remove="stock/remove/",e.stock_add="stock/add/",e.stock_count="stock/count/",e.stock_change_status="stock/change_status/",e.stock_merge="stock/merge/",e.stock_assign="stock/assign/",e.stock_status="stock/status/",e.stock_install="stock/:id/install",e.purchase_order_list="order/po/",e.purchase_order_line_list="order/po-line/",e.purchase_order_attachment_list="order/po/attachment/",e.purchase_order_receive="order/po/:id/receive/",e.sales_order_list="order/so/",e.sales_order_attachment_list="order/so/attachment/",e.sales_order_shipment_list="order/so/shipment/",e.return_order_list="order/ro/",e.return_order_attachment_list="order/ro/attachment/",e.label_list="label/:variant/",e.report_list="report/:variant/",e.plugin_list="plugins/",e.plugin_setting_list="plugins/:plugin/settings/",e.plugin_registry_status="plugins/status/",e.plugin_install="plugins/install/",e.plugin_reload="plugins/reload/",e.plugin_activate="plugins/:id/activate/",e.plugin_uninstall="plugins/:id/uninstall/",e.machine_types_list="machine/types/",e.machine_driver_list="machine/drivers/",e.machine_registry_status="machine/status/",e.machine_list="machine/",e.machine_restart="machine/:machine/restart/",e.machine_setting_list="machine/:machine/settings/",e.machine_setting_detail="machine/:machine/settings/:config_type/",e.error_report_list="error-report/",e.project_code_list="project-code/",e.custom_unit_list="units/",e.ui_preference="web/ui_preference/",e))(m||{});const ze={server:null,version:null,instance:null,apiVersion:null,worker_running:null,worker_pending_tasks:null,plugins_enabled:null,plugins_install_disabled:null,active_plugins:[],email_configured:null,debug_mode:null,docker_mode:null,database:null,system_health:null,platform:null,installer:null,target:null,default_locale:null},ct=[{value:0,label:"xs"},{value:25,label:"sm"},{value:50,label:"md"},{value:75,label:"lg"},{value:100,label:"xl"}],ut=N()(F(e=>({server:ze,setServer:t=>e({server:t}),fetchServerApiState:async()=>{await f.get(g(m.api_server_info)).then(t=>{e({server:t.data})}).catch(()=>{console.error("Error fetching server info")}),await f.get(g(m.sso_providers),{headers:{Authorization:""}}).then(t=>{e({auth_settings:t.data})}).catch(()=>{console.error("Error fetching SSO information")})},status:void 0}),{name:"server-api-state",storage:B(()=>sessionStorage)}));function Ge(){return"/api/"}function g(e,t,r){let a=e;if(a.startsWith("/")||(a=Ge()+a),a&&t&&(a.indexOf(":id")>=0?a=a.replace(":id",`${t}`):a+=`${t}/`),a&&r)for(const s in r)a=a.replace(`:${s}`,`${r[s]}`);return a}const G=N()(F((e,t)=>({autoupdate:!1,toggleAutoupdate:()=>e(r=>({autoupdate:!r.autoupdate})),host:"",setHost:(r,a)=>e({host:r,hostKey:a}),hostKey:"",hostList:{},setHostList:r=>e({hostList:r}),language:"en",setLanguage:r=>e({language:r}),primaryColor:"indigo",whiteColor:"#fff",blackColor:"#000",radius:"xs",loader:"oval",lastUsedPanels:{},setLastUsedPanel:r=>a=>{t().lastUsedPanels[r]!==a&&e({lastUsedPanels:{...t().lastUsedPanels,[r]:a}})},tableColumnNames:{},getTableColumnNames:r=>t().tableColumnNames[r]||{},setTableColumnNames:r=>a=>{e({tableColumnNames:{...t().tableColumnNames,[r]:a}})},clearTableColumnNames:()=>{e({tableColumnNames:{}})},detailDrawerStack:0,addDetailDrawer:r=>{e({detailDrawerStack:r===!1?0:t().detailDrawerStack+r})}}),{name:"session-settings"}));function U(e){if(e===!0)return!0;if(e===!1)return!1;let t=String(e).trim().toLowerCase();return["true","yes","1","on","t","y"].includes(t)}const We=N((e,t)=>({settings:[],lookup:{},endpoint:m.settings_global_list,fetchSettings:async()=>{w.getState().hasToken()&&await f.get(g(m.settings_global_list)).then(r=>{e({settings:r.data,lookup:$(r.data)})}).catch(r=>{console.error("Error fetching global settings")})},getSetting:(r,a)=>t().lookup[r]??a??"",isSet:(r,a)=>{let s=t().lookup[r]??a??"false";return U(s)}})),Ke=N((e,t)=>({settings:[],lookup:{},endpoint:m.settings_user_list,fetchSettings:async()=>{w.getState().hasToken()&&await f.get(g(m.settings_user_list)).then(r=>{e({settings:r.data,lookup:$(r.data)})}).catch(r=>{console.error("Error fetching user settings")})},getSetting:(r,a)=>t().lookup[r]??a??"",isSet:(r,a)=>{let s=t().lookup[r]??a??"false";return U(s)}})),_t=({plugin:e})=>{const t={plugin:e};return ee()((r,a)=>({settings:[],lookup:{},endpoint:m.plugin_setting_list,pathParams:t,fetchSettings:async()=>{await f.get(g(m.plugin_setting_list,void 0,{plugin:e})).then(s=>{const o=s.data;r({settings:o,lookup:$(o)})}).catch(s=>{console.error(`Error fetching plugin settings for plugin ${e}`)})},getSetting:(s,o)=>a().lookup[s]??o??"",isSet:(s,o)=>{let n=a().lookup[s]??o??"false";return U(n)}}))},ft=({machine:e,configType:t})=>{const r={machine:e,config_type:t};return ee()((a,s)=>({settings:[],lookup:{},endpoint:m.machine_setting_detail,pathParams:r,fetchSettings:async()=>{await f.get(g(m.machine_setting_list,void 0,{machine:e})).then(o=>{const n=o.data.filter(i=>i.config_type===t);a({settings:n,lookup:$(n)})}).catch(o=>{console.error(`Error fetching machine settings for machine ${e} with type ${t}:`,o)})},getSetting:(o,n)=>s().lookup[o]??n??"",isSet:(o,n)=>{let i=s().lookup[o]??n??"false";return U(i)}}))};function $(e){let t={};for(let r of e)t[r.key]=r.value;return t}var v=(e=>(e.part="part",e.supplierpart="supplierpart",e.manufacturerpart="manufacturerpart",e.partcategory="partcategory",e.partparametertemplate="partparametertemplate",e.parttesttemplate="parttesttemplate",e.projectcode="projectcode",e.stockitem="stockitem",e.stocklocation="stocklocation",e.stockhistory="stockhistory",e.build="build",e.buildline="buildline",e.company="company",e.purchaseorder="purchaseorder",e.purchaseorderline="purchaseorderline",e.salesorder="salesorder",e.salesordershipment="salesordershipment",e.returnorder="returnorder",e.importsession="importsession",e.address="address",e.contact="contact",e.owner="owner",e.user="user",e))(v||{});const Qe={BuildStatus:v.build,PurchaseOrderStatus:v.purchaseorder,ReturnOrderLineStatus:v.purchaseorderline,ReturnOrderStatus:v.returnorder,SalesOrderStatus:v.salesorder,StockHistoryCode:v.stockhistory,StockStatus:v.stockitem,DataImportStatusCode:v.importsession},mt={dark:"dark",warning:"yellow",success:"green",info:"cyan",danger:"red",default:"gray"},Xe=N()(F(e=>({status:void 0,setStatus:t=>e({status:t}),fetchStatus:async()=>{w.getState().hasToken()&&await f.get(g(m.global_status)).then(t=>{const r={};for(const a in t.data)r[Qe[a]||a]=t.data[a].values;e({status:r})}).catch(()=>{console.error("Error fetching global status information")})}}),{name:"global-status-state",storage:B(()=>sessionStorage)}));var Je=(e=>(e.admin="admin",e.build="build",e.part="part",e.part_category="part_category",e.purchase_order="purchase_order",e.return_order="return_order",e.sales_order="sales_order",e.stock="stock",e.stock_location="stock_location",e.stocktake="stocktake",e))(Je||{}),D=(e=>(e.view="view",e.add="add",e.change="change",e.delete="delete",e))(D||{});const Ee=N((e,t)=>({user:void 0,username:()=>{const r=t().user;return r!=null&&r.first_name||r!=null&&r.last_name?`${r.first_name} ${r.last_name}`.trim():(r==null?void 0:r.username)??""},setUser:r=>e({user:r}),fetchUserState:async()=>{w.getState().hasToken()&&(await f.get(g(m.user_me),{timeout:2e3}).then(r=>{var s,o;const a={pk:r.data.pk,first_name:((s=r.data)==null?void 0:s.first_name)??"",last_name:((o=r.data)==null?void 0:o.last_name)??"",email:r.data.email,username:r.data.username};e({user:a})}).catch(r=>{console.error("Error fetching user data")}),await f.get(g(m.user_roles)).then(r=>{var s,o,n;const a=t().user;a&&(a.roles=((s=r.data)==null?void 0:s.roles)??{},a.is_staff=((o=r.data)==null?void 0:o.is_staff)??!1,a.is_superuser=((n=r.data)==null?void 0:n.is_superuser)??!1,e({user:a}))}).catch(r=>{console.error("Error fetching user roles")}))},checkUserRole:(r,a)=>{var o;const s=t().user;return s?s!=null&&s.is_superuser?!0:(s==null?void 0:s.roles)===void 0||(s==null?void 0:s.roles[r])===void 0||(s==null?void 0:s.roles[r])===null?!1:((o=s==null?void 0:s.roles[r])==null?void 0:o.includes(a))??!1:!1},isStaff:()=>{const r=t().user;return(r==null?void 0:r.is_staff)??!1},isSuperuser:()=>{const r=t().user;return(r==null?void 0:r.is_superuser)??!1},hasDeleteRole:r=>t().checkUserRole(r,D.delete),hasChangeRole:r=>t().checkUserRole(r,D.change),hasAddRole:r=>t().checkUserRole(r,D.add),hasViewRole:r=>t().checkUserRole(r,D.view)}));var Ye=(e=>(e.Boolean="boolean",e.Integer="integer",e.String="string",e.Choice="choice",e.Model="related field",e))(Ye||{});function Ze(){w.getState().hasToken()&&(M(),Ee.getState().fetchUserState(),Ke.getState().fetchSettings(),We.getState().fetchSettings(),Xe.getState().fetchStatus())}const w=N()(F((e,t)=>({token:void 0,clearToken:()=>{e({token:void 0})},setToken:r=>{e({token:r}),M(),Ze()},hasToken:()=>!!t().token}),{name:"session-state",storage:B(()=>sessionStorage)})),ce="inventree-web-app",dt=async(e,t)=>{const{host:r}=G.getState();e.length==0||t.length==0||(w.getState().clearToken(),await q.get(g(m.user_token),{auth:{username:e,password:t},baseURL:r,timeout:2e3,params:{name:ce}}).then(a=>{a.status==200&&a.data.token&&w.getState().setToken(a.data.token)}).catch(()=>{}))},ht=async e=>{await f.post(g(m.user_logout)).catch(()=>{e("/login")}),Ae(),w.getState().clearToken(),x.hide("login"),x.show({id:"login",title:y._({id:"Py+E6e"}),message:y._({id:"AOxl9K"}),color:"green",icon:S.jsx(le,{size:"1rem"})}),e("/login")},gt=async e=>{const{host:t}=G.getState();return await q.post(g(m.user_simple_login),{email:e},{baseURL:t,timeout:2e3}).then(a=>a.data).catch(a=>!1)};function kt(e,t){f.post(g(m.user_reset),t,{headers:{Authorization:""}}).then(r=>{r.status===200?(x.show({title:y._({id:"XAIcYu"}),message:y._({id:"eX0txO"}),color:"green",autoClose:!1}),e("/login")):x.show({title:y._({id:"WhimMi"}),message:y._({id:"tnaYa/"}),color:"red"})})}function St(e,t,r){M();const a=()=>{x.hide("login"),x.show({id:"login",title:y._({id:"bNsW3s"}),message:y._({id:"YLtp/8"}),color:"green",icon:S.jsx(le,{size:"1rem"})}),e(t??"/home")},s=()=>{w.getState().clearToken(),r||e("/login",{state:{redirectFrom:t}})};w.getState().hasToken()?f.get(g(m.user_me),{timeout:2e3}).then(o=>{o.status===200?a():s()}).catch(()=>{s()}):ue()?f.get(g(m.user_token),{params:{name:ce}}).then(o=>{o.status==200&&o.data.token?(w.getState().setToken(o.data.token),a()):s()}).catch(()=>{s()}):s()}function ue(){var t;return(t=document.cookie.split("; ").find(r=>r.startsWith("csrftoken=")))==null?void 0:t.split("=")[1]}function Ae(){document.cookie="csrftoken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}const f=q.create({});function M(){const e=G.getState().host,t=w.getState().token;f.defaults.baseURL=e,f.defaults.timeout=2500,f.defaults.headers.common.Authorization=t?`Token ${t}`:void 0,ue()?(f.defaults.withCredentials=!0,f.defaults.xsrfCookieName="csrftoken",f.defaults.xsrfHeaderName="X-CSRFToken"):(f.defaults.withCredentials=!1,f.defaults.xsrfCookieName=void 0,f.defaults.xsrfHeaderName=void 0)}const wt=new de;function et(){return S.jsx(he,{children:S.jsx(ge,{children:S.jsx(ke,{})})})}const W=e=>t=>S.jsx(C.Suspense,{fallback:S.jsx(et,{}),children:S.jsx(e,{...t})});function bt({item:e}){const t=W(e);return S.jsx(t,{})}function tt(){const{height:e,width:t}=Se();return t<425||e<425}const rt=W(C.lazy(()=>te(()=>import("./MobileAppView-DQKSIdZ4.js"),__vite__mapDeps([0,1,2,3,4])))),at=W(C.lazy(()=>te(()=>import("./DesktopAppView-DlNUv0Ur.js").then(e=>e.D),__vite__mapDeps([5,1,2]))));function st(){return C.useEffect(()=>{M()},[]),tt()?S.jsx(rt,{}):S.jsx(at,{})}var ot={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const vt=!1,_e=ot.VITE_DEMO==="true",A=_e;let I=window.INVENTREE_SETTINGS||{};Object.keys(I).forEach(e=>{(I[e]===void 0||e==="server_list"&&I[e].length===0)&&delete I[e]});window.INVENTREE_SETTINGS={server_list:{"mantine-cqj63coxn":{host:`${window.location.origin}/`,name:"Current Server"},...A?{"mantine-u56l5jt85":{host:"https://demo.inventree.org/",name:"InvenTree Demo"}}:{}},default_server:_e?"mantine-u56l5jt85":"mantine-cqj63coxn",show_server_selector:A,...I};window.INVENTREE_SETTINGS.sentry_dsn&&(console.log("Sentry enabled"),we({dsn:window.INVENTREE_SETTINGS.sentry_dsn,tracesSampleRate:1,environment:window.INVENTREE_SETTINGS.environment||"default"}));const nt=window.INVENTREE_SETTINGS.base_url||"platform";be.createRoot(document.getElementById("root")).render(S.jsx(ve.StrictMode,{children:S.jsx(st,{})}));window.location.pathname==="/"&&window.location.replace(`/${nt}`);export{m as A,dt as B,gt as C,St as D,M as E,kt as F,A as I,W as L,v as M,ct as S,Je as U,te as _,Ee as a,We as b,Ke as c,w as d,nt as e,lt as f,qe as g,ut as h,y as i,f as j,Ze as k,g as l,ht as m,x as n,Xe as o,mt as p,wt as q,bt as r,Ue as s,le as t,G as u,U as v,vt as w,Ye as x,_t as y,ft as z};
