import{j as a,ae as y,S as w,J as I,h as c,E as T,aa as A,a1 as B,r as o,a4 as x,A as m,aJ as b,I as F,a5 as E}from"./vendor-C5fHLTDD.js";import{i as _,l as v,j as k,e as P,A as f,b as V}from"./index-DX4YmBvQ.js";import{a as d}from"./ApiForm-Dtyf-xF2.js";import{g as D}from"./InvenTreeTable-LkhQVMZE.js";import{P as $}from"./ProgressBar-BhbAlmdB.js";import{S as q}from"./StylishText-CD9I8-X7.js";import{Y as C}from"./YesNoButton-DIAHIY63.js";import{g as L}from"./ModelType-C8nSW6qW.js";import{S as N}from"./Instance-c0njg-mI.js";function j({pk:e,type:t}){const{data:l}=b({queryKey:["badge",t,e],queryFn:async()=>{let i="";switch(t){case"owner":i=f.owner_list;break;case"user":i=f.user_list;break;case"group":i=f.group_list;break}const u=v(i,e);return k.get(u).then(s=>{switch(s.status){case 200:return s.data;default:return null}}).catch(()=>null)}}),n=V();function r(){return t==="user"&&n.isSet("DISPLAY_FULL_NAMES")?l.first_name||l.last_name?`${l.first_name} ${l.last_name}`:l.username:t==="user"?l.username:l.name}return a.jsx(o.Suspense,{fallback:a.jsx(x,{width:200,height:20,radius:"xl"}),children:a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx(F,{color:"dark",variant:"filled",style:{display:"flex",alignItems:"center"},children:l.name??r()}),a.jsx(d,{icon:t==="user"?t:l.label})]})})}function g(e){var l,n,r,i;let t=e==null?void 0:e.field_value;return t===void 0?"---":((l=e.field_data)!=null&&l.value_formatter&&(t=e.field_data.value_formatter()),(n=e.field_data)!=null&&n.badge?a.jsx(j,{pk:t,type:e.field_data.badge}):a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",wordBreak:"break-word",alignItems:"flex-start"},children:[a.jsx(o.Suspense,{fallback:a.jsx(x,{width:200,height:20,radius:"xl"}),children:a.jsxs("span",{children:[t||((r=e.field_data)==null?void 0:r.unit)&&"0"," ",e.field_data.unit==!0&&e.unit]})}),e.field_data.user&&a.jsx(j,{pk:(i=e.field_data)==null?void 0:i.user,type:"user"})]}))}function U(e){return a.jsx(C,{value:e.field_value})}function G(e){var i,u;if(e.field_data.external)return a.jsx(m,{href:`${e.field_value}`,target:"_blank",rel:"noreferrer noopener",children:a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"3px"},children:[a.jsx(c,{children:e.field_value}),a.jsx(d,{icon:"external",iconProps:{size:15}})]})});const{data:t}=b({queryKey:["detail",e.field_data.model,e.field_value],queryFn:async()=>{const s=L(e.field_data.model);if(!(s!=null&&s.api_endpoint))return{};const S=v(s.api_endpoint,e.field_value);return k.get(S).then(h=>{switch(h.status){case 200:return h.data;default:return null}}).catch(()=>null)}}),l=o.useMemo(()=>D(e.field_data.model,e.field_value),[e.field_data.model,e.field_value]);let n=((i=e.field_data)==null?void 0:i.link)??!0,r;return e.field_data.model_formatter?r=e.field_data.model_formatter(t)??r:e.field_data.model_field?r=(t==null?void 0:t[e.field_data.model_field])??r:r=t==null?void 0:t.name,r===void 0&&(r=(t==null?void 0:t.name)??((u=e.field_data)==null?void 0:u.backup_value)??"No name defined",n=!1),a.jsx(o.Suspense,{fallback:a.jsx(x,{width:200,height:20,radius:"xl"}),children:n?a.jsx(m,{href:`/${P}${l}`,target:t!=null&&t.external?"_blank":void 0,rel:t!=null&&t.external?"noreferrer noopener":void 0,children:a.jsx(c,{children:r})}):a.jsx(c,{children:r})})}function M(e){return a.jsx($,{value:e.field_data.progress,maximum:e.field_data.total,progressLabel:!0})}function Y(e){return a.jsx(N,{type:e.field_data.model,status:e.field_value})}function z({value:e}){return a.jsx(T,{value:e,children:({copied:t,copy:l})=>a.jsx(A,{label:t?_._({id:"6V3Ea3"}):_._({id:"he3ygx"}),withArrow:!0,children:a.jsx(B,{color:t?"teal":"gray",onClick:l,children:t?a.jsx(d,{icon:"check"}):a.jsx(d,{icon:"copy"})})})})}function J({item:e,field:t}){function l(r){switch(r){case"text":case"string":return g;case"boolean":return U;case"link":return G;case"progressbar":return M;case"status":return Y;default:return g}}const n=l(t.type);return a.jsxs("tr",{style:{verticalAlign:"top"},children:[a.jsx("td",{style:{gap:"20px",width:"50"},children:a.jsx(d,{icon:t.icon??t.name})}),a.jsx("td",{style:{minWidth:"25%",maxWidth:"65%"},children:a.jsx(c,{children:t.label})}),a.jsx("td",{style:{width:"100%"},children:a.jsx(n,{field_data:t,field_value:e[t.name]})}),a.jsx("td",{style:{width:"50"},children:t.copy&&a.jsx(z,{value:e[t.name]})})]})}function ee({item:e,fields:t,title:l}){return a.jsx(y,{p:"xs",withBorder:!0,radius:"xs",children:a.jsxs(w,{spacing:"xs",children:[l&&a.jsx(q,{size:"lg",children:l}),a.jsx(I,{striped:!0,children:a.jsx("tbody",{children:t.filter(n=>!n.hidden).map((n,r)=>a.jsx(J,{field:n,item:e},r))})})]})})}function ae(e){return a.jsx(y,{p:"xs",children:a.jsx(E,{cols:2,spacing:"xs",verticalSpacing:"xs",children:e.children})})}export{ee as D,ae as I};
