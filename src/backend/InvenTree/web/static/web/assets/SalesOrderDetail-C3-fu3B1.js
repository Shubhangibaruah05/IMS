import{r as d,j as e,a4 as c,aK as n,S as g,z as j}from"./vendor-C5fHLTDD.js";import{g as f,A as i,i as a,M as l,U as k,l as I}from"./index-DX4YmBvQ.js";import{I as v,D as r}from"./ItemDetails-DTEWr5C0.js";import{D as C}from"./DetailsImage-Y3z_v9dS.js";import{P}from"./PageDetail-BwkjpKwR.js";import{P as D}from"./PanelGroup-CWuySmV8.js";import{N as F}from"./MarkdownEditor-CY0oiYAG.js";import{u as T}from"./UseInstance-rwUPjJ4i.js";import{B as A}from"./BuildOrderTable-DzfedSzv.js";import{A as E}from"./AttachmentTable-AC0GadOO.js";import{d as M}from"./DesktopAppView-DlNUv0Ur.js";import{I as U}from"./IconInfoCircle-D5K91YCo.js";import{x as S,d as N,E as z,f as B,g as K}from"./ApiForm-Dtyf-xF2.js";import"./InvenTreeTable-LkhQVMZE.js";import"./ActionButton-seel8ZoK.js";import"./notifications-DM-9a7Is.js";import"./ModelType-C8nSW6qW.js";import"./StylishText-CD9I8-X7.js";import"./IconEdit-DwKL16RF.js";import"./IconTrash-KFql82qv.js";import"./BaseContext-BGXKB9QI.js";import"./IconSearch-CKaD9XHL.js";import"./IconRefresh-ClXNAr2V.js";import"./ProgressBar-BhbAlmdB.js";import"./YesNoButton-DIAHIY63.js";import"./Instance-c0njg-mI.js";import"./index-DtVngfXu.js";import"./Placeholder-C1-1kY0o.js";import"./AddItemButton-BjrbTsCx.js";import"./IconPlus-QsNVBJ5N.js";import"./ColumnRenderers-Dz-jxqgo.js";import"./UseForm-Btt47jru.js";import"./IconFileTypePdf-ST3WfDb7.js";import"./IconExternalLink-CDh1KHXW.js";import"./IconQrcode-DcoHpd2K.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var L=f("outline","truck-loading","IconTruckLoading",[["path",{d:"M2 3h1a2 2 0 0 1 2 2v10a2 2 0 0 0 2 2h15",key:"svg-0"}],["path",{d:"M9 6m0 3a3 3 0 0 1 3 -3h4a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-4a3 3 0 0 1 -3 -3z",key:"svg-1"}],["path",{d:"M9 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M18 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}]]);function fe(){var m;const{id:s}=M(),{instance:t,instanceQuery:o}=T({endpoint:i.sales_order_list,pk:s,params:{customer_detail:!0}}),u=d.useMemo(()=>{var p;if(o.isFetching)return e.jsx(c,{});let x=[{type:"text",name:"reference",label:a._({id:"N2C89m"}),copy:!0},{type:"text",name:"customer_reference",label:a._({id:"ZVUe1A"}),copy:!0,hidden:!t.customer_reference},{type:"link",name:"customer",icon:"customers",label:a._({id:"876pfE"}),model:l.company},{type:"text",name:"description",label:a._({id:"Nu4oKW"}),copy:!0},{type:"status",name:"status",label:a._({id:"uAQUqI"}),model:l.salesorder}],b=[{type:"text",name:"line_items",label:a._({id:"SgduFH"}),icon:"list"},{type:"progressbar",name:"completed",icon:"progress",label:a._({id:"qgs95u"}),total:t.line_items,progress:t.completed_lines},{type:"progressbar",name:"shipments",icon:"shipment",label:a._({id:"polrQd"}),total:t.shipments,progress:t.completed_shipments},{type:"text",name:"currency",label:a._({id:"9j2hXW"})},{type:"text",name:"total_cost",label:a._({id:"A6C0pv"})}],h=[{type:"link",external:!0,name:"link",label:a._({id:"yzF66j"}),copy:!0,hidden:!t.link},{type:"link",model:l.contact,link:!1,name:"contact",label:a._({id:"jfC/xh"}),icon:"user",copy:!0,hidden:!t.contact}],y=[{type:"text",name:"creation_date",label:a._({id:"x9P/+F"}),icon:"calendar"},{type:"text",name:"target_date",label:a._({id:"ZmykKo"}),icon:"calendar",hidden:!t.target_date},{type:"text",name:"responsible",label:a._({id:"XQACoK"}),badge:"owner",hidden:!t.responsible}];return e.jsxs(v,{children:[e.jsxs(n,{children:[e.jsx(n.Col,{span:4,children:e.jsx(C,{appRole:k.purchase_order,apiPath:i.company_list,src:(p=t.customer_detail)==null?void 0:p.image,pk:t.customer})}),e.jsx(n.Col,{span:8,children:e.jsx(r,{fields:x,item:t})})]}),e.jsx(r,{fields:b,item:t}),e.jsx(r,{fields:h,item:t}),e.jsx(r,{fields:y,item:t})]})},[t,o]),_=d.useMemo(()=>[{name:"detail",label:a._({id:"Tol4BF"}),icon:e.jsx(U,{}),content:u},{name:"line-items",label:a._({id:"SgduFH"}),icon:e.jsx(S,{})},{name:"pending-shipments",label:a._({id:"qC/FEC"}),icon:e.jsx(L,{})},{name:"completed-shipments",label:a._({id:"polrQd"}),icon:e.jsx(N,{})},{name:"build-orders",label:a._({id:"RCVhIP"}),icon:e.jsx(z,{}),content:t!=null&&t.pk?e.jsx(A,{salesOrderId:t.pk}):e.jsx(c,{})},{name:"attachments",label:a._({id:"w/Sphq"}),icon:e.jsx(B,{}),content:e.jsx(E,{endpoint:i.sales_order_attachment_list,model:"order",pk:Number(s)})},{name:"notes",label:a._({id:"1DBGsz"}),icon:e.jsx(K,{}),content:e.jsx(F,{url:I(i.sales_order_list,s),data:t.notes??"",allowEdit:!0})}],[t,s]);return e.jsx(e.Fragment,{children:e.jsxs(g,{spacing:"xs",children:[e.jsx(j,{visible:o.isFetching}),e.jsx(P,{title:a._({id:"LozYBo"})+`: ${t.reference}`,subtitle:t.description,imageUrl:(m=t.customer_detail)==null?void 0:m.image,breadcrumbs:[{name:a._({id:"mUv9U4"}),url:"/sales/"}]}),e.jsx(D,{pageKey:"salesorder",panels:_})]})})}export{fe as default};
