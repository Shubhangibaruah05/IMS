import{U as pt,r as a}from"./vendor-C5fHLTDD.js";var wt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var i,s,n;if(Array.isArray(t)){if(i=t.length,i!=r.length)return!1;for(s=i;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(n=Object.keys(t),i=n.length,i!==Object.keys(r).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[s]))return!1;for(s=i;s--!==0;){var u=n[s];if(!e(t[u],r[u]))return!1}return!0}return t!==t&&r!==r};const C=pt(wt);function gt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const St=typeof window<"u"?a.useLayoutEffect:a.useEffect;function m(e,t){St(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function At(e,t){e&&gt(e),m(`mantine-form:${e}:set-field-value`,r=>t.setFieldValue(r.detail.path,r.detail.value)),m(`mantine-form:${e}:set-values`,r=>t.setValues(r.detail)),m(`mantine-form:${e}:set-initial-values`,r=>t.setInitialValues(r.detail)),m(`mantine-form:${e}:set-errors`,r=>t.setErrors(r.detail)),m(`mantine-form:${e}:set-field-error`,r=>t.setFieldError(r.detail.path,r.detail.error)),m(`mantine-form:${e}:clear-field-error`,r=>t.clearFieldError(r.detail)),m(`mantine-form:${e}:clear-errors`,t.clearErrors),m(`mantine-form:${e}:reset`,t.reset),m(`mantine-form:${e}:validate`,t.validate),m(`mantine-form:${e}:validate-field`,r=>t.validateField(r.detail)),m(`mantine-form:${e}:reorder-list-item`,r=>t.reorderListItem(r.detail.path,r.detail.payload)),m(`mantine-form:${e}:remove-list-item`,r=>t.removeListItem(r.detail.path,r.detail.index)),m(`mantine-form:${e}:insert-list-item`,r=>t.insertListItem(r.detail.path,r.detail.item,r.detail.index)),m(`mantine-form:${e}:set-dirty`,r=>t.setDirty(r.detail)),m(`mantine-form:${e}:set-touched`,r=>t.setTouched(r.detail)),m(`mantine-form:${e}:reset-dirty`,r=>t.resetDirty(r.detail)),m(`mantine-form:${e}:reset-touched`,t.resetTouched)}function K(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,r)=>{const i=e[r];return i!=null&&i!==!1&&(t[r]=i),t},{})}function kt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:r}=t;r instanceof HTMLInputElement?r.type==="checkbox"?e(r.checked):e(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&e(r.value)}else e(t)}}function h(e,t){const r=Object.keys(e);if(typeof t=="string"){const i=r.filter(s=>s.startsWith(`${t}.`));return e[t]||i.some(s=>e[s])||!1}return r.some(i=>e[i])}function ot(e,t){if(t===null||typeof t!="object")return{};const r={...t};return Object.keys(t).forEach(i=>{i.includes(`${String(e)}.`)&&delete r[i]}),r}function x(e,t){const r=e.substring(t.length+1).split(".")[0];return parseInt(r,10)}function V(e,t,r,i){if(t===void 0)return r;const s=`${String(e)}`;let n=r;i===-1&&(n=ot(`${s}.${t}`,n));const u={...n},y=new Set;return Object.entries(n).filter(([f])=>{if(!f.startsWith(`${s}.`))return!1;const E=x(f,s);return Number.isNaN(E)?!1:E>=t}).forEach(([f,E])=>{const $=x(f,s),j=f.replace(`${s}.${$}`,`${s}.${$+i}`);u[j]=E,y.add(j),y.has(f)||delete u[f]}),u}function Dt(e,{from:t,to:r},i){const s=`${e}.${t}`,n=`${e}.${r}`,u={...i};return Object.keys(i).every(y=>{let f,E;if(y.startsWith(s)&&(f=y,E=y.replace(s,n)),y.startsWith(n)&&(f=y.replace(n,s),E=y),f&&E){const $=u[f],j=u[E];return j===void 0?delete u[f]:u[f]=j,$===void 0?delete u[E]:u[E]=$,!1}return!0}),u}function st(e){return typeof e!="string"?[]:e.split(".")}function p(e,t){const r=st(e);if(r.length===0||typeof t!="object"||t===null)return;let i=t[r[0]];for(let s=1;s<r.length&&i!==void 0;s+=1)i=i[r[s]];return i}function tt(e,t,r){typeof r.value=="object"&&(r.value=k(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||t==="__proto__"?Object.defineProperty(e,t,r):e[t]=r.value}function k(e){if(typeof e!="object")return e;var t=0,r,i,s,n=Object.prototype.toString.call(e);if(n==="[object Object]"?s=Object.create(e.__proto__||null):n==="[object Array]"?s=Array(e.length):n==="[object Set]"?(s=new Set,e.forEach(function(u){s.add(k(u))})):n==="[object Map]"?(s=new Map,e.forEach(function(u,y){s.set(k(y),k(u))})):n==="[object Date]"?s=new Date(+e):n==="[object RegExp]"?s=new RegExp(e.source,e.flags):n==="[object DataView]"?s=new e.constructor(k(e.buffer)):n==="[object ArrayBuffer]"?s=e.slice(0):n.slice(-6)==="Array]"&&(s=new e.constructor(e)),s){for(i=Object.getOwnPropertySymbols(e);t<i.length;t++)tt(s,i[t],Object.getOwnPropertyDescriptor(e,i[t]));for(t=0,i=Object.getOwnPropertyNames(e);t<i.length;t++)Object.hasOwnProperty.call(s,r=i[t])&&s[r]===e[r]||tt(s,r,Object.getOwnPropertyDescriptor(e,r))}return s||e}function N(e,t,r){const i=st(e);if(i.length===0)return r;const s=k(r);if(i.length===1)return s[i[0]]=t,s;let n=s[i[0]];for(let u=1;u<i.length-1;u+=1){if(n===void 0)return s;n=n[i[u]]}return n[i[i.length-1]]=t,s}function Ft(e,{from:t,to:r},i){const s=p(e,i);if(!Array.isArray(s))return i;const n=[...s],u=s[t];return n.splice(t,1),n.splice(r,0,u),N(e,n,i)}function Pt(e,t,r,i){const s=p(e,i);if(!Array.isArray(s))return i;const n=[...s];return n.splice(typeof r=="number"?r:n.length,0,t),N(e,n,i)}function _t(e,t,r){const i=p(e,r);return Array.isArray(i)?N(e,i.filter((s,n)=>n!==t),r):r}function et(e){const t=K(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function X(e,t,r="",i={}){return typeof e!="object"||e===null?i:Object.keys(e).reduce((s,n)=>{const u=e[n],y=`${r===""?"":`${r}.`}${n}`,f=p(y,t);let E=!1;return typeof u=="function"&&(s[y]=u(f,t,y)),typeof u=="object"&&Array.isArray(f)&&(E=!0,f.forEach(($,j)=>X(u,t,`${y}.${j}`,s))),typeof u=="object"&&typeof f=="object"&&f!==null&&(E||X(u,t,y,s)),s},i)}function U(e,t){return et(typeof e=="function"?e(t):X(e,t))}function T(e,t,r){if(typeof e!="string")return{hasError:!1,error:null};const i=U(t,r),s=Object.keys(i.errors).find(n=>e.split(".").every((u,y)=>u===n.split(".")[y]));return{hasError:!!s,error:s?i.errors[s]:null}}const It="__MANTINE_FORM_INDEX__";function rt(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${It}`)):!1:!1}function Lt({name:e,initialValues:t,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:n=!0,validateInputOnChange:u=!1,validateInputOnBlur:y=!1,onValuesChange:f,transformValues:E=F=>F,enhanceGetInputProps:$,validate:j}={}){const[F,P]=a.useState(s),[M,_]=a.useState(i),[b,g]=a.useState(t||{}),[Z,S]=a.useState(K(r)),[z,it]=a.useState(!1),I=a.useRef(t||{}),W=o=>{I.current=o},nt=a.useCallback(o=>{z||(it(!0),g(o),W(o))},[z]),J=a.useCallback(()=>P({}),[]),ct=o=>{const c=o?{...b,...o}:b;W(c),_({})},q=a.useCallback(o=>S(c=>K(typeof o=="function"?o(c):o)),[]),H=a.useCallback(()=>S({}),[]),Q=a.useCallback(()=>{g(I.current),H(),_({}),J()},[]),D=a.useCallback((o,c)=>q(l=>({...l,[o]:c})),[]),v=a.useCallback(o=>q(c=>{if(typeof o!="string")return c;const l={...c};return delete l[o],l}),[]),L=a.useCallback(o=>_(c=>{if(typeof o!="string")return c;const l=ot(o,c);return delete l[o],l}),[]),Y=a.useCallback((o,c)=>{const l=rt(o,u);L(o),P(d=>({...d,[o]:!0})),g(d=>{const w=p(o,d),R=N(o,c instanceof Function?c(w):c,d);if(l){const O=T(o,j,R);O.hasError?D(o,O.error):v(o)}return f==null||f(R,d),R}),!l&&n&&D(o,null)},[f]),ft=a.useCallback(o=>{g(c=>{const l=o instanceof Function?o(c):o,d={...c,...l};return f==null||f(d,c),d}),n&&H()},[f]),lt=a.useCallback((o,c)=>{L(o),g(l=>{const d=Ft(o,c,l);return f==null||f(d,l),d}),S(l=>Dt(o,c,l))},[]),ut=a.useCallback((o,c)=>{L(o),g(l=>{const d=_t(o,c,l);return f==null||f(d,l),d}),S(l=>V(o,c,l,-1))},[]),dt=a.useCallback((o,c,l)=>{L(o),g(d=>{const w=Pt(o,c,l,d);return f==null||f(w,d),w}),S(d=>V(o,l,d,1))},[]),G=a.useCallback(()=>{const o=U(j,b);return S(o.errors),o},[b,j]),at=a.useCallback(o=>{const c=T(o,j,b);return c.hasError?D(o,c.error):v(o),c},[b,j]),yt=(o,{type:c="input",withError:l=!0,withFocus:d=!0,...w}={})=>{const O={onChange:kt(A=>Y(o,A))};return l&&(O.error=Z[o]),c==="checkbox"?O.checked=p(o,b):O.value=p(o,b),d&&(O.onFocus=()=>P(A=>({...A,[o]:!0})),O.onBlur=()=>{if(rt(o,y)){const A=T(o,j,b);A.hasError?D(o,A.error):v(o)}}),Object.assign(O,$==null?void 0:$({inputProps:O,field:o,options:{type:c,withError:l,withFocus:d,...w},form:B}))},bt=(o,c)=>l=>{l==null||l.preventDefault();const d=G();d.hasErrors?c==null||c(d.errors,b,l):o==null||o(E(b),l)},Et=o=>E(o||b),jt=a.useCallback(o=>{o.preventDefault(),Q()},[]),mt=o=>{if(o){const l=p(o,M);if(typeof l=="boolean")return l;const d=p(o,b),w=p(o,I.current);return!C(d,w)}return Object.keys(M).length>0?h(M):!C(b,I.current)},$t=a.useCallback(o=>h(F,o),[F]),Ot=a.useCallback(o=>o?!T(o,j,b).hasError:!U(j,b).hasErrors,[b,j]),B={initialized:z,values:b,errors:Z,initialize:nt,setValues:ft,setInitialValues:W,setErrors:q,setFieldValue:Y,setFieldError:D,clearFieldError:v,clearErrors:H,reset:Q,validate:G,validateField:at,reorderListItem:lt,removeListItem:ut,insertListItem:dt,getInputProps:yt,onSubmit:bt,onReset:jt,isDirty:mt,isTouched:$t,setTouched:P,setDirty:_,resetTouched:J,resetDirty:ct,isValid:Ot,getTransformedValues:Et};return At(e,B),B}export{Lt as u};
