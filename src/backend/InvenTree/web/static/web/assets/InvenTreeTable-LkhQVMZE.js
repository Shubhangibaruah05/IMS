import{r as u,V as ze,s as Pr,j as r,B as Y,h as Z,aY as Tr,aZ as Mr,a_ as At,J as Ar,P as zr,R as Or,C as ve,o as V,G as ie,aA as Ce,a8 as Nr,a1 as se,S as we,ad as Xe,L as _r,a2 as _,D as Ue,a$ as $r,b0 as vt,b1 as Fr,b2 as ye,ae as zt,a3 as Vr,Y as Er,as as Ot,b3 as Dr,af as Hr,b4 as Wr,b5 as Ct,b6 as Ye,aa as ce,a7 as Lr,H as Nt,I as Br,an as _t,ao as wt,ab as Qr,ac as Kr,F as yt,a9 as Ur,K as Yr,ag as qr,z as Jr}from"./vendor-C5fHLTDD.js";import{g as Ge,i as v,o as Xr,u as Gr,j as Ke,s as jt,e as Zr}from"./index-DX4YmBvQ.js";import{A as eo}from"./ActionButton-seel8ZoK.js";import{h as to,s as ro,t as oo,v as no}from"./ApiForm-Dtyf-xF2.js";import{M as so}from"./ModelType-C8nSW6qW.js";import{S as ao}from"./StylishText-CD9I8-X7.js";import{n as lo}from"./notifications-DM-9a7Is.js";import{I as io}from"./IconEdit-DwKL16RF.js";import{I as $t}from"./IconTrash-KFql82qv.js";import{b as co,m as uo}from"./BaseContext-BGXKB9QI.js";import{I as ho}from"./IconSearch-CKaD9XHL.js";import{u as go}from"./DesktopAppView-DlNUv0Ur.js";import{I as po}from"./IconRefresh-ClXNAr2V.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mo=Ge("outline","adjustments","IconAdjustments",[["path",{d:"M4 10a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M6 4v4",key:"svg-1"}],["path",{d:"M6 12v8",key:"svg-2"}],["path",{d:"M10 16a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-3"}],["path",{d:"M12 4v10",key:"svg-4"}],["path",{d:"M12 18v2",key:"svg-5"}],["path",{d:"M16 7a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-6"}],["path",{d:"M18 4v1",key:"svg-7"}],["path",{d:"M18 9v11",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fo=Ge("outline","barcode","IconBarcode",[["path",{d:"M4 7v-1a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 17v1a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-1",key:"svg-3"}],["path",{d:"M5 11h1v2h-1z",key:"svg-4"}],["path",{d:"M10 11l0 2",key:"svg-5"}],["path",{d:"M14 11h1v2h-1z",key:"svg-6"}],["path",{d:"M19 11l0 2",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bo=Ge("outline","download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xo=Ge("outline","filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]);function ko(e,t){const o=so[e];return t==null?"":t&&o&&o.url_detail?o.url_detail.replace(":pk",t.toString()):(console.error(`No detail URL found for model ${e} <${t}>`),"")}function St(e){var t;e==null||e.preventDefault(),e==null||e.stopPropagation(),(t=e==null?void 0:e.nativeEvent)==null||t.stopImmediatePropagation()}function fs(e){function t(){return`${e}-${Pr()}`}const[o,n]=u.useState(t()),s=u.useCallback(()=>{n(t())},[]),[a,i]=ze({key:`inventree-table-filters-${e}`,defaultValue:[],getInitialValueInEffect:!1}),l=u.useCallback(()=>{i([])},[]),[c,p]=u.useState([]),[g,d]=u.useState([]),m=u.useCallback(()=>{d([])},[]),[h,f]=u.useState(0),[j,S]=u.useState(1),[w,R]=ze({key:`inventree-hidden-table-columns-${e}`,defaultValue:[]}),[P,A]=u.useState(""),[I,z]=u.useState([]),D=u.useCallback(T=>{let F=[...I];const B=F.findIndex(Q=>Q.pk===T.pk);B>=0?F[B]=T:F.push(T),z(F)},[I]);return{tableKey:o,refreshTable:s,activeFilters:a,setActiveFilters:i,clearActiveFilters:l,expandedRecords:c,setExpandedRecords:p,selectedRecords:g,setSelectedRecords:d,clearSelectedRecords:m,hiddenColumns:w,setHiddenColumns:R,searchTerm:P,setSearchTerm:A,recordCount:h,setRecordCount:f,page:j,setPage:S,records:I,setRecords:z,updateRecord:D}}var vo=Object.create,Ft=Object.defineProperty,Co=Object.getOwnPropertyDescriptor,wo=Object.getOwnPropertyNames,yo=Object.getPrototypeOf,jo=Object.prototype.hasOwnProperty,So=(e,t)=>()=>(e&&(t=e(e=0)),t),it=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ro=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of wo(t))!jo.call(e,s)&&s!==o&&Ft(e,s,{get:()=>t[s],enumerable:!(n=Co(t,s))||n.enumerable});return e},Io=(e,t,o)=>(o=e!=null?vo(yo(e)):{},Ro(t||!e||!e.__esModule?Ft(o,"default",{value:e,enumerable:!0}):o,e)),x=So(()=>{}),Po=it((e,t)=>{x();var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=o}),To=it((e,t)=>{x();var o=Po();function n(){}function s(){}s.resetWarningCache=n,t.exports=function(){function a(c,p,g,d,m,h){if(h!==o){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}a.isRequired=a;function i(){return a}var l={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:i,element:a,elementType:a,instanceOf:i,node:a,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:s,resetWarningCache:n};return l.PropTypes=l,l}}),Mo=it((e,t)=>{x(),t.exports=To()()});x();x();x();x();x();x();function Ao(e){let t=u.createContext(null);return[({children:o,value:n})=>Or.createElement(t.Provider,{value:n},o),()=>{let o=u.useContext(t);if(o===null)throw new Error(e);return o}]}var[zo,Vt]=Ao("useDataTableDragToggleColumnsContext must be used within DataTableDragToggleColumnOrdersProvider"),Oo=e=>{let{children:t,columnsOrder:o,setColumnsOrder:n,columnsToggle:s,setColumnsToggle:a,resetColumnsOrder:i,resetColumnsToggle:l,setColumnWidth:c,resetColumnsWidth:p}=e,[g,d]=u.useState(""),[m,h]=u.useState("");return r.jsx(zo,{value:{sourceColumn:g,setSourceColumn:d,targetColumn:m,setTargetColumn:h,columnsToggle:s,setColumnsToggle:a,swapColumns:()=>{if(!o||!n||!g||!m)return;let f=o.indexOf(g),j=o.indexOf(m);if(f!==-1&&j!==-1){let S=o.splice(f,1)[0];o.splice(j,0,S),n([...o])}},resetColumnsOrder:i,resetColumnsToggle:l,setColumnWidth:c,resetColumnsWidth:p},children:t})};x();var No=V({root:{"&&":{background:"transparent",":last-of-type td":{borderBottom:"none"}}}});function _o(){let{classes:e}=No();return r.jsx("tr",{className:e.root,children:r.jsx("td",{})})}x();x();x();var fe=Io(Mo());x();var $o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},Fo=Object.defineProperty,Vo=Object.defineProperties,Eo=Object.getOwnPropertyDescriptors,qe=Object.getOwnPropertySymbols,Et=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable,Rt=(e,t,o)=>t in e?Fo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,It=(e,t)=>{for(var o in t||(t={}))Et.call(t,o)&&Rt(e,o,t[o]);if(qe)for(var o of qe(t))Dt.call(t,o)&&Rt(e,o,t[o]);return e},Do=(e,t)=>Vo(e,Eo(t)),Ho=(e,t)=>{var o={};for(var n in e)Et.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&qe)for(var n of qe(e))t.indexOf(n)<0&&Dt.call(e,n)&&(o[n]=e[n]);return o},je=(e,t,o)=>{let n=u.forwardRef((s,a)=>{var i=s,{color:l="currentColor",size:c=24,stroke:p=2,children:g}=i,d=Ho(i,["color","size","stroke","children"]);return u.createElement("svg",It(Do(It({ref:a},$o),{width:c,height:c,stroke:l,strokeWidth:p,className:`tabler-icon tabler-icon-${e}`}),d),[...o.map(([m,h])=>u.createElement(m,h)),...g||[]])});return n.propTypes={color:fe.default.string,size:fe.default.oneOfType([fe.default.string,fe.default.number]),stroke:fe.default.oneOfType([fe.default.string,fe.default.number])},n.displayName=`${t}`,n};x();var Wo=je("arrow-up","IconArrowUp",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]]);x();var Lo=je("arrows-vertical","IconArrowsVertical",[["path",{d:"M8 7l4 -4l4 4",key:"svg-0"}],["path",{d:"M8 17l4 4l4 -4",key:"svg-1"}],["path",{d:"M12 3l0 18",key:"svg-2"}]]);x();var Bo=je("database-off","IconDatabaseOff",[["path",{d:"M12.983 8.978c3.955 -.182 7.017 -1.446 7.017 -2.978c0 -1.657 -3.582 -3 -8 -3c-1.661 0 -3.204 .19 -4.483 .515m-2.783 1.228c-.471 .382 -.734 .808 -.734 1.257c0 1.22 1.944 2.271 4.734 2.74",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c.986 0 1.93 -.067 2.802 -.19m3.187 -.82c1.251 -.53 2.011 -1.228 2.011 -1.99v-6",key:"svg-1"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c3.217 0 5.991 -.712 7.261 -1.74m.739 -3.26v-4",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);x();var Qo=je("filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]);x();var Ko=je("grip-vertical","IconGripVertical",[["path",{d:"M9 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M9 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M9 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M15 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M15 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M15 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);x();var Uo=je("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]),Yo=V(e=>({root:{position:"absolute",top:0,right:0,bottom:0,left:0,flexDirection:"column",pointerEvents:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[6],opacity:0,transition:"opacity .15s ease"},active:{opacity:1},standardIcon:{fontSize:0,borderRadius:"50%",padding:e.spacing.xs,background:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}}));function qo({icon:e,text:t,pt:o,pb:n,active:s,children:a}){let{classes:i,cx:l}=Yo();return r.jsx(ve,{pt:o,pb:n,className:l(i.root,{[i.active]:s}),children:a||r.jsxs(r.Fragment,{children:[e||r.jsx("div",{className:i.standardIcon,children:r.jsx(Bo,{})}),r.jsx(Z,{size:"sm",color:"dimmed",children:t})]})})}x();x();x();x();function Jo(e,t){let o=()=>{t(e.map(s=>s.matches))},n=e.map(s=>{try{return s.addEventListener("change",o),()=>s.removeEventListener("change",o)}catch{return s.addListener(o),()=>s.removeListener(o)}});return()=>{n.forEach(s=>s())}}function Xo(e,t){return t||(typeof window<"u"&&"matchMedia"in window?e.map(o=>window.matchMedia(o).matches):e.map(()=>!1))}function Go(e,t,{getInitialValueInEffect:o}={getInitialValueInEffect:!0}){let[n,s]=u.useState(o?t:Xo(e,t)),a=u.useRef();return u.useEffect(()=>{if("matchMedia"in window)return a.current=e.map(i=>window.matchMedia(i)),s(a.current.map(i=>i.matches)),Jo(a.current,i=>{s(i)})},[e]),n}var Zo=typeof window<"u"?u.useLayoutEffect:u.useEffect;function ct(e){let t=Ot(),o=typeof e=="function"?e(t):e;return Dr(o||"",!0)}function en(e){let t=Ot(),o=u.useMemo(()=>e.map(s=>(typeof s=="function"?s(t):s)??""),[e,t]),n=u.useMemo(()=>e.map(()=>!0),[e]);return Go(o,n)}function Je(e){let t=e.replace(/([a-z\d])([A-Z]+)/g,"$1 $2").replace(/\W|_/g," ").trim().toLowerCase();return`${t.charAt(0).toUpperCase()}${t.slice(1)}`}function tn(e,t,o){return e.filter(n=>!t.map(o).includes(o(n)))}function at(e,t){return e.filter((o,n,s)=>n===s.findIndex(a=>t(o)===t(a)))}function Ht(e,t){return t?t.match(/([^[.\]])+/g).reduce((o,n)=>o&&o[n],e):void 0}function W(e,t){return typeof t=="string"?Ht(e,t):t(e)}var rn=V({noWrap:{whiteSpace:"nowrap"},ellipsis:{overflow:"hidden",textOverflow:"ellipsis"}});function on({className:e,sx:t,style:o,visibleMediaQuery:n,title:s,noWrap:a,ellipsis:i,textAlignment:l,width:c}){let{cx:p,classes:g}=rn();return ct(n)?r.jsx(Y,{component:"th",className:p({[g.noWrap]:a||i,[g.ellipsis]:i},e),sx:[{"&&":{textAlign:l},width:c,minWidth:c,maxWidth:c},t],style:o,children:s}):null}x();var nn=V(e=>{let t=e.colorScheme==="dark"?.5:.05;return{root:{position:"sticky",width:0,left:0,background:"inherit","&::after":{content:'""',position:"absolute",top:0,right:-ye(e.spacing.sm),bottom:0,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`,width:e.spacing.sm,background:`linear-gradient(to right, ${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)}), linear-gradient(to right, ${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)} 30%)`,pointerEvents:"none",opacity:0,transition:"opacity .15s ease"}},shadowVisible:{"&::after":{opacity:1}}}});function sn({shadowVisible:e}){let{cx:t,classes:o}=nn();return r.jsx("th",{className:t(o.root,{[o.shadowVisible]:e})})}var an=V((e,{scrollDiff:t,borderColor:o})=>{let n=t<0,s=typeof o=="function"?o(e):o;return{root:{zIndex:2,position:n?"relative":"sticky",bottom:n?t:-1,background:e.colorScheme==="dark"?e.colors.dark[7]:e.white,"&& tr th":{borderTopColor:s}},relative:{position:"relative"},textSelectionDisabled:{userSelect:"none"}}}),ln=u.forwardRef(function({className:e,style:t,borderColor:o,columns:n,defaultColumnProps:s,selectionVisible:a,leftShadowVisible:i,scrollDiff:l},c){let{cx:p,classes:g}=an({scrollDiff:l,borderColor:o});return r.jsx(Y,{component:"tfoot",ref:c,className:p(g.root,e),style:t,children:r.jsxs("tr",{children:[a&&r.jsx(sn,{shadowVisible:i}),n.map(({hidden:d,...m})=>{if(d)return null;let{accessor:h,visibleMediaQuery:f,textAlignment:j,width:S,footer:w,footerClassName:R,footerStyle:P,footerSx:A,noWrap:I,ellipsis:z}={...s,...m};return r.jsx(on,{className:R,style:P,sx:A,visibleMediaQuery:f,textAlignment:j,width:S,title:w,noWrap:I,ellipsis:z},h)})]})})});x();x();function cn({group:{id:e,columns:t,title:o,className:n,style:s,sx:a}}){let i=u.useMemo(()=>t.map(({visibleMediaQuery:p})=>p),[t]),l=en(i),c=u.useMemo(()=>t.filter(({hidden:p},g)=>!p&&(l==null?void 0:l[g])).length,[t,l]);return c>0?r.jsx(Y,{component:"th",colSpan:c,className:n,sx:a,style:s,children:o??Je(e)}):null}x();x();function dn({children:e,isActive:t}){let[o,{close:n,toggle:s}]=Hr(!1);return r.jsxs(Ce,{withArrow:!0,withinPortal:!0,shadow:"md",opened:o,onClose:n,trapFocus:!0,children:[r.jsx(Ce.Target,{children:r.jsx(se,{onClick:a=>{a.preventDefault(),s()},variant:t?"default":"subtle",children:r.jsx(Qo,{size:14})})}),r.jsx(Ce.Dropdown,{onClick:a=>a.preventDefault(),children:typeof e=="function"?e({close:n}):e})]})}x();var un=V(e=>({resizableColumnHeaderHandle:{ref:Ye("resizableColumnHeaderHandle"),position:"absolute",cursor:"col-resize",top:0,bottom:0,width:"7px",transform:"translateX(4px)",zIndex:1,"::after":{content:'""',position:"absolute",top:"1px",left:"2px",bottom:"1px",background:"inherit",borderLeft:`3px dotted ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,opacity:0},"&:hover::after":{borderLeftColor:e.colors[e.primaryColor][e.colorScheme==="dark"?6:4]},"tr:hover &::after":{opacity:1}}})),hn=e=>{let{accessor:t,columnRef:o}=e,{classes:n}=un(),s=u.useRef(null),[a,i]=u.useState(0),{setColumnWidth:l}=Vt(),c=d=>{d.preventDefault(),d.stopPropagation(),document.addEventListener("mousemove",p),document.addEventListener("mouseup",g),document.body.style.cursor="col-resize"},p=d=>{if(!o.current)return;let m=d.clientX-o.current.getBoundingClientRect().right,h=`${o.current.getBoundingClientRect().width+m}px`;o.current.style.width=h,l(t,o.current.style.width),i(-m)},g=()=>{o.current&&(document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",g),document.body.style.cursor="initial",l(t,o.current.style.width),o.current.style.width="initial",i(0))};return r.jsx("div",{ref:s,onClick:d=>d.stopPropagation(),onMouseDown:c,onDoubleClick:()=>{o.current&&(o.current.style.maxWidth="initial",o.current.style.minWidth="initial",o.current.style.width="initial",l(t,"initial"))},className:n.resizableColumnHeaderHandle,style:{right:a}})},gn=V(e=>({sortableColumnHeader:{cursor:"pointer",transition:"background .15s ease","&:hover:not(:has(button:hover))":{background:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]}},draggableColumnHeader:{cursor:"grab",borderRadius:6,transition:"all 0.2s","&:active":{cursor:"grabbing"},"&:hover:not(:has(button:hover))":{background:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[2]}},draggableColumnHeaderIcon:{cursor:"inherit",margin:"-2px 2px 0"},draggableColumnHeaderOver:{background:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[2]},toggleableColumnHeaderIcon:{ref:Ye("toggleableColumnHeaderIcon"),transition:"opacity 0.2s",opacity:"0.1"},toggleableColumnHeader:{"&:hover":{[`& .${Ye("toggleableColumnHeaderIcon")}`]:{opacity:1}}},resizableColumnHeader:{position:"relative"},resizableColumnHeaderKnob:{position:"relative"},sortableColumnHeaderGroup:{gap:"0.25em"},columnHeaderText:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},sortableColumnHeaderText:{minWidth:0,flexGrow:1},sortableColumnHeaderIcon:{transition:"transform .15s ease"},sortableColumnHeaderIconRotated:{transform:"rotate3d(0, 0, 1, 180deg)"},sortableColumnHeaderUnsortedIcon:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],transition:"color .15s ease","th:hover &":{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]}}}));function pn({className:e,sx:t,style:o,accessor:n,visibleMediaQuery:s,title:a,sortable:i,draggable:l,toggleable:c,resizable:p,sortIcons:g,textAlignment:d,width:m,sortStatus:h,onSortStatusChange:f,filter:j,filtering:S,allColumns:w}){let{setSourceColumn:R,setTargetColumn:P,swapColumns:A,columnsToggle:I,setColumnsToggle:z}=Vt(),[D,T]=u.useState(!1),F=u.useRef(null),[B,Q]=u.useState(!1),{cx:U,classes:O}=gn();if(!ct(s))return null;let ee=a??Je(n),oe=typeof ee=="string"?ee:void 0,L=i&&f?k=>{k!=null&&k.defaultPrevented||f({columnAccessor:n,direction:(h==null?void 0:h.columnAccessor)===n?h.direction==="asc"?"desc":"asc":(h==null?void 0:h.direction)??"asc"})}:void 0,q=k=>{k.stopPropagation(),R(n),T(!1)},te=k=>{k.preventDefault(),P(n),T(!0)},ae=()=>{P(n),T(!1),A()},ne=()=>{T(!0)},C=()=>{T(!1)},b=k=>{k.stopPropagation(),z(M=>M.map(E=>E.accessor===n?{...E,toggled:!1}:E))};return r.jsxs(Y,{component:"th",className:U({[O.sortableColumnHeader]:i,[O.toggleableColumnHeader]:c,[O.resizableColumnHeader]:p},e),sx:[{"&&":{textAlign:d},width:`${m} !important`,...p?{minWidth:"1px"}:{minWidth:m,maxWidth:m}},t],style:o,role:i?"button":void 0,tabIndex:i?0:void 0,onClick:L,onContextMenu:k=>{c&&(k.preventDefault(),Q(!0))},onKeyDown:k=>k.key==="Enter"&&(L==null?void 0:L()),ref:F,children:[r.jsxs(ie,{className:O.sortableColumnHeaderGroup,position:"apart",noWrap:!0,children:[r.jsxs(Ce,{width:200,position:"bottom",withArrow:!0,shadow:"md",opened:B,onChange:Q,children:[r.jsx(Ce.Target,{children:r.jsxs(Nr,{align:"center",w:"100%",className:U({[O.draggableColumnHeader]:l,[O.draggableColumnHeaderOver]:D}),draggable:l,onDragStart:l?q:void 0,onDragEnter:l?ne:void 0,onDragOver:l?te:void 0,onDrop:l?ae:void 0,onDragLeave:l?C:void 0,children:[l?r.jsx(ve,{className:O.draggableColumnHeaderIcon,role:"img","aria-label":"Drag column",children:r.jsx(se,{style:{cursor:"grab"},variant:"subtle",size:"xs",onClick:k=>{k.stopPropagation()},children:r.jsx(Ko,{})})}):null,r.jsx(Y,{className:U(O.columnHeaderText,O.sortableColumnHeaderText),title:oe,children:ee})]})}),r.jsx(Ce.Dropdown,{children:r.jsx(we,{children:I.filter(k=>k.toggleable).map(k=>{var M;return r.jsx(ie,{children:r.jsx(Xe,{size:"xs",label:((M=w.find(E=>E.accessor===k.accessor))==null?void 0:M.title)??Je(k.accessor),checked:k.toggled,onChange:E=>{z(I.map(le=>le.accessor===k.accessor?{...le,toggled:E.currentTarget.checked}:le))}})},k.accessor)})})})]}),c?r.jsx(ve,{className:O.toggleableColumnHeaderIcon,role:"img","aria-label":"Toggle column",children:r.jsx(se,{size:"xs",variant:"light",onClick:b,children:r.jsx(Uo,{})})}):null,i||(h==null?void 0:h.columnAccessor)===n?r.jsx(r.Fragment,{children:(h==null?void 0:h.columnAccessor)===n?r.jsx(ve,{className:U(O.sortableColumnHeaderIcon,{[O.sortableColumnHeaderIconRotated]:h.direction==="desc"}),role:"img","aria-label":`Sorted ${h.direction==="desc"?"descending":"ascending"}`,children:(g==null?void 0:g.sorted)||r.jsx(Wo,{size:14})}):r.jsx(ve,{className:O.sortableColumnHeaderUnsortedIcon,role:"img","aria-label":"Not sorted",children:(g==null?void 0:g.unsorted)||r.jsx(Lo,{size:14})})}):null,j?r.jsx(dn,{isActive:!!S,children:j}):null]}),p?r.jsx(hn,{accessor:n,columnRef:F}):null]})}x();var mn=V(e=>{let t=e.colorScheme==="dark"?.5:.05;return{root:{position:"sticky",width:0,left:0,background:"inherit","&::after":{content:'""',position:"absolute",top:0,right:-ye(e.spacing.sm),bottom:0,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`,width:e.spacing.sm,background:`linear-gradient(to right, ${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)}), linear-gradient(to right, ${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)} 30%)`,pointerEvents:"none",opacity:0,transition:"opacity .15s ease"}},shadowVisible:{"&::after":{opacity:1}},checkboxInput:{cursor:"pointer"}}});function fn({shadowVisible:e,checked:t,indeterminate:o,checkboxProps:n,onChange:s,rowSpan:a}){let{cx:i,classes:l}=mn();return r.jsx("th",{className:i(l.root,{[l.shadowVisible]:e}),rowSpan:a,children:r.jsx(Xe,{classNames:{input:l.checkboxInput},checked:t,indeterminate:o,disabled:!s,onChange:s,...n})})}var bn=V(e=>({root:{zIndex:2,position:"sticky",top:0,background:e.colorScheme==="dark"?e.colors.dark[7]:e.white},textSelectionDisabled:{userSelect:"none"}})),xn=u.forwardRef(function({className:e,style:t,sortStatus:o,sortIcons:n,onSortStatusChange:s,columns:a,defaultColumnProps:i,groups:l,selectionVisible:c,selectionChecked:p,selectionIndeterminate:g,onSelectionChange:d,selectionCheckboxProps:m,leftShadowVisible:h},f){let{classes:j,cx:S}=bn(),w=c?r.jsx(fn,{shadowVisible:h,checked:p,indeterminate:g,checkboxProps:m,onChange:d,rowSpan:l?2:void 0}):null;return r.jsxs("thead",{className:S(j.root,e),style:t,ref:f,children:[l&&r.jsxs("tr",{children:[w,l.map(R=>r.jsx(cn,{group:R},R.id))]}),r.jsxs("tr",{children:[!l&&w,a.map(({hidden:R,...P},A)=>{if(R)return null;let{accessor:I,visibleMediaQuery:z,textAlignment:D,width:T,title:F,sortable:B,draggable:Q,toggleable:U,resizable:O,titleClassName:ee,titleStyle:oe,titleSx:L,filter:q,filtering:te}={...i,...P};return r.jsx(pn,{accessor:I,className:ee,style:oe,sx:L,visibleMediaQuery:z,textAlignment:D,width:T,title:F,sortable:B,draggable:Q,resizable:O&&A<a.length-1,toggleable:U,sortStatus:o,sortIcons:n,onSortStatusChange:s,filter:q,filtering:te,allColumns:a},I)})]})]})});x();var kn=V(e=>({root:{zIndex:3,position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",background:e.fn.rgba(e.colorScheme==="dark"?e.colors.dark[8]:e.white,.75),opacity:0,transition:"opacity .15s ease"},fetching:{pointerEvents:"all",opacity:1}}));function vn({pt:e,pb:t,fetching:o,customContent:n,backgroundBlur:s,size:a,variant:i,color:l}){let{classes:c,cx:p}=kn();return r.jsx(ve,{pt:e,pb:t,className:p(c.root,{[c.fetching]:o}),sx:s?{backdropFilter:`blur(${s}px)`}:void 0,children:o&&(n||r.jsx(_r,{size:a,variant:i,color:l}))})}x();x();var Pt={xs:22,sm:26,md:32,lg:38,xl:44};function Cn({size:e,label:t,values:o,value:n,onChange:s,color:a}){return r.jsxs(ie,{spacing:"xs",children:[r.jsx(Z,{size:e,children:t}),r.jsxs(_,{withinPortal:!0,withArrow:!0,children:[r.jsx(_.Target,{children:r.jsx(Ue,{size:e,variant:"default",sx:[{fontWeight:"normal"},i=>({height:Pt[e],paddingLeft:i.spacing[e],paddingRight:i.spacing[e]})],children:n})}),r.jsx(_.Dropdown,{children:o.map(i=>{let l=i===n;return r.jsx(_.Item,{sx:[{height:Pt[e]},c=>({"&&":{color:l?c.white:void 0},background:l?c.colors[a||c.primaryColor][6]:void 0})],disabled:l,onClick:()=>s(i),children:r.jsx(Z,{size:e,children:i})},i)})})]})]})}var wn=V((e,{topBorderColor:t,paginationWrapBreakpoint:o})=>({root:{background:e.colorScheme==="dark"?e.colors.dark[7]:e.white,borderTop:`1px solid ${typeof t=="function"?t(e):t}`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",gap:e.spacing.xs,[e.fn.largerThan(o)]:{flexDirection:"row"}},text:{flex:"1 1 auto"},pagination:{opacity:1,transition:"opacity .15s ease"},paginationFetching:{opacity:0}})),yn=u.forwardRef(function({className:e,style:t,topBorderColor:o,fetching:n,page:s,onPageChange:a,paginationColor:i,paginationSize:l,loadingText:c,noRecordsText:p,paginationText:g,totalRecords:d,recordsPerPage:m,onRecordsPerPageChange:h,recordsPerPageLabel:f,recordsPerPageOptions:j,recordsLength:S,horizontalSpacing:w,paginationWrapBreakpoint:R,getPaginationControlProps:P},A){let I;if(n)I=c;else if(!d)I=p;else{let T=(s-1)*m+1,F=T+S-1;I=g({from:T,to:F,totalRecords:d})}let{classes:z,cx:D}=wn({topBorderColor:o,paginationWrapBreakpoint:R});return r.jsxs(Y,{ref:A,px:w??"xs",py:"xs",className:D(z.root,e),style:t,children:[r.jsx(Z,{className:z.text,size:l,children:I}),j&&r.jsx(Cn,{size:l,label:f,values:j,color:i,value:m,onChange:h}),r.jsx(Tr,{color:i,className:D(z.pagination,{[z.paginationFetching]:n||!S}),value:s,onChange:a,size:l,total:Math.ceil(d/m),getControlProps:P})]})});x();x();var jn=V({withPointerCursor:{cursor:"pointer"},noWrap:{whiteSpace:"nowrap"},ellipsis:{overflow:"hidden",textOverflow:"ellipsis"}});function Sn({className:e,sx:t,style:o,visibleMediaQuery:n,record:s,recordIndex:a,onClick:i,noWrap:l,ellipsis:c,textAlignment:p,width:g,accessor:d,render:m,defaultRender:h,customCellAttributes:f}){let{cx:j,classes:S}=jn();return ct(n)?r.jsx(Y,{component:"td",className:j({[S.noWrap]:l||c,[S.ellipsis]:c,[S.withPointerCursor]:i},e),sx:[{width:g,minWidth:g,maxWidth:g,textAlign:p},t],style:o,onClick:i,...f==null?void 0:f(s,a),children:m?m(s,a):h?h(s,a,d):Ht(s,d)}):null}x();x();function Rn(e){let[t,o]=u.useState(null),n=(e==null?void 0:e.join(":"))||"";return u.useEffect(()=>{o(null)},[n]),{lastSelectionChangeIndex:t,setLastSelectionChangeIndex:o}}function In(e){let[t,o]=u.useState(null);return u.useEffect(()=>{e&&o(null)},[e]),{rowContextMenuInfo:t,setRowContextMenuInfo:o}}function Pn({rowExpansion:e,records:t,idAccessor:o}){let n=[];if(e&&t){let{trigger:l,allowMultiple:c,initiallyExpanded:p}=e;t&&l==="always"?n=t.map(g=>W(g,o)):p&&(n=t.filter(p).map(g=>W(g,o)),c||(n=[n[0]]))}let s,a,i=u.useState(n);if(e){let{trigger:l,allowMultiple:c,collapseProps:p,content:g}=e;e.expanded?{recordIds:s,onRecordIdsChange:a}=e.expanded:[s,a]=i;let d=m=>a==null?void 0:a(s.filter(h=>h!==W(m,o)));return{expandOnClick:l!=="always"&&l!=="never",isRowExpanded:m=>l==="always"?!0:s.includes(W(m,o)),expandRow:m=>{let h=W(m,o);a==null||a(c?[...s,h]:[h])},collapseRow:d,collapseProps:p,content:(m,h)=>()=>g({record:m,recordIndex:h,collapse:()=>d(m)})}}}function Tn(e,t){let[o,n]=u.useState(e),[s,a]=u.useState(e),i=Ct(()=>n(!0),0),l=Ct(()=>a(!1),t||200);return u.useEffect(()=>{e?(l.clear(),a(!0),i.start()):(i.clear(),n(!1),l.start())},[i,l,e]),{expanded:o,visible:s}}function ke(){var n;let[e]=$r(),{width:t,height:o}=((n=e.current)==null?void 0:n.getBoundingClientRect())||{width:0,height:0};return{ref:e,width:t,height:o}}var Mn=({key:e,columns:t=[]})=>{let o=t&&t.map(f=>f.accessor)||[],n=t&&t.map(f=>({[f.accessor]:f.width??"initial"}))||[],s=t&&t.map(f=>({accessor:f.accessor,defaultToggle:f.defaultToggle||!0,toggleable:f.toggleable,toggled:f.defaultToggle===void 0?!0:f.defaultToggle})),[a,i]=ze({key:`${e}-columns-order`,defaultValue:o,getInitialValueInEffect:!0}),[l,c]=ze({key:`${e}-columns-toggle`,defaultValue:s,getInitialValueInEffect:!0}),[p,g]=ze({key:`${e}-columns-width`,defaultValue:n,getInitialValueInEffect:!0}),d=()=>i(o),m=()=>{c(s)},h=()=>g(n);return{effectiveColumns:u.useMemo(()=>a?a.map(f=>t.find(j=>j.accessor===f)).map(f=>{var j;return{...f,hidden:!((j=l.find(S=>S.accessor===(f==null?void 0:f.accessor)))!=null&&j.toggled)}}).map(f=>{var j;return{...f,width:(j=p.find(S=>S[f==null?void 0:f.accessor]))==null?void 0:j[f==null?void 0:f.accessor]}}):t,[t,a,l,p]),setColumnsOrder:i,columnsOrder:a,resetColumnsOrder:d,columnsToggle:l,setColumnsToggle:c,resetColumnsToggle:m,columnsWidth:p,setColumnsWidth:g,setColumnWidth:(f,j)=>{let S=p.map(w=>w[f]?{[f]:j}:w);g(S)},resetColumnsWidth:h}},An=V({cell:{"&&":{borderBottomWidth:0,padding:0}},expandedCell:{"&&":{borderBottomWidth:1}}});function zn({open:e,colSpan:t,content:o,collapseProps:n}){let{expanded:s,visible:a}=Tn(e,n==null?void 0:n.transitionDuration),{cx:i,classes:l}=An();return a?r.jsxs(r.Fragment,{children:[r.jsx("tr",{}),r.jsx("tr",{children:r.jsx("td",{className:i(l.cell,{[l.expandedCell]:s}),colSpan:t,children:r.jsx(Wr,{in:s,...n,children:o()})})})]}):null}x();var On=V(e=>{let t=e.colorScheme==="dark"?.5:.05;return{root:{position:"sticky",zIndex:1,width:0,left:0,background:"inherit","&::after":{content:'""',position:"absolute",top:0,right:-ye(e.spacing.sm),bottom:0,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`,width:e.spacing.sm,background:`linear-gradient(to right, ${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)}), linear-gradient(to right, ${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)} 30%)`,pointerEvents:"none",opacity:0,transition:"opacity .15s ease"}},withRightShadow:{"&::after":{opacity:1}},checkbox:{cursor:"pointer"}}});function Nn({record:e,recordIndex:t,withRightShadow:o,getCheckboxProps:n,...s}){let{cx:a,classes:i}=On();return r.jsx("td",{className:a(i.root,{[i.withRightShadow]:o}),onClick:l=>l.stopPropagation(),children:r.jsx(Xe,{classNames:{input:i.checkbox},...s,...n(e,t)})})}var _n=V(e=>{let t=e.colors[e.primaryColor][6];return{withPointerCursor:{cursor:"pointer"},selected:{"&&":{"tr&":{background:e.colorScheme==="dark"?e.fn.darken(t,.6):e.fn.lighten(t,.9)},"table[data-striped] tbody &:nth-of-type(odd)":{background:e.colorScheme==="dark"?e.fn.darken(t,.55):e.fn.lighten(t,.85)}}},contextMenuVisible:{"&&":{"tr&":{background:e.colorScheme==="dark"?e.fn.darken(t,.5):e.fn.lighten(t,.7)},"table[data-striped] tbody &:nth-of-type(odd)":{background:e.colorScheme==="dark"?e.fn.darken(t,.45):e.fn.lighten(t,.65)}}}}});function $n({record:e,recordIndex:t,columns:o,defaultColumnProps:n,defaultColumnRender:s,selectionVisible:a,selectionChecked:i,onSelectionChange:l,isRecordSelectable:c,getSelectionCheckboxProps:p,onClick:g,onCellClick:d,onContextMenu:m,expansion:h,customAttributes:f,className:j,style:S,sx:w,contextMenuVisible:R,leftShadowVisible:P}){let{cx:A,classes:I}=_n();return r.jsxs(r.Fragment,{children:[r.jsxs(Y,{component:"tr",className:A({[I.withPointerCursor]:g||(h==null?void 0:h.expandOnClick),[I.selected]:i,[I.contextMenuVisible]:R},typeof j=="function"?j(e,t):j),onClick:z=>{if(h){let{isRowExpanded:D,expandOnClick:T,expandRow:F,collapseRow:B}=h;T&&(D(e)?B(e):F(e))}g==null||g(z)},style:typeof S=="function"?S(e,t):S,sx:w,...f==null?void 0:f(e,t),onContextMenu:m,children:[a&&r.jsx(Nn,{record:e,recordIndex:t,withRightShadow:P,checked:i,disabled:!l||(c?!c(e,t):!1),onChange:l,getCheckboxProps:p}),o.map(({hidden:z,...D},T)=>{if(z)return null;let{accessor:F,visibleMediaQuery:B,textAlignment:Q,noWrap:U,ellipsis:O,width:ee,render:oe,cellsClassName:L,cellsStyle:q,cellsSx:te,customCellAttributes:ae}={...n,...D},ne;return d&&(ne=C=>d({event:C,record:e,recordIndex:t,column:D,columnIndex:T})),r.jsx(Sn,{className:typeof L=="function"?L(e,t):L,style:typeof q=="function"?q(e,t):q,sx:te,visibleMediaQuery:B,record:e,recordIndex:t,onClick:ne,accessor:F,textAlignment:Q,noWrap:U,ellipsis:O,width:ee,render:oe,defaultRender:s,customCellAttributes:ae},F)})]}),h&&r.jsx(zn,{colSpan:o.filter(({hidden:z})=>!z).length+(a?1:0),open:h.isRowExpanded(e),content:h.content(e,t),collapseProps:h.collapseProps})]})}x();var Fn=V(e=>({root:{position:"fixed",border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`,overflow:"hidden",transition:"all .15s ease"}}));function Vn({borderRadius:e="xs",shadow:t="sm",zIndex:o=3,y:n,x:s,onDestroy:a,children:i}){vt("resize",a),vt("scroll",a);let l=Fr(a),{ref:c,width:p,height:g}=ke(),d=At(l,c),{innerWidth:m,innerHeight:h}=window,{classes:f,theme:{dir:j,spacing:S}}=Fn(),w=ye(S.md);return r.jsx(zt,{ref:d,shadow:t,radius:e,className:f.root,sx:{zIndex:o,top:n+g+w>h?h-g-w:n,left:j==="ltr"?s+p+w>m?m-p-w:s:m-w-(s-p-w<0?p+w:s)},children:i})}x();var En=V(e=>({root:{height:1,background:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]}}));function Dn(){let{classes:e}=En();return r.jsx("div",{className:e.root})}x();var Hn=V((e,{color:t})=>{let o=ye(e.spacing.sm)/2;return{root:{width:"100%",display:"flex",alignItems:"center",paddingTop:o,paddingBottom:o,paddingLeft:e.spacing.sm,paddingRight:e.spacing.sm,color:t&&e.colors[t][6],transition:"background .15s ease","&[disabled]":{cursor:"not-allowed",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:hover:not([disabled])":{background:e.fn.rgba(t?e.colors[t][6]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],t?e.colorScheme==="dark"?.15:.08:.25)},"&:active:not([disabled])":{background:e.fn.rgba(t?e.colors[t][6]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],t?e.colorScheme==="dark"?.3:.2:.5)}},icon:{fontSize:0,marginRight:e.spacing.xs},title:{whiteSpace:"nowrap"}}});function Wn({icon:e,title:t,color:o,disabled:n,onClick:s}){let{classes:a}=Hn({color:o});return r.jsxs(Vr,{className:a.root,disabled:n,onClick:s,children:[e&&r.jsx(Y,{className:a.icon,children:e}),r.jsx(Z,{className:a.title,size:"sm",children:t})]})}x();var Ln=V(e=>{let t=e.colorScheme==="dark"?.5:.05;return{root:{flex:"1 1 100%"},scrollbar:{'&[data-state="visible"]':{background:"transparent"},"div::before":{pointerEvents:"none"}},corner:{background:"transparent"},thumb:{zIndex:3},shadow:{position:"absolute",pointerEvents:"none",opacity:0,transition:"opacity .15s ease"},topShadow:{zIndex:2,left:0,right:0,height:e.spacing.sm,background:`linear-gradient(${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)}), linear-gradient(${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)} 30%)`},leftShadow:{zIndex:3,top:0,left:0,bottom:0,width:e.spacing.sm,background:`linear-gradient(to right, ${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)}), linear-gradient(to right, ${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)} 30%)`},rightShadow:{zIndex:2,top:0,bottom:0,right:0,width:e.spacing.sm,background:`linear-gradient(to left, ${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)}), linear-gradient(to left, ${e.fn.rgba(e.black,t)}, ${e.fn.rgba(e.black,0)} 30%)`},bottomShadow:{zIndex:2,left:0,right:0,height:e.spacing.sm,background:`linear-gradient(${e.fn.rgba(e.black,0)}, ${e.fn.rgba(e.black,t)}), linear-gradient(${e.fn.rgba(e.black,0)} 30%, ${e.fn.rgba(e.black,t)})`},shadowVisible:{opacity:1}}});function Bn({topShadowVisible:e,leftShadowVisible:t,rightShadowVisible:o,bottomShadowVisible:n,headerHeight:s,footerHeight:a,onScrollPositionChange:i,children:l,viewportRef:c,scrollAreaProps:p}){let g=a?a-1:0,{cx:d,classes:m}=Ln();return r.jsxs(Er,{...p,viewportRef:c,classNames:{root:m.root,scrollbar:m.scrollbar,thumb:m.thumb,corner:m.corner},styles:{scrollbar:{marginTop:s,marginBottom:g}},onScrollPositionChange:i,children:[l,r.jsx(Y,{className:d(m.shadow,m.topShadow,{[m.shadowVisible]:e}),sx:{top:s}}),r.jsx("div",{className:d(m.shadow,m.leftShadow,{[m.shadowVisible]:t})}),r.jsx("div",{className:d(m.shadow,m.rightShadow,{[m.shadowVisible]:o})}),r.jsx(Y,{className:d(m.shadow,m.bottomShadow,{[m.shadowVisible]:n}),sx:{bottom:g}})]})}var Tt={},Qn=V((e,{borderColor:t,rowBorderColor:o})=>{let n=typeof t=="function"?t(e):t,s=typeof o=="function"?o(e):o,a=e.colorScheme==="dark"?.5:.05;return{root:{position:"relative",display:"flex",flexDirection:"column",overflow:"hidden",tr:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white},"&&":{"thead tr th":{borderBottomColor:n},"tbody tr td":{borderTopColor:s}}},lastRowBorderBottomVisible:{"tbody tr:last-of-type td":{borderBottom:`1px solid ${s}`}},textSelectionDisabled:{userSelect:"none"},table:{borderCollapse:"separate",borderSpacing:0},tableWithBorder:{border:`1px solid ${n}`},resizableColumnHeaderKnobTransparent:{[`& .${Ye("resizableColumnHeaderKnob")}`]:{background:"transparent"}},tableWithColumnBorders:{"&&":{"th, td":{":not(:first-of-type)":{borderLeft:`1px solid ${s}`}}}},tableWithColumnBordersAndSelectableRecords:{thead:{"tr + tr":{th:{borderLeft:`1px solid ${s}`}}}},verticalAlignmentTop:{td:{verticalAlign:"top"}},verticalAlignmentBottom:{td:{verticalAlign:"bottom"}},pinLastColumn:{"th:last-of-type, td:last-of-type":{position:"sticky",right:0,zIndex:1,background:"inherit","&::after":{content:"''",position:"absolute",top:0,bottom:0,width:e.spacing.sm,background:`linear-gradient(to left, ${e.fn.rgba(e.black,a)}, ${e.fn.rgba(e.black,0)}), linear-gradient(to left, ${e.fn.rgba(e.black,a)}, ${e.fn.rgba(e.black,0)} 30%)`,borderRight:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`,left:-ye(e.spacing.sm),pointerEvents:"none",opacity:0,transition:"opacity 0.2s"}}},pinnedColumnShadowVisible:{"th:last-of-type, td:last-of-type":{"&::after":{opacity:1}}}}});function Kn({withBorder:e,borderRadius:t,borderColor:o=$=>$.colorScheme==="dark"?$.colors.dark[4]:$.colors.gray[3],rowBorderColor:n=$=>$.fn.rgba($.colorScheme==="dark"?$.colors.dark[4]:$.colors.gray[3],.65),withColumnBorders:s,textSelectionDisabled:a,height:i="100%",minHeight:l,shadow:c,verticalAlignment:p="center",fetching:g,columns:d,storeColumnsKey:m,groups:h,pinLastColumn:f,defaultColumnProps:j,defaultColumnRender:S,idAccessor:w="id",records:R,selectedRecords:P,onSelectedRecordsChange:A,isRecordSelectable:I,allRecordsSelectionCheckboxProps:z={"aria-label":"Select all records"},getRecordSelectionCheckboxProps:D=($,de)=>({"aria-label":`Select record ${de+1}`}),sortStatus:T,sortIcons:F,onSortStatusChange:B,horizontalSpacing:Q,page:U,onPageChange:O,totalRecords:ee,recordsPerPage:oe,onRecordsPerPageChange:L,recordsPerPageOptions:q,recordsPerPageLabel:te="Records per page",paginationColor:ae,paginationSize:ne="sm",paginationText:C=({from:$,to:de,totalRecords:ue})=>`${$} - ${de} / ${ue}`,paginationWrapBreakpoint:b="sm",getPaginationControlProps:k=$=>$==="previous"?{"aria-label":"Previous page"}:$==="next"?{"aria-label":"Next page"}:{},loaderBackgroundBlur:M,customLoader:E,loaderSize:le,loaderVariant:Wt,loaderColor:Lt,loadingText:Bt="...",emptyState:Qt,noRecordsText:dt="No records",noRecordsIcon:Kt,striped:Ut,noHeader:Yt,onRowClick:Se,onCellClick:qt,onScrollToTop:Oe,onScrollToBottom:Ne,onScrollToLeft:_e,onScrollToRight:$e,rowContextMenu:re,rowExpansion:Jt,rowClassName:Xt,rowStyle:Gt,rowSx:Zt,customRowAttributes:er,scrollViewportRef:tr,scrollAreaProps:rr,bodyRef:or,m:nr,my:sr,mx:ar,mt:lr,mb:ir,ml:cr,mr:dr,sx:ur,className:hr,classNames:J,style:gr,styles:Ze,...pr}){let{ref:$,width:de,height:ue}=ke(),Re=u.useMemo(()=>(h==null?void 0:h.flatMap(y=>y.columns))??d,[d,h]),mr=Mn({key:m,columns:Re}),{ref:fr,height:et}=ke(),{ref:br,width:tt,height:Ie}=ke(),{ref:xr,height:kr}=ke(),{ref:vr,height:ut}=ke(),[rt,ht]=u.useState(!0),[ot,gt]=u.useState(!0),[Fe,pt]=u.useState(!0),[Ve,mt]=u.useState(!0),{rowContextMenuInfo:he,setRowContextMenuInfo:be}=In(g),Cr=Pn({rowExpansion:Jt,records:R,idAccessor:w}),nt=u.useCallback(()=>{if(!g&&re&&be(null),g||Ie<=ue)ht(!0),gt(!0);else{let y=$.current.scrollTop,N=y===0,K=Ie-y-ue<1;ht(N),gt(K),N&&N!==rt&&(Oe==null||Oe()),K&&K!==ot&&(Ne==null||Ne())}if(g||tt===de)pt(!0),mt(!0);else{let y=$.current.scrollLeft,N=y===0,K=tt-y-de<1;pt(N),mt(K),N&&N!==Fe&&(_e==null||_e()),K&&K!==Ve&&($e==null||$e())}},[g,Ne,_e,$e,Oe,re,ue,$,de,ot,Fe,Ve,rt,be,Ie,tt]);Zo(nt,[nt]);let wr=u.useCallback(y=>{$.current.scrollTo({top:0,left:0}),O(y)},[O,$]),Ee=R==null?void 0:R.length,ft=R==null?void 0:R.map(y=>W(y,w)),Pe=!!P,ge=P==null?void 0:P.map(y=>W(y,w)),bt=ft!==void 0&&ge!==void 0&&ge.length>0,Te=I?R==null?void 0:R.filter(I):R,De=Te==null?void 0:Te.map(y=>W(y,w)),He=bt&&De.every(y=>ge.includes(y)),yr=bt&&De.some(y=>ge.includes(y)),jr=u.useCallback(()=>{P&&A&&A(He?P.filter(y=>!De.includes(W(y,w))):at([...P,...Te],y=>W(y,w)))},[He,w,A,De,Te,P]),{lastSelectionChangeIndex:We,setLastSelectionChangeIndex:Sr}=Rn(ft),st=Pe&&!Fe,{cx:xt,classes:X,theme:Rr}=Qn({borderColor:o,rowBorderColor:n}),Ir={m:nr,my:sr,mx:ar,mt:lr,mb:ir,ml:cr,mr:dr},G=typeof Ze=="function"?Ze(Rr,Tt,Tt):Ze;return r.jsx(Oo,{...mr,children:r.jsxs(Y,{...Ir,className:xt(X.root,{[X.tableWithBorder]:e,[X.resizableColumnHeaderKnobTransparent]:s},hr,J==null?void 0:J.root),sx:[y=>({borderRadius:y.radius[t]||t,boxShadow:y.shadows[c]||c,height:i,minHeight:l}),...Mr(ur)],style:{...G==null?void 0:G.root,...gr},children:[r.jsx(Bn,{viewportRef:At($,tr||null),topShadowVisible:!rt,leftShadowVisible:!(P||Fe),rightShadowVisible:!Ve&&!f,bottomShadowVisible:!ot,headerHeight:et,footerHeight:kr,onScrollPositionChange:nt,scrollAreaProps:rr,children:r.jsxs(Ar,{ref:br,horizontalSpacing:Q,className:xt(X.table,{[X.tableWithColumnBorders]:s,[X.lastRowBorderBottomVisible]:Ie<ue,[X.textSelectionDisabled]:a,[X.verticalAlignmentTop]:p==="top",[X.verticalAlignmentBottom]:p==="bottom",[X.tableWithColumnBordersAndSelectableRecords]:Pe&&s,[X.pinLastColumn]:f,[X.pinnedColumnShadowVisible]:f&&!Ve}),striped:Ee?Ut:!1,...pr,children:[Yt?null:r.jsx(xn,{ref:fr,className:J==null?void 0:J.header,style:G==null?void 0:G.header,columns:Re,defaultColumnProps:j,groups:h,sortStatus:T,sortIcons:F,onSortStatusChange:B,selectionVisible:Pe,selectionChecked:He,selectionIndeterminate:yr&&!He,onSelectionChange:jr,selectionCheckboxProps:z,leftShadowVisible:st}),r.jsx("tbody",{ref:or,children:Ee?R.map((y,N)=>{let K=W(y,w),Me=(ge==null?void 0:ge.includes(K))||!1,Le=!1,Be=!1;if(re){let{hidden:H}=re;(!H||!(typeof H=="function"?H(y,N):H))&&(re.trigger==="click"?Le=!0:Be=!0)}let Qe;A&&P&&(Qe=H=>{if(H.nativeEvent.shiftKey&&We!==null){let xe=R.filter(N>We?(pe,me)=>me>=We&&me<=N&&(I?I(pe,me):!0):(pe,me)=>me>=N&&me<=We&&(I?I(pe,me):!0));A(Me?tn(P,xe,pe=>W(pe,w)):at([...P,...xe],pe=>W(pe,w)))}else A(Me?P.filter(xe=>W(xe,w)!==K):at([...P,y],xe=>W(xe,w)));Sr(N)});let Ae;Le?Ae=H=>{be({y:H.clientY,x:H.clientX,record:y,recordIndex:N}),Se==null||Se(y,N,H)}:Se&&(Ae=H=>{Se(y,N,H)});let kt;return Be&&(kt=H=>{H.preventDefault(),be({y:H.clientY,x:H.clientX,record:y,recordIndex:N})}),r.jsx($n,{record:y,recordIndex:N,columns:Re,defaultColumnProps:j,defaultColumnRender:S,selectionVisible:Pe,selectionChecked:Me,onSelectionChange:Qe,isRecordSelectable:I,getSelectionCheckboxProps:D,onClick:Ae,onCellClick:qt,onContextMenu:kt,contextMenuVisible:he?W(he.record,w)===K:!1,expansion:Cr,className:Xt,style:Gt,sx:Zt,customAttributes:er,leftShadowVisible:st},K)}):r.jsx(_o,{})}),Re.some(({footer:y})=>y)&&r.jsx(ln,{ref:xr,className:J==null?void 0:J.footer,style:G==null?void 0:G.footer,borderColor:o,columns:Re,defaultColumnProps:j,selectionVisible:Pe,leftShadowVisible:st,scrollDiff:Ie-ue})]})}),U&&r.jsx(yn,{ref:vr,className:J==null?void 0:J.pagination,style:G==null?void 0:G.pagination,topBorderColor:o,horizontalSpacing:Q,fetching:g,page:U,onPageChange:wr,totalRecords:ee,recordsPerPage:oe,onRecordsPerPageChange:L,recordsPerPageOptions:q,recordsPerPageLabel:te,paginationColor:ae,paginationSize:ne,paginationText:C,paginationWrapBreakpoint:b,getPaginationControlProps:k,noRecordsText:dt,loadingText:Bt,recordsLength:Ee}),r.jsx(vn,{pt:et,pb:ut,fetching:g,backgroundBlur:M,customContent:E,size:le,variant:Wt,color:Lt}),r.jsx(qo,{pt:et,pb:ut,icon:Kt,text:dt,active:!g&&!Ee,children:Qt}),re&&he&&r.jsx(zr,{children:r.jsx(Vn,{zIndex:re.zIndex,borderRadius:re.borderRadius,shadow:re.shadow,y:he.y,x:he.x,onDestroy:()=>be(null),children:re.items(he.record,he.recordIndex).map(({divider:y,key:N,title:K,icon:Me,color:Le,hidden:Be,disabled:Qe,onClick:Ae})=>y?r.jsx(Dn,{},N):Be?null:r.jsx(Wn,{title:K??Je(N),icon:Me,color:Le,disabled:Qe,onClick:()=>{be(null),Ae()}},N))})})]})})}x();x();x();x();x();x();x();x();x();x();x();x();x();x();x();x();x();x();function Mt({icon:e,actions:t,tooltip:o="",label:n=""}){return r.jsxs(_,{shadow:"xs",children:[r.jsx(_.Target,{children:r.jsx(se,{children:r.jsx(ce,{label:o,children:e})})}),r.jsxs(_.Dropdown,{children:[n&&r.jsx(_.Label,{children:n}),t.map((s,a)=>r.jsx(_.Item,{children:s},a))]})]})}function Un({columns:e,onToggleColumn:t}){return r.jsxs(_,{shadow:"xs",closeOnItemClick:!1,children:[r.jsx(_.Target,{children:r.jsx(se,{children:r.jsx(ce,{label:v._({id:"kCTFU8"}),children:r.jsx(mo,{})})})}),r.jsxs(_.Dropdown,{children:[r.jsx(_.Label,{children:v._({id:"kCTFU8"})}),e.filter(o=>o.switchable??!0).map(o=>r.jsx(_.Item,{children:r.jsx(Xe,{checked:!o.hidden,label:o.title||o.accessor,onChange:()=>t(o.accessor),radius:"sm"})},o.accessor))]})]})}function Yn({downloadCallback:e}){const t=[{value:"csv",label:v._({id:"6N5Lt+"})},{value:"tsv",label:v._({id:"Keu6yk"})},{value:"xlsx",label:v._({id:"UR8vqQ"})}];return r.jsx(r.Fragment,{children:r.jsxs(_,{children:[r.jsx(_.Target,{children:r.jsx(se,{children:r.jsx(ce,{label:v._({id:"w+nnwj"}),children:r.jsx(bo,{})})})}),r.jsx(_.Dropdown,{children:t.map(o=>r.jsx(_.Item,{onClick:()=>{e(o.value)},children:o.label},o.value))})]})})}function qn(e){return e.choices?e.choices:e.choiceFunction?e.choiceFunction():[{value:"true",label:v._({id:"l75CjT"})},{value:"false",label:v._({id:"1UzENP"})}]}function bs(e){return()=>{const t=Xr.getState().status;if(!t)return[];const o=t[e];return o?Object.keys(o).map(n=>{const s=o[n];return{value:s.key,label:s.label??s.key}}):[]}}function xs(){return{name:"assigned_to_me",label:v._({id:"iU3XRS"}),description:v._({id:"BnF3ID"})}}function ks(){return{name:"outstanding",label:v._({id:"aimnwe"}),description:v._({id:"hUps7c"})}}function vs(){return{name:"overdue",label:v._({id:"ddrz1m"}),description:v._({id:"j81Gfd"})}}function Jn({flt:e,tableState:t}){const o=u.useCallback(()=>{let n=t.activeFilters.filter(s=>s.name!==e.name);t.setActiveFilters(n)},[e]);return r.jsx(zt,{p:"sm",shadow:"sm",radius:"xs",children:r.jsxs(ie,{position:"apart",children:[r.jsxs(we,{spacing:"xs",children:[r.jsx(Z,{size:"sm",children:e.label}),r.jsx(Z,{size:"xs",children:e.description})]}),r.jsxs(ie,{position:"right",children:[r.jsx(Br,{children:e.displayValue??e.value}),r.jsx(ce,{label:v._({id:"rn2/2V"}),withinPortal:!0,children:r.jsx(_t,{size:"md",color:"red",onClick:o})})]})]},e.name)})}const Xn=u.forwardRef(({label:e,description:t,...o},n)=>r.jsxs("div",{ref:n,...o,children:[r.jsx(Z,{size:"sm",children:e}),r.jsx(Z,{size:"xs",children:t})]}));function Gn({tableState:e,availableFilters:t}){const o=u.useMemo(()=>{var c;let l=((c=e.activeFilters)==null?void 0:c.map(p=>p.name))??[];return t.filter(p=>!l.includes(p.name)).map(p=>({value:p.name,label:p.label,description:p.description}))},[e.activeFilters,t]),[n,s]=u.useState(null),a=u.useMemo(()=>{let l=t.find(c=>c.name===n);return l?qn(l):[]},[n]),i=u.useCallback(l=>{var d,m;let c=t.find(h=>h.name===n);if(!c)return;let p=((d=e.activeFilters)==null?void 0:d.filter(h=>h.name!==n))??[],g={...c,value:l,displayValue:(m=a.find(h=>h.value===l))==null?void 0:m.label};e.setActiveFilters([...p,g])},[n]);return r.jsxs(we,{spacing:"xs",children:[r.jsx(Nt,{}),r.jsx(wt,{data:o,itemComponent:Xn,searchable:!0,placeholder:v._({id:"hpMOSe"}),label:v._({id:"o7J4JM"}),onChange:l=>s(l),maxDropdownHeight:800}),n&&r.jsx(wt,{data:a,label:v._({id:"wMHvYH"}),placeholder:v._({id:"Fo55lj"}),onChange:l=>i(l),maxDropdownHeight:800})]})}function Zn({availableFilters:e,tableState:t,opened:o,onClose:n}){var l;const[s,a]=u.useState(!1);u.useEffect(()=>{a(!1)},[t.activeFilters]);const i=u.useMemo(()=>((t==null?void 0:t.activeFilters)??[]).length>0,[t.activeFilters]);return r.jsx(Lr,{size:"sm",position:"right",withCloseButton:!0,opened:o,onClose:n,title:r.jsx(ao,{size:"lg",children:v._({id:"l34cnu"})}),children:r.jsxs(we,{spacing:"xs",children:[i&&((l=t.activeFilters)==null?void 0:l.map(c=>r.jsx(Jn,{flt:c,tableState:t},c.name))),i&&r.jsx(Nt,{}),s&&r.jsx(we,{spacing:"xs",children:r.jsx(Gn,{tableState:t,availableFilters:e})}),s&&r.jsx(Ue,{onClick:()=>a(!1),color:"orange",variant:"subtle",children:r.jsx(Z,{children:v._({id:"dEgA5A"})})}),!s&&t.activeFilters.length<e.length&&r.jsx(Ue,{onClick:()=>a(!0),color:"green",variant:"subtle",children:r.jsx(Z,{children:v._({id:"PzFzS+"})})}),!s&&t.activeFilters.length>0&&r.jsx(Ue,{onClick:t.clearActiveFilters,color:"red",variant:"subtle",children:r.jsx(Z,{children:v._({id:"J8ECgX"})})})]})})}function Cs({onClick:e,tooltip:t,hidden:o}){return{title:v._({id:"euc6Ns"}),color:"green",tooltip:t,onClick:e,icon:r.jsx(co,{}),hidden:o}}function ws({onClick:e,tooltip:t,hidden:o}){return{title:v._({id:"ePK91l"}),color:"blue",tooltip:t,onClick:e,icon:r.jsx(io,{}),hidden:o}}function ys({onClick:e,tooltip:t,hidden:o}){return{title:v._({id:"cnGeoo"}),color:"red",tooltip:t,onClick:e,icon:r.jsx($t,{}),hidden:o}}function es({title:e,actions:t,disabled:o=!1}){function n(c){St(c),a(!s)}const[s,a]=u.useState(!1),i=u.useMemo(()=>t.filter(c=>!c.hidden),[t]);function l(c){return r.jsx(ce,{withinPortal:!0,label:c.tooltip??c.title,children:r.jsx(_.Item,{color:c.color,icon:c.icon,onClick:p=>{St(p),c.onClick?c.onClick():lo(),a(!1)},disabled:c.disabled||!1,children:c.title})},c.title)}return i.length>0&&r.jsxs(_,{withinPortal:!0,disabled:o,position:"bottom-end",opened:s,onChange:a,children:[r.jsx(_.Target,{children:r.jsx(ce,{withinPortal:!0,label:e||v._({id:"7L01XJ"}),children:r.jsx(se,{onClick:n,disabled:o,variant:"subtle",color:"gray",children:r.jsx(to,{})})})}),r.jsx(_.Dropdown,{children:i.map(c=>r.jsx(l,{...c},c.title))})]})}function ts({searchCallback:e}){const[t,o]=u.useState(""),[n]=Qr(t,500);return u.useEffect(()=>{e(n)},[n]),r.jsx(Kr,{value:t,icon:r.jsx(ho,{}),placeholder:v._({id:"A1taO8"}),onChange:s=>o(s.target.value),rightSection:t.length>0?r.jsx(_t,{size:"xs",onClick:()=>o("")}):null})}const lt=25,rs={params:{},noRecordsText:v._({id:"EqGTpW"}),enableDownload:!1,enableFilters:!0,enablePagination:!0,enableRefresh:!0,enableSearch:!0,enableSelection:!1,pageSize:lt,defaultSortColumn:"",printingActions:[],barcodeActions:[],tableFilters:[],tableActions:[],idAccessor:"pk"};function js({url:e,tableState:t,columns:o,props:n}){var L,q,te,ae,ne;const{getTableColumnNames:s,setTableColumnNames:a}=Gr(),[i,l]=u.useState({}),c=go(),p=u.useMemo(()=>{var C;return((C=n.tableFilters)==null?void 0:C.map(b=>({...b,label:b.label??i[b.name]??`${b.name}`})))??[]},[n.tableFilters,i]),g=yt({enabled:!0,queryKey:["options",e,t.tableKey],retry:3,refetchOnMount:!0,queryFn:async()=>Ke.options(e,{params:d.params}).then(C=>{if(C.status==200){let b={},k=ro(C,"POST",!0)||{};oo(k,(E,le)=>{le.label&&(b[E]=le.label)});const M=t.tableKey.split("-")[0];l(b),a(M)(b)}return null})});u.useEffect(()=>{const C=t.tableKey.split("-")[0],b=s(C);if(Object.keys(b).length>0){l(b);return}g.refetch()},[e,t.tableKey,n.params]);const d=u.useMemo(()=>({...rs,...n}),[n]),m=o.some(C=>C.switchable??!0),h=u.useCallback(C=>{t.setSelectedRecords(C)},[]),f=u.useMemo(()=>{let C=o.map(b=>{let k=b.hidden??!1;return(b.switchable??!0)&&(k=t.hiddenColumns.includes(b.accessor)),{...b,hidden:k,title:b.title??i[b.accessor]??`${b.accessor}`}});return d.rowActions&&C.push({accessor:"actions",title:"   ",hidden:!1,switchable:!1,width:50,render:b=>{var k;return r.jsx(es,{actions:((k=d.rowActions)==null?void 0:k.call(d,b))??[],disabled:t.selectedRecords.length>0})}}),C},[o,i,d.rowActions,d.enableSelection,t.hiddenColumns,t.selectedRecords]);function j(C){let b=[...f],k=b.findIndex(M=>M.accessor==C);k>=0&&k<b.length&&(b[k].hidden=!b[k].hidden),t.setHiddenColumns(b.filter(M=>M.hidden).map(M=>M.accessor))}const[S,w]=u.useState(!1);u.useEffect(()=>{t.setPage(1)},[t.searchTerm]);function R(C=!1){let b={...d.params};if(t.activeFilters&&t.activeFilters.forEach(M=>b[M.name]=M.value),t.searchTerm&&(b.search=t.searchTerm),d.enablePagination&&C){let M=d.pageSize??lt;b.limit=M,b.offset=(t.page-1)*M}let k=z();return k&&(A.direction=="asc"?b.ordering=k:b.ordering=`-${k}`),b}function P(C){let b=R(!1);b.export=C;let k=Ke.getUri({url:e,params:b});window.open(k,"_blank")}const[A,I]=u.useState({columnAccessor:d.defaultSortColumn??"",direction:"asc"});function z(){let C=A.columnAccessor;if(C=="")return"";let b=f.find(k=>k.accessor==C);return(b==null?void 0:b.ordering)||C}const[D,T]=u.useState(d.noRecordsText??v._({id:"EqGTpW"})),F=C=>{t.setPage(1),I(C)},B=async()=>{let C=R(!0);return Ke.get(e,{params:C,timeout:5*1e3}).then(function(b){var k,M;switch(b.status){case 200:T(d.noRecordsText??v._({id:"EqGTpW"}));let E=((k=b.data)==null?void 0:k.results)??b.data??[];return n.dataFormatter&&(E=n.dataFormatter(E)),Array.isArray(E)||(T(v._({id:"3o3AAs"})),E=[]),t.setRecordCount(((M=b.data)==null?void 0:M.count)??E.length),E;case 400:T(v._({id:"UFBeQV"}));break;case 401:T(v._({id:"dA/8If"}));break;case 403:T(v._({id:"7JBW66"}));break;case 404:T(v._({id:"KPx1UV"}));break;default:T(v._({id:"29VNqC"})+": "+b.statusText);break}return[]}).catch(function(b){return T(v._({id:"SlfejT"})+": "+b.message),[]})},{data:Q,isFetching:U,refetch:O}=yt({queryKey:[t.page,n.params,A.columnAccessor,A.direction,t.tableKey,t.activeFilters,t.searchTerm],queryFn:B,refetchOnWindowFocus:!1,refetchOnMount:!0});u.useEffect(()=>{t.setRecords(Q??[])},[Q]);const ee=u.useCallback(()=>{t.selectedRecords.length!=0&&uo.openConfirmModal({title:v._({id:"QZQ+5V"}),children:r.jsx(Ur,{color:"red",title:v._({id:"3H+5DU"}),children:v._({id:"LYnzbA"})}),labels:{confirm:v._({id:"cnGeoo"}),cancel:v._({id:"dEgA5A"})},confirmProps:{color:"red"},onConfirm:()=>{let C=t.selectedRecords.map(b=>b.pk??b.id);Ke.delete(e,{data:{items:C}}).then(b=>{O(),jt({title:v._({id:"WH/5rN"}),message:v._({id:"8rHF9L"}),color:"green"})}).catch(b=>{console.warn(`Bulk delete operation failed at ${e}`),jt({title:v._({id:"SlfejT"}),message:v._({id:"QwkhPB"}),color:"red"})})}})},[t.selectedRecords]),oe=u.useCallback((C,b,k)=>{if(n.onRowClick)n.onRowClick(C,b,k);else if(d.modelType&&(C!=null&&C.pk)){let M=ko(d.modelType,C.pk);k!=null&&k.ctrlKey||k!=null&&k.shiftKey?(M=`/${Zr}${M}`,window.open(M,"_blank")):c(M)}},[n.onRowClick]);return r.jsxs(r.Fragment,{children:[d.enableFilters&&(p.length??0)>0&&r.jsx(Zn,{availableFilters:p,tableState:t,opened:S,onClose:()=>w(!1)}),r.jsxs(we,{spacing:"sm",children:[r.jsxs(ie,{position:"apart",children:[r.jsxs(ie,{position:"left",spacing:5,children:[(L=d.tableActions)==null?void 0:L.map((C,b)=>r.jsx(u.Fragment,{children:C},b)),(((q=d.barcodeActions)==null?void 0:q.length)??!1)&&r.jsx(Mt,{icon:r.jsx(fo,{}),label:v._({id:"v1qpjB"}),tooltip:v._({id:"v1qpjB"}),actions:d.barcodeActions??[]},"barcode-actions"),(((te=d.printingActions)==null?void 0:te.length)??!1)&&r.jsx(Mt,{icon:r.jsx(no,{}),label:v._({id:"inVgrM"}),tooltip:v._({id:"inVgrM"}),actions:d.printingActions??[]},"printing-actions"),(d.enableBulkDelete??!1)&&r.jsx(eo,{disabled:t.selectedRecords.length==0,icon:r.jsx($t,{}),color:"red",tooltip:v._({id:"QZQ+5V"}),onClick:ee})]},"custom-actions"),r.jsx(Yr,{}),r.jsxs(ie,{position:"right",spacing:5,children:[d.enableSearch&&r.jsx(ts,{searchCallback:C=>t.setSearchTerm(C)}),d.enableRefresh&&r.jsx(se,{children:r.jsx(ce,{label:v._({id:"8RYNR1"}),children:r.jsx(po,{onClick:()=>O()})})}),m&&r.jsx(Un,{columns:f,onToggleColumn:j}),d.enableFilters&&p.length>0&&r.jsx(qr,{size:"xs",label:((ae=t.activeFilters)==null?void 0:ae.length)??0,disabled:((ne=t.activeFilters)==null?void 0:ne.length)==0,children:r.jsx(se,{children:r.jsx(ce,{label:v._({id:"j2wMlR"}),children:r.jsx(xo,{onClick:()=>w(!S)})})})}),d.enableDownload&&r.jsx(Yn,{downloadCallback:P},"download-action")]})]}),r.jsxs(Y,{pos:"relative",children:[r.jsx(Jr,{visible:g.isLoading||g.isFetching}),r.jsx(Kn,{withBorder:!0,striped:!0,highlightOnHover:!0,loaderVariant:"dots",pinLastColumn:d.rowActions!=null,idAccessor:d.idAccessor,minHeight:300,totalRecords:t.recordCount,recordsPerPage:d.pageSize??lt,page:t.page,onPageChange:t.setPage,sortStatus:A,onSortStatusChange:F,selectedRecords:d.enableSelection?t.selectedRecords:void 0,onSelectedRecordsChange:d.enableSelection?h:void 0,rowExpansion:d.rowExpansion,fetching:U,noRecordsText:D,records:t.records,columns:f,onRowClick:oe,onCellClick:d.onCellClick,defaultColumnProps:{noWrap:!0,textAlignment:"left",cellsStyle:{overflow:"hidden"}}})]})]})]})}export{xs as A,js as I,ks as O,ws as R,bs as S,Kn as Z,ys as a,vs as b,St as c,es as d,Cs as e,ko as g,fs as u};
