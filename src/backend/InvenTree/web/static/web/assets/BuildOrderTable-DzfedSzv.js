import{j as e,r as a}from"./vendor-C5fHLTDD.js";import{i as t,M as r,a as f,A as d,U as x,l as j}from"./index-DX4YmBvQ.js";import{A as y}from"./AddItemButton-BjrbTsCx.js";import{I as C,a as I,P as U,d as g}from"./Instance-c0njg-mI.js";import{P as v}from"./ProgressBar-BhbAlmdB.js";import{R as F,S as T,b as S,C as D,T as R,r as h,d as k}from"./ColumnRenderers-Dz-jxqgo.js";import{x as A,z as M,d as B,y as L}from"./ApiForm-Dtyf-xF2.js";import{I as O}from"./notifications-DM-9a7Is.js";import{S as P,u as w,g as E,I as q}from"./InvenTreeTable-LkhQVMZE.js";import{a as H}from"./UseForm-Btt47jru.js";import{u as W}from"./DesktopAppView-DlNUv0Ur.js";function z(){return{reference:{},part:{filters:{assembly:!0,virtual:!1}},title:{},quantity:{},project_code:{icon:e.jsx(A,{})},priority:{},parent:{icon:e.jsx(M,{}),filters:{part_detail:!0}},sales_order:{icon:e.jsx(B,{})},batch:{},target_date:{icon:e.jsx(L,{})},take_from:{},destination:{filters:{structural:!1}},link:{icon:e.jsx(O,{})},issued_by:{icon:e.jsx(C,{})},responsible:{icon:e.jsx(I,{}),filters:{is_active:!0}}}}function G(){return[F(),{accessor:"part",sortable:!0,switchable:!1,render:s=>e.jsx(U,{part:s.part_detail})},{accessor:"title",sortable:!1},{accessor:"completed",sortable:!0,switchable:!1,render:s=>e.jsx(v,{progressLabel:!0,value:s.completed,maximum:s.quantity})},T(r.build),S(),{accessor:"priority",sortable:!0},D(),R(),{accessor:"completion_date",sortable:!0,render:s=>h(s.completion_date)},{accessor:"issued_by",sortable:!0,render:s=>e.jsx(g,{instance:s==null?void 0:s.issued_by_detail})},k()]}function te({partId:s,parentBuildId:o,salesOrderId:i}){const c=a.useMemo(()=>G(),[]),m=a.useMemo(()=>[{name:"active",type:"boolean",label:t._({id:"F6pfE9"}),description:t._({id:"Or8Url"})},{name:"status",description:t._({id:"OIH7WF"}),choiceFunction:P(r.build)},{name:"overdue",type:"boolean",description:t._({id:"bWsuU0"})},{name:"assigned_to_me",type:"boolean",label:t._({id:"iU3XRS"}),description:t._({id:"BnF3ID"})}],[]),p=W(),l=f(),b=w("buildorder"),n=H({url:d.build_order_list,title:t._({id:"59jtLx"}),fields:z(),initialData:{part:s,sales_order:i,parent:o},onFormSuccess:u=>{u.pk&&p(E(r.build,u.pk))}}),_=a.useMemo(()=>[e.jsx(y,{hidden:!l.hasAddRole(x.build),tooltip:t._({id:"59jtLx"}),onClick:()=>n.open()})],[l]);return e.jsxs(e.Fragment,{children:[n.modal,e.jsx(q,{url:j(d.build_order_list),tableState:b,columns:c,props:{enableDownload:!0,params:{part:s,sales_order:i,parent:o,part_detail:!0},tableActions:_,tableFilters:m,modelType:r.build}})]})}export{te as B,z as b};
