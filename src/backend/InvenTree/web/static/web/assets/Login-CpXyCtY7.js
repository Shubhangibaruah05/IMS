import{af as F,j as e,G as h,a1 as P,C as R,aa as V,h as m,D as I,r as _,H as M,S as z,ac as f,bn as B,A as w,L as Z,B as W,s as Y,K,bg as H,T as X,ao as $,g as J,ae as Q}from"./vendor-C5fHLTDD.js";import{T as o}from"./BaseContext-BGXKB9QI.js";import{g as u,h as k,j as O,l as D,A as G,i as n,B as ee,d as se,n as b,t as S,C as te,u as q,D as ne,E as ie}from"./index-DX4YmBvQ.js";import{L as re,C as ae}from"./LanguageSelect-BNrS9Qnc.js";import{u as L}from"./use-form-C4w6oFQ9.js";import{u as C,b as N,g as oe}from"./DesktopAppView-DlNUv0Ur.js";import{E as A}from"./EditButton-CpKiwwGV.js";import{I as le}from"./IconTrash-KFql82qv.js";import"./IconEdit-DwKL16RF.js";import"./IconDeviceFloppy-BZZPsgPR.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var de=u("outline","brand-azure","IconBrandAzure",[["path",{d:"M6 7.5l-4 9.5h4l6 -15z",key:"svg-0"}],["path",{d:"M22 20l-7 -15l-3 7l4 5l-8 3z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ce=u("outline","brand-bitbucket","IconBrandBitbucket",[["path",{d:"M3.648 4a.64 .64 0 0 0 -.64 .744l3.14 14.528c.07 .417 .43 .724 .852 .728h10a.644 .644 0 0 0 .642 -.539l3.35 -14.71a.641 .641 0 0 0 -.64 -.744l-16.704 -.007z",key:"svg-0"}],["path",{d:"M14 15h-4l-1 -6h6z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ue=u("outline","brand-discord","IconBrandDiscord",[["path",{d:"M8 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-0"}],["path",{d:"M14 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M15.5 17c0 1 1.5 3 2 3c1.5 0 2.833 -1.667 3.5 -3c.667 -1.667 .5 -5.833 -1.5 -11.5c-1.457 -1.015 -3 -1.34 -4.5 -1.5l-.972 1.923a11.913 11.913 0 0 0 -4.053 0l-.975 -1.923c-1.5 .16 -3.043 .485 -4.5 1.5c-2 5.667 -2.167 9.833 -1.5 11.5c.667 1.333 2 3 3.5 3c.5 0 2 -2 2 -3",key:"svg-2"}],["path",{d:"M7 16.5c3.5 1 6.5 1 10 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var he=u("outline","brand-facebook","IconBrandFacebook",[["path",{d:"M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xe=u("outline","brand-flickr","IconBrandFlickr",[["path",{d:"M7 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M17 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ge=u("outline","brand-github","IconBrandGithub",[["path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pe=u("outline","brand-gitlab","IconBrandGitlab",[["path",{d:"M21 14l-9 7l-9 -7l3 -11l3 7h6l3 -7z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var me=u("outline","brand-google","IconBrandGoogle",[["path",{d:"M20.945 11a9 9 0 1 1 -3.284 -5.997l-2.655 2.392a5.5 5.5 0 1 0 2.119 6.605h-4.125v-3h7.945z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var je=u("outline","brand-reddit","IconBrandReddit",[["path",{d:"M12 8c2.648 0 5.028 .826 6.675 2.14a2.5 2.5 0 0 1 2.326 4.36c0 3.59 -4.03 6.5 -9 6.5c-4.875 0 -8.845 -2.8 -9 -6.294l-1 -.206a2.5 2.5 0 0 1 2.326 -4.36c1.646 -1.313 4.026 -2.14 6.674 -2.14z",key:"svg-0"}],["path",{d:"M12 8l1 -5l6 1",key:"svg-1"}],["path",{d:"M19 4m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["circle",{cx:"9",cy:"13",r:".5",fill:"currentColor",key:"svg-3"}],["circle",{cx:"15",cy:"13",r:".5",fill:"currentColor",key:"svg-4"}],["path",{d:"M10 17c.667 .333 1.333 .5 2 .5s1.333 -.167 2 -.5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ve=u("outline","brand-twitch","IconBrandTwitch",[["path",{d:"M4 5v11a1 1 0 0 0 1 1h2v4l4 -4h5.584c.266 0 .52 -.105 .707 -.293l2.415 -2.414c.187 -.188 .293 -.442 .293 -.708v-8.585a1 1 0 0 0 -1 -1h-14a1 1 0 0 0 -1 1z",key:"svg-0"}],["path",{d:"M16 8l0 4",key:"svg-1"}],["path",{d:"M12 8l0 4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var be=u("outline","brand-twitter","IconBrandTwitter",[["path",{d:"M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c0 -.249 1.51 -2.772 1.818 -4.013z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fe=u("outline","language","IconLanguage",[["path",{d:"M4 5h7",key:"svg-0"}],["path",{d:"M9 3v2c0 4.418 -2.239 8 -5 8",key:"svg-1"}],["path",{d:"M5 9c0 2.144 2.952 3.908 6.7 4",key:"svg-2"}],["path",{d:"M12 20l4 -9l4 9",key:"svg-3"}],["path",{d:"M19.1 18h-6.2",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ke=u("outline","login","IconLogin",[["path",{d:"M15 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M21 12h-13l3 -3",key:"svg-1"}],["path",{d:"M11 15l-3 -3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ie=u("outline","server","IconServer",[["path",{d:"M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 12m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-1"}],["path",{d:"M7 8l0 .01",key:"svg-2"}],["path",{d:"M7 16l0 .01",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ye=u("outline","square-plus","IconSquarePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-2"}]]);function _e(){const[t,l]=F();return e.jsxs(h,{position:"center",style:{border:t===!0?"1px dashed ":"",margin:t===!0?2:12,padding:t===!0?8:0},children:[e.jsx(P,{onClick:()=>l.toggle(),size:"lg",children:e.jsx(fe,{})}),t&&e.jsx(h,{children:e.jsx(re,{})})]})}function Me({hostname:t,toggleHostEdit:l}){const[s]=k(d=>[d.server]);return e.jsx(R,{mx:"md",children:e.jsxs(h,{children:[e.jsx(ae,{}),e.jsx(_e,{}),window.INVENTREE_SETTINGS.show_server_selector&&e.jsx(V,{label:t,children:e.jsx(Ie,{onClick:l})}),e.jsxs(m,{c:"dimmed",children:[s.version," | ",s.apiVersion]})]})})}const we={google:e.jsx(me,{}),github:e.jsx(ge,{}),facebook:e.jsx(he,{}),discord:e.jsx(ue,{}),twitter:e.jsx(be,{}),bitbucket:e.jsx(ce,{}),flickr:e.jsx(xe,{}),gitlab:e.jsx(pe,{}),reddit:e.jsx(je,{}),twitch:e.jsx(ve,{}),microsoft:e.jsx(de,{})};function U({provider:t}){function l(){O.put(D(G.ui_preference),{preferred_method:"pui"},{headers:{Authorization:""}}).then(()=>{window.location.href=t.login})}return e.jsxs(I,{leftIcon:Se(t),radius:"xl",component:"a",onClick:l,children:[t.display_name," "]})}function Se(t){return we[t.id]||e.jsx(ke,{})}function Le(){const t=L({initialValues:{username:"",password:""}}),l=L({initialValues:{email:""}}),[s,d]=F(!0),[r]=k(i=>[i.auth_settings]),c=C(),x=N(),[a,g]=_.useState(!1);function j(){g(!0),s===!0?ee(t.values.username,t.values.password).then(()=>{var i;g(!1),se.getState().hasToken()?(b.show({title:n._({id:"6cPKtu"}),message:n._({id:"rxWA39"}),color:"green",icon:e.jsx(S,{size:"1rem"})}),c(((i=x==null?void 0:x.state)==null?void 0:i.redirectFrom)??"/home")):b.show({title:n._({id:"4GKuCs"}),message:n._({id:"tnaYa/"}),color:"red"})}):te(l.values.email).then(i=>{g(!1),(i==null?void 0:i.status)==="ok"?b.show({title:n._({id:"XAIcYu"}),message:n._({id:"R2JMfc"}),color:"green",icon:e.jsx(S,{size:"1rem"}),autoClose:!1}):b.show({title:n._({id:"ccnxuA"}),message:n._({id:"tnaYa/"}),color:"red"})})}return e.jsxs(e.Fragment,{children:[(r==null?void 0:r.sso_enabled)===!0?e.jsxs(e.Fragment,{children:[e.jsx(h,{grow:!0,mb:"md",mt:"md",children:r.providers.map(i=>e.jsx(U,{provider:i},i.id))}),e.jsx(M,{label:n._({id:"zTZjMy"}),labelPosition:"center",my:"lg"})]}):null,e.jsxs("form",{onSubmit:t.onSubmit(()=>{}),children:[s?e.jsxs(z,{spacing:0,children:[e.jsx(f,{required:!0,label:n._({id:"7sNhEz"}),placeholder:n._({id:"k1RkIL"}),...t.getInputProps("username")}),e.jsx(B,{required:!0,label:n._({id:"8ZsakT"}),placeholder:n._({id:"9TO8nT"}),...t.getInputProps("password")}),(r==null?void 0:r.password_forgotten_enabled)===!0&&e.jsx(h,{position:"apart",mt:"0",children:e.jsx(w,{component:"button",type:"button",color:"dimmed",size:"xs",onClick:()=>c("/reset-password"),children:e.jsx(o,{id:"RfwZxd"})})})]}):e.jsx(z,{children:e.jsx(f,{required:!0,label:n._({id:"O3oNi5"}),description:n._({id:"Wr5sDQ"}),placeholder:"email@example.org",...l.getInputProps("email")})}),e.jsxs(h,{position:"apart",mt:"xl",children:[e.jsx(w,{component:"button",type:"button",color:"dimmed",size:"xs",onClick:()=>d.toggle(),children:s?e.jsx(o,{id:"7ZOmjI"}):e.jsx(o,{id:"vZk5Sm"})}),e.jsx(I,{type:"submit",disabled:a,onClick:j,children:a?e.jsx(Z,{size:"sm"}):e.jsx(e.Fragment,{children:s?e.jsx(o,{id:"ADVQ46"}):e.jsx(o,{id:"i/TzEU"})})})]})]})]})}function ze(){const t=L({initialValues:{username:"",email:"",password1:"",password2:""}}),l=C(),[s]=k(a=>[a.auth_settings]),[d,r]=_.useState(!1);function c(){r(!0),O.post(D(G.user_register),t.values,{headers:{Authorization:""}}).then(a=>{(a==null?void 0:a.status)===204&&(r(!1),b.show({title:n._({id:"EoCs7m"}),message:n._({id:"n2c6Ul"}),color:"green",icon:e.jsx(S,{size:"1rem"})}),l("/home"))}).catch(a=>{var g,j;if(a.response.status===400){r(!1);for(const[v,y]of Object.entries(a.response.data))t.setFieldError(v,y);let i="";(j=(g=a.response)==null?void 0:g.data)!=null&&j.non_field_errors&&(i=a.response.data.non_field_errors),b.show({title:n._({id:"ccnxuA"}),message:n._({id:"tnaYa/"})+i,color:"red",autoClose:3e4})}})}const x=(s==null?void 0:s.registration_enabled)&&(s==null?void 0:s.sso_registration);return e.jsxs(e.Fragment,{children:[(s==null?void 0:s.registration_enabled)&&e.jsxs("form",{onSubmit:t.onSubmit(()=>{}),children:[e.jsxs(z,{spacing:0,children:[e.jsx(f,{required:!0,label:n._({id:"7sNhEz"}),placeholder:n._({id:"k1RkIL"}),...t.getInputProps("username")}),e.jsx(f,{required:!0,label:n._({id:"O3oNi5"}),description:n._({id:"kXXdWU"}),placeholder:"email@example.org",...t.getInputProps("email")}),e.jsx(B,{required:!0,label:n._({id:"8ZsakT"}),placeholder:n._({id:"9TO8nT"}),...t.getInputProps("password1")}),e.jsx(B,{required:!0,label:n._({id:"NK5XEe"}),placeholder:n._({id:"R1OtIL"}),...t.getInputProps("password2")})]}),e.jsx(h,{position:"apart",mt:"xl",children:e.jsx(I,{type:"submit",disabled:d,onClick:c,fullWidth:!0,children:e.jsx(o,{id:"fgLNSM"})})})]}),x&&e.jsx(M,{label:n._({id:"IES56a"}),labelPosition:"center",my:"lg"}),(s==null?void 0:s.sso_registration)===!0&&e.jsx(h,{grow:!0,mb:"md",mt:"md",children:s.providers.map(a=>e.jsx(U,{provider:a},a.id))})]})}function Be({loginMode:t,setMode:l}){const[s]=k(r=>[r.auth_settings]);return((s==null?void 0:s.registration_enabled)||(s==null?void 0:s.sso_registration)||!1)===!1?null:e.jsx(m,{ta:"center",size:"xs",mt:"md",children:t?e.jsxs(e.Fragment,{children:[e.jsx(o,{id:"ln9/n9"})," ",e.jsx(w,{component:"button",type:"button",color:"dimmed",size:"xs",onClick:()=>l.close(),children:e.jsx(o,{id:"fgLNSM"})})]}):e.jsx(w,{component:"button",type:"button",color:"dimmed",size:"xs",onClick:()=>l.open(),children:e.jsx(o,{id:"jZUk0D"})})})}function Fe({data:t,saveOptions:l}){const s=L({initialValues:t});function d(c){const x=s.values;delete x[c],s.setValues(x)}const r=Object.entries(s.values).map(([c])=>e.jsx(h,{mt:"xs",children:s.values[c]!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(f,{placeholder:n._({id:"Ai2U7L"}),withAsterisk:!0,sx:{flex:1},...s.getInputProps(`${c}.host`)}),e.jsx(f,{placeholder:n._({id:"6YtxFj"}),withAsterisk:!0,sx:{flex:1},...s.getInputProps(`${c}.name`)}),e.jsx(P,{color:"red",onClick:()=>{d(c)},children:e.jsx(le,{})})]})},c));return e.jsx("form",{onSubmit:s.onSubmit(l),children:e.jsxs(W,{sx:{maxWidth:500},mx:"auto",children:[r.length>0?e.jsxs(h,{mb:"xs",children:[e.jsx(m,{weight:500,size:"sm",sx:{flex:1},children:e.jsx(o,{id:"Ai2U7L"})}),e.jsx(m,{weight:500,size:"sm",sx:{flex:1},children:e.jsx(o,{id:"6YtxFj"})})]}):e.jsx(m,{color:"dimmed",align:"center",children:e.jsx(o,{id:"yWMzcH"})}),r,e.jsxs(h,{mt:"md",children:[e.jsxs(I,{onClick:()=>s.setFieldValue(`${Y()}`,{name:"",host:""}),children:[e.jsx(ye,{}),e.jsx(o,{id:"UYWLpE"})]}),e.jsx(K,{sx:{flex:1}}),e.jsx(I,{type:"submit",children:e.jsx(o,{id:"tfDRzk"})})]})]})})}function Ce({hostKey:t,ChangeHost:l,setHostEdit:s}){const[d,r]=H([!1,!0]),[c,x,a]=q(i=>[i.setHost,i.setHostList,i.hostList]),g=Object.keys(a).map(i=>{var v;return{value:i,label:(v=a[i])==null?void 0:v.name}});function j(i){x(i),i[t]===void 0&&c("",""),r()}return e.jsxs(e.Fragment,{children:[e.jsx(X,{order:3,children:e.jsx(o,{id:"GG8+B2"})}),e.jsxs(h,{children:[e.jsxs(h,{children:[e.jsx($,{value:t,onChange:l,data:g,disabled:d}),e.jsx(A,{setEditing:r,editing:d,disabled:d})]}),e.jsx(A,{setEditing:s,editing:!0,disabled:d,saveIcon:e.jsx(S,{})})]}),d?e.jsxs(e.Fragment,{children:[e.jsx(M,{my:"sm"}),e.jsx(m,{children:e.jsx(o,{id:"uqEJlE"})}),e.jsx(Fe,{data:a,saveOptions:j})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{my:"sm"}),e.jsx(Ee,{hostList:a,hostKey:t})]})]})}function Ee({hostList:t,hostKey:l}){var d;const[s]=k(r=>[r.server]);return e.jsxs(m,{children:[(d=t[l])==null?void 0:d.host,e.jsx("br",{}),e.jsx(o,{id:"GUtCZC",values:{0:s.version}}),e.jsx("br",{}),e.jsx(o,{id:"4/F1y3",values:{0:s.apiVersion}}),e.jsx("br",{}),e.jsx(o,{id:"UVRlfm",values:{0:s.instance}}),e.jsx("br",{}),e.jsx(o,{id:"ed0N/H",values:{0:s.worker_pending_tasks,1:s.plugins_enabled?` (${s.active_plugins.length})`:null},components:{0:e.jsx(m,{span:!0,c:s.worker_running?"green":"red"}),1:e.jsx(m,{span:!0,c:s.plugins_enabled?"green":"red"})}})]})}function Ue(){var E;const[t,l,s]=q(p=>[p.hostKey,p.setHost,p.hostList]),[d,r]=k(p=>[p.server,p.fetchServerApiState]),c=s[t]===void 0?n._({id:"bX1aQ5"}):(E=s[t])==null?void 0:E.name,[x,a]=H([!1,!0]),[g,j]=F(!0),i=C(),v=N();function y(p){var T;l((T=s[p])==null?void 0:T.host,p),ie(),r()}return _.useEffect(()=>{var p;t===""&&y(oe),ne(i,(p=v==null?void 0:v.state)==null?void 0:p.redirectFrom,!0)},[]),_.useEffect(()=>{d.server===null&&r()},[d]),e.jsx(R,{mih:"100vh",children:e.jsx(J,{w:"md",miw:400,children:x?e.jsx(Ce,{hostKey:t,ChangeHost:y,setHostEdit:a}):e.jsxs(e.Fragment,{children:[e.jsxs(Q,{radius:"md",p:"xl",withBorder:!0,children:[e.jsx(m,{size:"lg",weight:500,children:g?e.jsx(o,{id:"BL4vL0"}):e.jsx(o,{id:"qJ5FUT"})}),g?e.jsx(Le,{}):e.jsx(ze,{}),e.jsx(Be,{loginMode:g,setMode:j})]}),e.jsx(Me,{hostname:c,toggleHostEdit:a})]})})})}export{Ue as default};
