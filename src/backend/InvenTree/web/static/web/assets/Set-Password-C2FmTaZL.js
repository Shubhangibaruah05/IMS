import{r as f,j as e,C as u,g,S as m,T as x,bn as _,D as j}from"./vendor-C5fHLTDD.js";import{L as k,T as l}from"./BaseContext-BGXKB9QI.js";import{n as o,i as t,j as T,l as C,A as E}from"./index-DX4YmBvQ.js";import{h as F,u as P}from"./DesktopAppView-DlNUv0Ur.js";import{u as S}from"./use-form-C4w6oFQ9.js";function I(){const i=S({initialValues:{password:""}}),[a]=F(),r=P(),n=a.get("token"),d=a.get("uid");function h(){o.show({title:t._({id:"eV2FZ+"}),message:t._({id:"uAHzZQ"}),color:"red"}),r("/login")}function p(s){o.show({title:t._({id:"WhimMi"}),message:(s==null?void 0:s.new_password2)||(s==null?void 0:s.new_password1)||(s==null?void 0:s.token),color:"red"})}f.useEffect(()=>{(!n||!d)&&(o.show({title:t._({id:"+5xxir"}),message:t._({id:"KuLTFa"}),color:"red"}),r("/login"))},[n]);function w(){T.post(C(E.user_reset_set),{uid:d,token:n,new_password1:i.values.password,new_password2:i.values.password},{headers:{Authorization:""}}).then(s=>{s.status===200?(o.show({title:t._({id:"Hw2MHB"}),message:t._({id:"+p8fKY"}),color:"green",autoClose:!1}),r("/login")):p(s.data)}).catch(s=>{var c;s.response.status===400&&((c=s.response.data)==null?void 0:c.token)=="Invalid value"?h():p(s.response.data)})}return e.jsx(k,{children:e.jsx(u,{mih:"100vh",children:e.jsx(g,{w:"md",miw:425,children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(l,{id:"V/e7nf"})}),e.jsx(m,{children:e.jsx(_,{required:!0,label:t._({id:"8ZsakT"}),description:t._({id:"Wr5sDQ"}),...i.getInputProps("password")})}),e.jsx(j,{type:"submit",onClick:w,children:e.jsx(l,{id:"F+gz9Z"})})]})})})})}export{I as default};
