import{j as e,r as n}from"./vendor-C5fHLTDD.js";import{a as b,i as r,M as a,A as u,U as C,l as j}from"./index-DX4YmBvQ.js";import{A as F}from"./AddItemButton-BjrbTsCx.js";import{I as T,T as x}from"./Instance-c0njg-mI.js";import{I as A}from"./IconAddressBook-DD_FnNjd.js";import{I as g}from"./IconUsers-VfNlX2pM.js";import{u as I,S,O as M,b as U,A as O,g as h,I as D}from"./InvenTreeTable-LkhQVMZE.js";import{a as k}from"./UseForm-Btt47jru.js";import{R as y,D as R,a as E,S as P,b as V,C as W,T as v,f as z,c as B}from"./ColumnRenderers-Dz-jxqgo.js";import{u as q}from"./DesktopAppView-DlNUv0Ur.js";function w(){return{reference:{},description:{},customer:{filters:{is_customer:!0}},customer_reference:{},project_code:{},order_currency:{},target_date:{},link:{},contact:{icon:e.jsx(T,{}),adjustFilters:s=>({...s.filters,company:s.data.customer})},address:{icon:e.jsx(A,{}),adjustFilters:s=>({...s.filters,company:s.data.customer})},responsible:{icon:e.jsx(g,{})}}}function $({partId:s,customerId:i}){const l=I("sales-order"),m=b(),d=q(),p=n.useMemo(()=>[{name:"status",label:r._({id:"uAQUqI"}),description:r._({id:"OIH7WF"}),choiceFunction:S(a.salesorder)},M(),U(),O()],[]),c=k({url:u.sales_order_list,title:r._({id:"VzdnWM"}),fields:w(),initialData:{customer:i},onFormSuccess:o=>{o.pk?d(h(a.salesorder,o.pk)):l.refreshTable()}}),f=n.useMemo(()=>[e.jsx(F,{tooltip:r._({id:"VzdnWM"}),onClick:()=>c.open(),hidden:!m.hasAddRole(C.sales_order)})],[m]),_=n.useMemo(()=>[y(),{accessor:"customer__name",title:r._({id:"876pfE"}),sortable:!0,render:function(o){let t=o.customer_detail??{};return e.jsx(x,{src:t==null?void 0:t.image,alt:t.name,text:t.name})}},{accessor:"customer_reference",title:r._({id:"ZVUe1A"})},R({}),E(),P(a.salesorder),V(),W(),v(),z(),B()],[]);return e.jsxs(e.Fragment,{children:[c.modal,e.jsx(D,{url:j(u.sales_order_list),tableState:l,columns:_,props:{params:{customer_detail:!0,part:s,customer:i},tableFilters:p,tableActions:f,modelType:a.salesorder}})]})}export{$ as S};
