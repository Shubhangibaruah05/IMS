import{r as o,j as a,a4 as j,aK as d,S as K,z as v}from"./vendor-C5fHLTDD.js";import{a as R,A as c,i as t,M as s,U as l,l as P}from"./index-DX4YmBvQ.js";import{I as q,D as p}from"./ItemDetails-DTEWr5C0.js";import{D as w}from"./DetailsImage-Y3z_v9dS.js";import{A as N,a as Y,E as G,D as Q}from"./ActionDropdown-C-AjyTLr.js";import{P as J}from"./PageDetail-BwkjpKwR.js";import{P as O}from"./PanelGroup-CWuySmV8.js";import{a as W}from"./CompanyForms-DiSrilXC.js";import{u as X}from"./UseForm-Btt47jru.js";import{u as $}from"./UseInstance-rwUPjJ4i.js";import{P as z}from"./PurchaseOrderTable-CR60EQdn.js";import{d as L}from"./DesktopAppView-DlNUv0Ur.js";import{I as V}from"./IconInfoCircle-D5K91YCo.js";import{I as Z,c as B,j as H,h as ee}from"./ApiForm-Dtyf-xF2.js";import"./InvenTreeTable-LkhQVMZE.js";import"./ActionButton-seel8ZoK.js";import"./notifications-DM-9a7Is.js";import"./ModelType-C8nSW6qW.js";import"./StylishText-CD9I8-X7.js";import"./IconEdit-DwKL16RF.js";import"./IconTrash-KFql82qv.js";import"./BaseContext-BGXKB9QI.js";import"./IconSearch-CKaD9XHL.js";import"./IconRefresh-ClXNAr2V.js";import"./ProgressBar-BhbAlmdB.js";import"./YesNoButton-DIAHIY63.js";import"./Instance-c0njg-mI.js";import"./index-DtVngfXu.js";import"./IconQrcode-DcoHpd2K.js";import"./Placeholder-C1-1kY0o.js";import"./IconAt-DPf0GkPm.js";import"./AddItemButton-BjrbTsCx.js";import"./IconPlus-QsNVBJ5N.js";import"./PurchaseOrderForms-6UEJk9M0.js";import"./StandaloneField-BRVMmltH.js";import"./IconCoins-B2Q7vuLB.js";import"./IconAddressBook-DD_FnNjd.js";import"./IconUsers-VfNlX2pM.js";import"./ColumnRenderers-Dz-jxqgo.js";import"./IconExternalLink-CDh1KHXW.js";function Ge(){var _,h;const{id:I}=L(),r=R(),{instance:e,instanceQuery:m,refreshInstance:D}=$({endpoint:c.supplier_part_list,pk:I,hasPrimaryKey:!0,params:{part_detail:!0,supplier_detail:!0}}),E=o.useMemo(()=>{var f,y,k,x,g,b;if(m.isFetching)return a.jsx(j,{});let i=e??{};i.manufacturer=(f=i.manufacturer_detail)==null?void 0:f.pk,i.MPN=(y=i.manufacturer_part_detail)==null?void 0:y.MPN,i.manufacturer_part=(k=i.manufacturer_part_detail)==null?void 0:k.pk;let n=[{type:"link",name:"part",label:t._({id:"GNd5ad"}),model:s.part,hidden:!e.part},{type:"string",name:"description",label:t._({id:"Nu4oKW"}),copy:!0},{type:"link",external:!0,name:"link",label:t._({id:"0R4wMK"}),copy:!0,hidden:!e.link},{type:"string",name:"note",label:t._({id:"KiJn9B"}),copy:!0,hidden:!e.note}],F=[{type:"link",name:"supplier",label:t._({id:"PYTEl0"}),model:s.company,icon:"suppliers",hidden:!e.supplier},{type:"string",name:"SKU",label:t._({id:"y90mqQ"}),copy:!0,icon:"reference"},{type:"link",name:"manufacturer",label:t._({id:"+m9/3S"}),model:s.company,icon:"manufacturers",hidden:!i.manufacturer},{type:"link",name:"manufacturer_part",model_field:"MPN",label:t._({id:"ZCCuT2"}),model:s.manufacturerpart,copy:!0,icon:"reference",hidden:!i.manufacturer_part}],T=[{type:"string",name:"packaging",label:t._({id:"pD/Ew0"}),copy:!0,hidden:!i.packaging},{type:"string",name:"pack_quantity",label:t._({id:"J9LTXQ"}),copy:!0,hidden:!i.pack_quantity,icon:"packages"}],U=[{type:"string",name:"available",label:t._({id:"WrzEdW"}),copy:!0,icon:"packages"},{type:"string",name:"availability_updated",label:t._({id:"Qeo1xd"}),copy:!0,hidden:!i.availability_updated,icon:"calendar"}];return a.jsxs(q,{children:[a.jsxs(d,{children:[a.jsx(d.Col,{span:4,children:a.jsx(w,{appRole:l.part,src:(x=e==null?void 0:e.part_detail)==null?void 0:x.image,apiPath:P(c.part_list,(g=e==null?void 0:e.part_detail)==null?void 0:g.pk),pk:(b=e==null?void 0:e.part_detail)==null?void 0:b.pk})}),a.jsx(d.Col,{span:8,children:a.jsx(p,{title:t._({id:"nne72x"}),fields:n,item:i})})]}),a.jsx(p,{title:t._({id:"PYTEl0"}),fields:F,item:i}),a.jsx(p,{title:t._({id:"pD/Ew0"}),fields:T,item:i}),a.jsx(p,{title:t._({id:"lXkUEV"}),fields:U,item:i})]})},[e,m.isFetching]),S=o.useMemo(()=>[{name:"details",label:t._({id:"F+J5VC"}),icon:a.jsx(V,{}),content:E},{name:"stock",label:t._({id:"b447qM"}),icon:a.jsx(Z,{})},{name:"purchaseorders",label:t._({id:"85Yvr2"}),icon:a.jsx(B,{}),content:e!=null&&e.pk?a.jsx(z,{supplierPartId:e.pk}):a.jsx(j,{})},{name:"pricing",label:t._({id:"aHCEmh"}),icon:a.jsx(H,{})}],[e]),M=o.useMemo(()=>[a.jsx(N,{tooltip:t._({id:"XIY/fv"}),icon:a.jsx(ee,{}),actions:[Y({hidden:!r.hasAddRole(l.purchase_order)}),G({hidden:!r.hasChangeRole(l.purchase_order),onClick:()=>u.open()}),Q({hidden:!r.hasDeleteRole(l.purchase_order)})]},"part")],[r]),C=W({hidePart:!0,partPk:e==null?void 0:e.pk}),u=X({url:c.supplier_part_list,pk:e==null?void 0:e.pk,title:t._({id:"qZstuw"}),fields:C,onFormSuccess:D}),A=o.useMemo(()=>{var i,n;return[{name:t._({id:"UOTpFa"}),url:"/purchasing/"},{name:((i=e==null?void 0:e.supplier_detail)==null?void 0:i.name)??t._({id:"PYTEl0"}),url:`/purchasing/supplier/${((n=e==null?void 0:e.supplier_detail)==null?void 0:n.pk)??""}`}]},[e]);return a.jsxs(a.Fragment,{children:[u.modal,a.jsxs(K,{spacing:"xs",children:[a.jsx(v,{visible:m.isFetching}),a.jsx(J,{title:t._({id:"nne72x"}),subtitle:`${e.SKU} - ${(_=e==null?void 0:e.part_detail)==null?void 0:_.name}`,breadcrumbs:A,actions:M,imageUrl:(h=e==null?void 0:e.part_detail)==null?void 0:h.thumbnail}),a.jsx(O,{pageKey:"supplierpart",panels:S})]})]})}export{Ge as default};
