import{r as h,F as U,j as e,S as _,T as I,a9 as M,L as H,aK as u,bf as T,G as S,I as O,h as y,ac as W,D as C,aa as J,bg as Z,g as V,J as Y,bh as B,bi as $,bj as w,bk as ee,ao as se,a5 as te}from"./vendor-C5fHLTDD.js";import{T as s}from"./BaseContext-BGXKB9QI.js";import{g as D,i as r,a as N,A as E,j as R,l as f,q as ie,w as ne,S as b,u as v}from"./index-DX4YmBvQ.js";import{P as ae}from"./PanelGroup-CWuySmV8.js";import{U as k,S as re}from"./SettingList-DDWUNgd-.js";import{P as oe}from"./Placeholder-C1-1kY0o.js";import{I as L}from"./IconAlertCircle-C-1MzrG3.js";import{I as le}from"./IconAt-DPf0GkPm.js";import{E as ce}from"./EditButton-CpKiwwGV.js";import{u as de}from"./use-form-C4w6oFQ9.js";import{C as he,L as je}from"./LanguageSelect-BNrS9Qnc.js";import{I as xe}from"./StylishText-CD9I8-X7.js";import{I as ue}from"./IconSearch-CKaD9XHL.js";import{I as _e,a as Ee}from"./IconFileAnalytics-DuYqxtzP.js";import"./DesktopAppView-DlNUv0Ur.js";import"./ApiForm-Dtyf-xF2.js";import"./notifications-DM-9a7Is.js";import"./Instance-c0njg-mI.js";import"./IconInfoCircle-D5K91YCo.js";import"./IconTrash-KFql82qv.js";import"./IconExternalLink-CDh1KHXW.js";import"./IconQrcode-DcoHpd2K.js";import"./IconEdit-DwKL16RF.js";import"./IconDeviceFloppy-BZZPsgPR.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Se=D("outline","device-desktop-analytics","IconDeviceDesktopAnalytics",[["path",{d:"M3 4m0 1a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M7 20h10",key:"svg-1"}],["path",{d:"M9 16v4",key:"svg-2"}],["path",{d:"M15 16v4",key:"svg-3"}],["path",{d:"M9 12v-4",key:"svg-4"}],["path",{d:"M12 12v-1",key:"svg-5"}],["path",{d:"M15 12v-2",key:"svg-6"}],["path",{d:"M12 12v-1",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var me=D("outline","device-desktop","IconDeviceDesktop",[["path",{d:"M3 5a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1v-10z",key:"svg-0"}],["path",{d:"M7 20h10",key:"svg-1"}],["path",{d:"M9 16v4",key:"svg-2"}],["path",{d:"M15 16v4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pe=D("outline","lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ge=D("outline","user-circle","IconUserCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855",key:"svg-2"}]]);function Ce(){const[n,t]=h.useState(!1),[c,x]=h.useState(!1),{isLoading:j,data:d}=U({queryKey:["sso-providers"],queryFn:()=>R.get(f(E.sso_providers)).then(l=>l.data)});return h.useEffect(()=>{d!==void 0&&(t(d.sso_enabled||!1),x(d.mfa_required||!1))},[d]),e.jsxs(_,{children:[e.jsx(I,{order:5,children:e.jsx(s,{id:"O3oNi5"})}),e.jsx(Re,{}),e.jsx(I,{order:5,children:e.jsx(s,{id:"sGV/QR"})}),n?e.jsx(fe,{dataProvider:d}):e.jsx(M,{icon:e.jsx(L,{size:"1rem"}),title:r._({id:"GYQmzM"}),color:"yellow",children:e.jsx(s,{id:"Sm3zWc"})}),e.jsx(I,{order:5,children:e.jsx(s,{id:"gzRIYb"})}),j?e.jsx(H,{}):e.jsx(e.Fragment,{children:c?e.jsx(ve,{}):e.jsx(M,{icon:e.jsx(L,{size:"1rem"}),title:r._({id:"GYQmzM"}),color:"yellow",children:e.jsx(s,{id:"3JPMTK"})})})]})}function Re({}){const[n,t]=h.useState(""),[c,x]=h.useState(""),[j]=N(a=>[a.user]),{isLoading:d,data:l,refetch:m}=U({queryKey:["emails"],queryFn:()=>R.get(f(E.user_emails)).then(a=>a.data)});function p(a){R.post(f(a,void 0,{id:n}),{}).then(()=>{m()}).catch(g=>console.log(g.data))}function i(){R.post(f(E.user_emails),{email:c,user:j==null?void 0:j.pk}).then(()=>{m()}).catch(a=>console.log(a.data))}return d?e.jsx(H,{}):e.jsxs(u,{children:[e.jsx(u.Col,{span:6,children:e.jsx(T.Group,{value:n,onChange:t,name:"email_accounts",label:r._({id:"Xfy/DT"}),children:e.jsx(_,{mt:"xs",children:l.map(a=>e.jsx(T,{value:String(a.id),label:e.jsxs(S,{position:"apart",children:[a.email,a.primary&&e.jsx(O,{color:"blue",children:e.jsx(s,{id:"T/R+Qz"})}),a.verified?e.jsx(O,{color:"green",children:e.jsx(s,{id:"QDEWii"})}):e.jsx(O,{color:"yellow",children:e.jsx(s,{id:"VBTGXl"})})]})},a.id))})})}),e.jsx(u.Col,{span:6,children:e.jsxs(_,{children:[e.jsx(y,{children:e.jsx(s,{id:"oLztc+"})}),e.jsx(W,{label:r._({id:"Y/cuRF"}),placeholder:r._({id:"JqLqpm"}),icon:e.jsx(le,{}),value:c,onChange:a=>x(a.currentTarget.value)})]})}),e.jsx(u.Col,{span:6,children:e.jsxs(S,{children:[e.jsx(C,{onClick:()=>p(E.user_email_primary),children:e.jsx(s,{id:"g/Kbij"})}),e.jsx(C,{onClick:()=>p(E.user_email_verify),children:e.jsx(s,{id:"+GoJJW"})}),e.jsx(C,{onClick:()=>p(E.user_email_remove),children:e.jsx(s,{id:"t/YqKh"})})]})}),e.jsx(u.Col,{span:6,children:e.jsx(C,{onClick:i,children:e.jsx(s,{id:"0+CYPj"})})})]})}function fe({dataProvider:n}){const[t,c]=h.useState(""),[x,j]=h.useState(),{isLoading:d,data:l}=U({queryKey:["sso-list"],queryFn:()=>R.get(f(E.user_sso)).then(i=>i.data)});h.useEffect(()=>{if(n===void 0||l===void 0)return;const i=l.map(A=>A.provider);function a(A){return!i.includes(A.id)}let g=n.providers;g=g.filter(a),j(g)},[n,l]);function m(){R.post(f(E.user_sso_remove,void 0,{id:t})).then(()=>{ie.removeQueries({queryKey:["sso-list"]})}).catch(i=>console.log(i.data))}if(d)return e.jsx(H,{});function p({provider:i}){const a=e.jsx(C,{component:"a",href:i.connect,variant:"outline",disabled:!i.configured,children:e.jsxs(S,{position:"apart",children:[i.display_name,i.configured==!1&&e.jsx(L,{})]})},i.id);return i.configured?a:e.jsx(J,{label:r._({id:"vwfjas"}),children:a})}return e.jsxs(u,{children:[e.jsx(u.Col,{span:6,children:l.length==0?e.jsx(M,{icon:e.jsx(L,{size:"1rem"}),title:r._({id:"SDND4q"}),color:"yellow",children:e.jsx(s,{id:"fkCzQP"})}):e.jsxs(_,{children:[e.jsx(T.Group,{value:t,onChange:c,name:"sso_accounts",label:r._({id:"B1uCAI"}),children:e.jsx(_,{mt:"xs",children:l.map(i=>e.jsx(T,{value:String(i.id),label:i.provider},i.id))})}),e.jsx(C,{onClick:m,children:e.jsx(s,{id:"t/YqKh"})})]})}),e.jsx(u.Col,{span:6,children:e.jsxs(_,{children:[e.jsx(y,{children:"Add SSO Account"}),e.jsx(y,{children:x===void 0?e.jsx(s,{id:"yQE2r9"}):e.jsx(_,{spacing:"xs",children:x.map(i=>e.jsx(p,{provider:i},i.id))})})]})})]})}function ve({}){return e.jsxs(e.Fragment,{children:["MFA Details",e.jsx(oe,{})]})}function Ie(){const[n,t]=N(l=>[l.user,l.fetchUserState]),c=de({initialValues:n}),[x,j]=Z([!1,!0]);function d(l){R.put(f(E.user_me),l).then(m=>{m.status===200&&(j(),t())})}return e.jsxs("form",{onSubmit:c.onSubmit(l=>d(l)),children:[e.jsxs(S,{children:[e.jsx(I,{order:3,children:e.jsx(s,{id:"AQoSYJ"})}),e.jsx(ce,{setEditing:j,editing:x})]}),e.jsx(S,{children:x?e.jsxs(_,{spacing:"xs",children:[e.jsx(W,{label:"first name",placeholder:r._({id:"V1EGGU"}),...c.getInputProps("first_name")}),e.jsx(W,{label:"Last name",placeholder:r._({id:"1ZaQUH"}),...c.getInputProps("last_name")}),e.jsx(S,{position:"right",mt:"md",children:e.jsx(C,{type:"submit",children:e.jsx(s,{id:"hQRttt"})})})]}):e.jsxs(_,{spacing:"0",children:[e.jsxs(y,{children:[e.jsx(s,{id:"7eE++L"}),c.values.first_name]}),e.jsxs(y,{children:[e.jsx(s,{id:"FSN9CU"}),c.values.last_name]})]})})]})}function Ae({height:n}){return e.jsxs(V,{w:"100%",mih:n,p:0,children:[e.jsx(I,{order:3,children:e.jsx(s,{id:"DdjH42"})}),e.jsx(Y,{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"FpsvqB"})}),e.jsx("td",{children:e.jsx(S,{children:e.jsx(he,{})})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"vXIe7J"})}),e.jsxs("td",{children:[" ",e.jsxs(S,{children:[e.jsx(je,{width:200}),ne]})]})]})]})})]})}function ye(n){return{[B.colors[n][6]]:n}}const F=Object.assign({},...Object.keys(B.colors).map(n=>ye(n)));function Pe({height:n}){const{theme:t}=xe();function c(o){v.setState({primaryColor:F[o]})}const[x,j]=h.useState(t.white);function d(o){v.setState({whiteColor:o}),j(o)}const[l,m]=h.useState(t.black);function p(o){v.setState({blackColor:o}),m(o)}function i(o){const P=b.find(X=>X.value===o);return P||b[0]}function a(){const o=b.find(P=>P.label===v.getState().radius);return o?o.value:50}const[g,A]=h.useState(a());function K(o){A(o),v.setState({radius:i(o).label})}const q=[{value:"bars",label:r._({id:"M46ISI"})},{value:"oval",label:r._({id:"Ai6veK"})},{value:"dots",label:r._({id:"8zGXnJ"})}],[G,z]=h.useState(t.loader);function Q(o){z(o),v.setState({loader:o})}return e.jsxs(V,{w:"100%",mih:n,p:0,children:[e.jsx(I,{order:3,children:e.jsx(s,{id:"FEr96N"})}),e.jsx(Y,{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"QFd2P1"})}),e.jsx("td",{children:e.jsx($,{format:"hex",onChange:c,withPicker:!1,swatches:Object.keys(F)})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"160vo+"})}),e.jsx("td",{children:e.jsx(w,{value:x,onChange:d})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"u01284"})}),e.jsx("td",{children:e.jsx(w,{value:l,onChange:p})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"bjp1xg"})}),e.jsx("td",{children:e.jsx(ee,{label:o=>i(o).label,defaultValue:50,step:25,marks:b,value:g,onChange:K,mb:18})})]}),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(s,{id:"EBeoY+"})}),e.jsx("td",{children:e.jsxs(S,{align:"center",children:[e.jsx(se,{data:q,value:G,onChange:Q}),e.jsx(H,{type:G,mah:18})]})})]})]})})]})}function be(){return e.jsx("div",{children:e.jsxs(te,{cols:2,spacing:"md",children:[e.jsx(V,{w:"100%",children:e.jsx(Ie,{})}),e.jsxs(u,{gutter:"md",children:[e.jsx(u.Col,{children:e.jsx(Pe,{height:142})}),e.jsx(u.Col,{children:e.jsx(Ae,{height:142})})]})]})})}function es(){const n=h.useMemo(()=>[{name:"account",label:r._({id:"AeXO77"}),icon:e.jsx(ge,{}),content:e.jsx(be,{})},{name:"security",label:r._({id:"a3LDKx"}),icon:e.jsx(pe,{}),content:e.jsx(Ce,{})},{name:"dashboard",label:r._({id:"7p5kLi"}),icon:e.jsx(Se,{})},{name:"display",label:r._({id:"+4YDgS"}),icon:e.jsx(me,{}),content:e.jsx(k,{keys:["STICKY_HEADER","DATE_DISPLAY_FORMAT","FORMS_CLOSE_USING_ESCAPE","PART_SHOW_QUANTITY_IN_FORMS","DISPLAY_SCHEDULE_TAB","DISPLAY_STOCKTAKE_TAB","TABLE_STRING_MAX_LENGTH"]})},{name:"search",label:r._({id:"A1taO8"}),icon:e.jsx(ue,{}),content:e.jsx(k,{keys:["SEARCH_WHOLE","SEARCH_REGEX","SEARCH_PREVIEW_RESULTS","SEARCH_PREVIEW_SHOW_PARTS","SEARCH_HIDE_INACTIVE_PARTS","SEARCH_PREVIEW_SHOW_SUPPLIER_PARTS","SEARCH_PREVIEW_SHOW_MANUFACTURER_PARTS","SEARCH_PREVIEW_SHOW_CATEGORIES","SEARCH_PREVIEW_SHOW_STOCK","SEARCH_PREVIEW_HIDE_UNAVAILABLE_STOCK","SEARCH_PREVIEW_SHOW_LOCATIONS","SEARCH_PREVIEW_SHOW_COMPANIES","SEARCH_PREVIEW_SHOW_BUILD_ORDERS","SEARCH_PREVIEW_SHOW_PURCHASE_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_PURCHASE_ORDERS","SEARCH_PREVIEW_SHOW_SALES_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_SALES_ORDERS","SEARCH_PREVIEW_SHOW_RETURN_ORDERS","SEARCH_PREVIEW_EXCLUDE_INACTIVE_RETURN_ORDERS"]})},{name:"notifications",label:r._({id:"iDNBZe"}),icon:e.jsx(_e,{})},{name:"reporting",label:r._({id:"ApEshE"}),icon:e.jsx(Ee,{}),content:e.jsx(k,{keys:["REPORT_INLINE","LABEL_INLINE","LABEL_DEFAULT_PRINTER"]})}],[]),[t]=N(c=>[c.user]);return e.jsx(e.Fragment,{children:e.jsxs(_,{spacing:"xs",children:[e.jsx(re,{title:r._({id:"Puv7+X"}),subtitle:`${t==null?void 0:t.first_name} ${t==null?void 0:t.last_name}`,shorthand:(t==null?void 0:t.username)||"",switch_link:"/settings/system",switch_text:e.jsx(s,{id:"4ejweu"}),switch_condition:(t==null?void 0:t.is_staff)||!1}),e.jsx(ae,{pageKey:"user-settings",panels:n})]})})}export{es as default};
