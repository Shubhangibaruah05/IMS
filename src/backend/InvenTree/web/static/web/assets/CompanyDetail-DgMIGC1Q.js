import{r as i,j as s,a4 as A,aK as j,S as N,z as O}from"./vendor-C5fHLTDD.js";import{g as w,a as C,i as t,A as l,U as o,l as I}from"./index-DX4YmBvQ.js";import{I as G,D as v}from"./ItemDetails-DTEWr5C0.js";import{D as L}from"./DetailsImage-Y3z_v9dS.js";import{A as U,E as W,D as B}from"./ActionDropdown-C-AjyTLr.js";import{P as Y}from"./PageDetail-BwkjpKwR.js";import{P as z}from"./PanelGroup-CWuySmV8.js";import{N as K}from"./MarkdownEditor-CY0oiYAG.js";import{c as Q}from"./CompanyForms-DiSrilXC.js";import{a as F,u as M,b as S}from"./UseForm-Btt47jru.js";import{u as V}from"./UseInstance-rwUPjJ4i.js";import{A as T}from"./AddItemButton-BjrbTsCx.js";import{Y as q}from"./YesNoButton-DIAHIY63.js";import{u as D,R as y,a as P,I as E}from"./InvenTreeTable-LkhQVMZE.js";import{A as H}from"./AttachmentTable-AC0GadOO.js";import{M as J}from"./ManufacturerPartTable-DoEr_Phj.js";import{P as Z}from"./PurchaseOrderTable-CR60EQdn.js";import{S as X}from"./SupplierPartTable-DDly2pj6.js";import{R as $}from"./ReturnOrderTable-Bl9Id3tK.js";import{S as ee}from"./SalesOrderTable-BQaiujQ9.js";import{S as R}from"./StockItemTable-DiLjDthM.js";import{d as se}from"./DesktopAppView-DlNUv0Ur.js";import{I as te}from"./IconInfoCircle-D5K91YCo.js";import{b as ae,c as re,I as oe,d as ie,e as le,f as ne,g as ce,h as de}from"./ApiForm-Dtyf-xF2.js";import{I as pe}from"./IconBuildingWarehouse-t6daEFLQ.js";import{a as me}from"./Instance-c0njg-mI.js";import"./ProgressBar-BhbAlmdB.js";import"./StylishText-CD9I8-X7.js";import"./ModelType-C8nSW6qW.js";import"./BaseContext-BGXKB9QI.js";import"./index-DtVngfXu.js";import"./ActionButton-seel8ZoK.js";import"./notifications-DM-9a7Is.js";import"./IconQrcode-DcoHpd2K.js";import"./IconEdit-DwKL16RF.js";import"./IconTrash-KFql82qv.js";import"./Placeholder-C1-1kY0o.js";import"./IconAt-DPf0GkPm.js";import"./IconPlus-QsNVBJ5N.js";import"./IconSearch-CKaD9XHL.js";import"./IconRefresh-ClXNAr2V.js";import"./IconFileTypePdf-ST3WfDb7.js";import"./IconExternalLink-CDh1KHXW.js";import"./ColumnRenderers-Dz-jxqgo.js";import"./PurchaseOrderForms-6UEJk9M0.js";import"./StandaloneField-BRVMmltH.js";import"./IconCoins-B2Q7vuLB.js";import"./IconAddressBook-DD_FnNjd.js";import"./IconUsers-VfNlX2pM.js";import"./StockForms-yHG_9MvM.js";/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ue=w("outline","map-2","IconMap2",[["path",{d:"M12 18.5l-3 -1.5l-6 3v-13l6 -3l6 3l6 -3v7.5",key:"svg-0"}],["path",{d:"M9 4v13",key:"svg-1"}],["path",{d:"M15 7v5.5",key:"svg-2"}],["path",{d:"M21.121 20.121a3 3 0 1 0 -4.242 0c.418 .419 1.125 1.045 2.121 1.879c1.051 -.89 1.759 -1.516 2.121 -1.879z",key:"svg-3"}],["path",{d:"M19 18v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var he=w("outline","package-export","IconPackageExport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M15 18h7",key:"svg-4"}],["path",{d:"M19 15l3 3l-3 3",key:"svg-5"}]]);function be({companyId:d,params:p}){const r=C(),e=D("address"),f=i.useMemo(()=>[{accessor:"title",sortable:!0,switchable:!1},{accessor:"primary",switchable:!1,sortable:!1,render:a=>q({value:a.primary})},{accessor:"address",title:t._({id:"Du6bPw"}),sortable:!1,switchable:!1,render:a=>{let _="";return a!=null&&a.line1&&(_+=a.line1),a!=null&&a.line2&&(_+=" "+a.line2),_.trim()}},{accessor:"postal_code",sortable:!1,switchable:!0},{accessor:"postal_city",sortable:!1,switchable:!0},{accessor:"province",sortable:!1,switchable:!0},{accessor:"country",sortable:!1,switchable:!0},{accessor:"shipping_notes",sortable:!1,switchable:!0},{accessor:"internal_shipping_notes",sortable:!1,switchable:!0},{accessor:"link",sortable:!1,switchable:!0}],[]),n=i.useMemo(()=>({company:{},title:{},primary:{},line1:{},line2:{},postal_code:{},postal_city:{},province:{},country:{},shipping_notes:{},internal_shipping_notes:{},link:{}}),[]),m=F({url:l.address_list,title:t._({id:"W0pjLr"}),fields:n,initialData:{company:d},successMessage:t._({id:"N0ZOat"}),onFormSuccess:e.refreshTable}),[u,c]=i.useState(-1),h=M({url:l.address_list,pk:u,title:t._({id:"xLQ0lF"}),fields:n,onFormSuccess:a=>e.updateRecord(a)}),b=S({url:l.address_list,pk:u,title:t._({id:"xiRN5x"}),onFormSuccess:e.refreshTable,preFormWarning:t._({id:"F1bgq9"})}),k=i.useCallback(a=>{let _=r.hasChangeRole(o.purchase_order)||r.hasChangeRole(o.sales_order),g=r.hasDeleteRole(o.purchase_order)||r.hasDeleteRole(o.sales_order);return[y({hidden:!_,onClick:()=>{c(a.pk),h.open()}}),P({hidden:!g,onClick:()=>{c(a.pk),b.open()}})]},[r]),x=i.useMemo(()=>{let a=r.hasChangeRole(o.purchase_order)||r.hasChangeRole(o.sales_order);return[s.jsx(T,{tooltip:t._({id:"W0pjLr"}),onClick:()=>m.open(),hidden:!a})]},[r]);return s.jsxs(s.Fragment,{children:[m.modal,h.modal,b.modal,s.jsx(E,{url:I(l.address_list),tableState:e,columns:f,props:{rowActions:k,tableActions:x,params:{...p,company:d}}})]})}function _e({companyId:d,params:p}){const r=C(),e=D("contact"),f=i.useMemo(()=>[{accessor:"name",sortable:!0,switchable:!1},{accessor:"phone",switchable:!0,sortable:!1},{accessor:"email",switchable:!0,sortable:!1},{accessor:"role",switchable:!0,sortable:!1}],[]),n=i.useMemo(()=>({company:{},name:{},phone:{},email:{},role:{}}),[]),[m,u]=i.useState(void 0),c=M({url:l.contact_list,pk:m,title:t._({id:"mQpWAe"}),fields:n,onFormSuccess:a=>e.updateRecord(a)}),h=F({url:l.contact_list,title:t._({id:"M0FgOk"}),initialData:{company:d},fields:n,onFormSuccess:e.refreshTable}),b=S({url:l.contact_list,pk:m,title:t._({id:"0oMKRL"}),onFormSuccess:e.refreshTable}),k=i.useCallback(a=>{let _=r.hasChangeRole(o.purchase_order)||r.hasChangeRole(o.sales_order),g=r.hasDeleteRole(o.purchase_order)||r.hasDeleteRole(o.sales_order);return[y({hidden:!_,onClick:()=>{u(a.pk),c.open()}}),P({hidden:!g,onClick:()=>{u(a.pk),b.open()}})]},[r]),x=i.useMemo(()=>{let a=r.hasAddRole(o.purchase_order)||r.hasAddRole(o.sales_order);return[s.jsx(T,{tooltip:t._({id:"QsNWTM"}),onClick:()=>h.open(),hidden:!a})]},[r]);return s.jsxs(s.Fragment,{children:[h.modal,c.modal,b.modal,s.jsx(E,{url:I(l.contact_list),tableState:e,columns:f,props:{rowActions:k,tableActions:x,params:{...p,company:d}}})]})}function us(d){const{id:p}=se(),r=C(),{instance:e,refreshInstance:f,instanceQuery:n}=V({endpoint:l.company_list,pk:p,params:{},refetchOnMount:!0}),m=i.useMemo(()=>{if(n.isFetching)return s.jsx(A,{});let b=[{type:"text",name:"description",label:t._({id:"Nu4oKW"})},{type:"link",name:"website",label:t._({id:"On0aF2"}),external:!0,copy:!0,hidden:!e.website},{type:"text",name:"phone",label:t._({id:"HF6C2L"}),copy:!0,hidden:!e.phone},{type:"text",name:"email",label:t._({id:"hzKQCy"}),copy:!0,hidden:!e.email}],k=[{type:"string",name:"currency",label:t._({id:"xjO9oI"})},{type:"boolean",name:"is_supplier",label:t._({id:"PYTEl0"}),icon:"suppliers"},{type:"boolean",name:"is_manufacturer",label:t._({id:"+m9/3S"}),icon:"manufacturers"},{type:"boolean",name:"is_customer",label:t._({id:"876pfE"}),icon:"customers"}];return s.jsxs(G,{children:[s.jsxs(j,{children:[s.jsx(j.Col,{span:4,children:s.jsx(L,{appRole:o.purchase_order,apiPath:l.company_list,src:e.image,pk:e.pk,refresh:f,imageActions:{uploadFile:!0,deleteFile:!0}})}),s.jsx(j.Col,{span:8,children:s.jsx(v,{item:e,fields:b})})]}),s.jsx(v,{item:e,fields:k})]})},[e,n]),u=i.useMemo(()=>[{name:"details",label:t._({id:"URmyfc"}),icon:s.jsx(te,{}),content:m},{name:"manufactured-parts",label:t._({id:"glJbgw"}),icon:s.jsx(ae,{}),hidden:!(e!=null&&e.is_manufacturer),content:(e==null?void 0:e.pk)&&s.jsx(J,{params:{manufacturer:e.pk}})},{name:"supplied-parts",label:t._({id:"i4b9ex"}),icon:s.jsx(pe,{}),hidden:!(e!=null&&e.is_supplier),content:(e==null?void 0:e.pk)&&s.jsx(X,{params:{supplier:e.pk}})},{name:"purchase-orders",label:t._({id:"85Yvr2"}),icon:s.jsx(re,{}),hidden:!(e!=null&&e.is_supplier),content:(e==null?void 0:e.pk)&&s.jsx(Z,{supplierId:e.pk})},{name:"stock-items",label:t._({id:"Jbck4N"}),icon:s.jsx(oe,{}),hidden:!(e!=null&&e.is_manufacturer)&&!(e!=null&&e.is_supplier),content:(e==null?void 0:e.pk)&&s.jsx(R,{params:{company:e.pk}})},{name:"sales-orders",label:t._({id:"B1TL+X"}),icon:s.jsx(ie,{}),hidden:!(e!=null&&e.is_customer),content:(e==null?void 0:e.pk)&&s.jsx(ee,{customerId:e.pk})},{name:"return-orders",label:t._({id:"LlTg8M"}),icon:s.jsx(le,{}),hidden:!(e!=null&&e.is_customer),content:e.pk&&s.jsx($,{params:{customer:e.pk}})},{name:"assigned-stock",label:t._({id:"TVGEcl"}),icon:s.jsx(he,{}),hidden:!(e!=null&&e.is_customer),content:e!=null&&e.pk?s.jsx(R,{params:{customer:e.pk}}):s.jsx(A,{})},{name:"contacts",label:t._({id:"gVfVfe"}),icon:s.jsx(me,{}),content:(e==null?void 0:e.pk)&&s.jsx(_e,{companyId:e.pk})},{name:"addresses",label:t._({id:"bYmAV1"}),icon:s.jsx(ue,{}),content:(e==null?void 0:e.pk)&&s.jsx(be,{companyId:e.pk})},{name:"attachments",label:t._({id:"w/Sphq"}),icon:s.jsx(ne,{}),content:s.jsx(H,{endpoint:l.company_attachment_list,model:"company",pk:e.pk??-1})},{name:"notes",label:t._({id:"1DBGsz"}),icon:s.jsx(ce,{}),content:s.jsx(K,{url:I(l.company_list,e.pk),data:(e==null?void 0:e.notes)??"",allowEdit:!0})}],[p,e]),c=M({url:l.company_list,pk:e==null?void 0:e.pk,title:t._({id:"HoG6cl"}),fields:Q(),onFormSuccess:f}),h=i.useMemo(()=>[s.jsx(U,{tooltip:t._({id:"z+ZEYC"}),icon:s.jsx(de,{}),actions:[W({hidden:!r.hasChangeRole(o.purchase_order),onClick:()=>c.open()}),B({hidden:!r.hasDeleteRole(o.purchase_order)})]},"company")],[p,e,r]);return s.jsxs(s.Fragment,{children:[c.modal,s.jsxs(N,{spacing:"xs",children:[s.jsx(O,{visible:n.isFetching}),s.jsx(Y,{title:t._({id:"7i8j3G"})+`: ${e.name}`,subtitle:e.description,actions:h,imageUrl:e.image,breadcrumbs:d.breadcrumbs}),s.jsx(z,{pageKey:"company",panels:u})]})]})}export{us as default};
